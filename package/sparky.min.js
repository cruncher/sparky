Object.assign||function(a){"use strict";function b(a){return void 0!==a&&null!==a}function c(b){var c,d,e,f=a.keys(b);if(a.getOwnPropertySymbols)for(c=a.getOwnPropertySymbols(b),d=c.length;d--;)e=a.getOwnPropertyDescriptor(b,c[d]),e.enumerable&&f.push(symbol);return f}a.defineProperty(a,"assign",{value:function(d){if(!b(d))throw new TypeError("Object.assign: First argument "+d+" cannot be converted to object.");var e,f,g,h,i,j=a(d);for(e=1;e<arguments.length;e++)if(f=arguments[e],b(f))for(g=c(a(f)),i=g.length;i--;)h=g[i],j[h]=f[h];return j},configurable:!0,writable:!0})}(Object),Number.isNaN||!function(a){"use strict";Object.defineProperty(Number,"isNaN",{value:function(b){return"number"==typeof b&&a(b)},configurable:!0,enumerable:!1,writable:!0})}(isNaN),Math.log10||(Math.log10=function(a){return Math.log(a)/Math.LN10}),function(a,b){a.CustomEvent&&"function"==typeof a.CustomEvent||(a.CustomEvent=function(a,c){c=c||{bubbles:!1,cancelable:!1,detail:b};var d=document.createEvent("CustomEvent");return d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),d},a.CustomEvent.prototype=a.Event.prototype)}(window),function(a){for(var b=40,c=["ms","moz","webkit","o"],d=c.length;d--&&!a.requestAnimationFrame;)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c,d){var e=+new Date,f=b-e%b,g=a.setTimeout(function(){c(f)},f);return g}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}(window),function(a){a.console&&a.console.log&&(console.log("Fn"),console.log("https://github.com/cruncher/fn"),console.log("______________________________"))}(this),function(a){"use strict";function b(){}function c(a){return a}function d(a){return a()}function e(a,b){return function(c){return a(b(c))}}function f(){var a=arguments;return function(b){return t.reduce.call(a,d,b)}}function g(a,b){function c(){var c=arguments;return c.length>=b?a.apply(this,c):g(function(){var b=t.slice.apply(c);return t.push.apply(b,arguments),a.apply(this,b)},b-c.length)}return b=b||a.length,s&&(c.toString=function(){return a.toString()}),x?Object.defineProperty(c,"length",{value:b}):c}function h(a){return a instanceof Object}function i(a){return a.replace(y,"").split(z)}function j(a,b){var c=b.shift(),d=a[c];return 0===b.length?d:void 0!==d?j(d,b):void 0}function k(a,b,c){var d=b.shift();return 0===b.length?a[d]=c:k(h(a[d])?a[d]:a[d]={},b,c)}function l(a){function b(){c=!1,d=C(),e.forEach(n.apply([C()])),e.length=0}var c=!1,d=0,e=[];return function(f){if(c)return void e.push(f);var g=C();return d+a>g?(e.push(f),void(c=setTimeout(b,a+d-g))):(d=g,void f(d))}}function m(a,c){function d(){h=!1,a.apply(i,j)}function e(){f=b,h&&d(),a=b}function f(){h||(h=!0,k(d))}function g(){i=this,j=arguments,f()}var h,i,j,k=c?l(c):B;return g.cancel=e,g}function n(a){return"function"==typeof a?new p(a):a&&a.next?new r(a):new q(a)}function o(a,b){return"push"!==b?D(a,b):void 0}function p(a){function b(a){var b=d;d=o,b(c,a),d=b}if(!this||!p.prototype.isPrototypeOf(this))return new p(a);var c={},d=D(c);Object.assign(this,a(b)),this.on=function(a,b){return c[a]=c[a]||[],c[a].push(b),this}}function q(a){return this&&q.prototype.isPrototypeOf(this)?(this.status="ready",void p.call(this,function(b){var c="string"==typeof a?t.slice.apply(a):a||[];return{next:function(){var a=c.shift();return"done"===c.status&&(this.status="done"),a},push:function(){c.push.apply(c,arguments),b("push")}}})):new q(a)}function r(a){return this&&r.prototype.isPrototypeOf(this)?void p.call(this,function(b){var c="string"==typeof a?t.slice.apply(a):a||[];return{next:function(){var a=c.shift();return("done"===c.status||0===c.length)&&(this.status="done"),a}}}):new r(a)}var s=!0,t=Array.prototype,u=(Function.prototype,Number.prototype),v=Object.prototype,w=String.prototype;Math.log10||(Math.log10=function(a){return Math.log(a)/Math.LN10});var x=function(){var a=function(){};try{Object.defineProperty(a,"length",{value:2})}catch(b){return!1}return 2===a.length;
}(),y=/^\[|\]$/g,z=/\]?\.|\[/g,A={url:/^(?:\/|https?\:\/\/)(?:[!#$&-;=?-~\[\]\w]|%[0-9a-fA-F]{2})+$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,hexColor:/^(#)?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,hslColor:/^(?:(hsl)(\())?\s?(\d{1,3}(?:\.\d+)?)\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?(\))?$/,rgbColor:/^(?:(rgb)(\())?\s?(\d{1,3})\s?,\s?(\d{1,3})\s?,\s?(\d{1,3})\s?(\))?$/,hslaColor:/^(?:(hsla)(\())?\s?(\d{1,3}(?:\.\d+)?)\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?,\s?([01](?:\.\d+)?)\s?(\))?$/,rgbaColor:/^(?:(rgba)(\())?\s?(\d{1,3})\s?,\s?(\d{1,3})\s?,\s?(\d{1,3})\s?,\s?([01](?:\.\d+)?)\s?(\))?$/,cssValue:/^(\-?\d+(?:\.\d+)?)(px|%|em|ex|pt|in|cm|mm|pt|pc)?$/,cssAngle:/^(\-?\d+(?:\.\d+)?)(deg)?$/,image:/(?:\.png|\.gif|\.jpeg|\.jpg)$/,"float":/^(\-?\d+(?:\.\d+)?)$/,"int":/^(\-?\d+)$/},B=a.requestAnimationFrame,C=a.performance.now?function(){return a.performance.now()}:function(){return+new Date};Object.assign(n,{Throttle:m,noop:b,id:c,call:d,curry:g,compose:e,pipe:f,is:g(function(a,b){return a===b}),equals:g(function(a,b){if(a===b)return!0;for(var c=Object.keys(a),d=c.length;d--;)if(a[c[d]]!==b[c[d]])return!1;return!0}),by:g(function(a,b,c){return n.byGreater(b[a],c[a])}),byGreater:g(function(a,b){return a===b?0:a>b?1:-1}),byAlphabet:g(function(a,b){return w.localeCompare.call(a,b)}),assign:g(function(a,b){return Object.assign(b,a)}),get:g(function(a,b){return"number"==typeof a?b[a]:""===a?b:j(b,i(a))}),set:g(function(a,b,c){if("number"==typeof a)return c[a]=b;var d=i(a);return 1===d.length?c[a]=b:k(c,d,b)}),invoke:g(function(a,b){return b[a]()}),apply:g(function(a,b){return b.apply(null,a)}),throttle:function(a,b){function c(b){return m(b,a)}return void 0===b&&a.apply&&(b=a,a=void 0),b?c(b):c},concat:g(function(a,b){return b.concat?b.concat(a):t.concat.call(b,a)}),each:g(function(a,b){return b.each?b.each(a):t.forEach.call(b,a)}),filter:g(function(a,b){return b.filter?b.filter(a):t.filter.call(b,a)}),map:g(function(a,b){return b.map?b.map(a):t.map.call(b,a)}),reduce:g(function(a,b,c){return c.reduce?c.reduce(a,b):t.reduce.call(c,a,b)}),slice:g(function(a,b,c){return c.slice?c.slice(a,b):t.slice.call(c,a,b)}),sort:g(function(a,b){return b.sort?b.sort(a):t.sort.call(b,a)}),push:g(function(a,b){return(a.push||t.push).apply(a,b),a}),add:g(function(a,b){return b+a}),multiply:g(function(a,b){return b*a}),mod:g(function(a,b){return b%a}),pow:g(function(a,b){return Math.pow(b,a)}),min:g(function(a,b){return a>b?b:a}),max:g(function(a,b){return b>a?b:a}),normalise:g(function(a,b,c){return(c-a)/(b-a)}),denormalise:g(function(a,b,c){return c*(b-a)+a}),toFixed:g(function(a,b){return u.toFixed.call(b,a)}),rangeLog:g(function(a,b,c){return n.denormalise(a,b,Math.log(value/a)/Math.log(b/a))}),rangeLogInv:g(function(a,b,c){return a*Math.pow(b/a,n.normalise(a,b,c))}),dB:function(a){return this.map(function(a){return 20*Math.log10(a)})},match:g(function(a,b){return a.test(b)}),exec:g(function(a,b){return a.exec(b)||void 0}),slugify:function(a){return"string"==typeof a?a.trim().toLowerCase().replace(/[\W_]/g,"-"):void 0},not:function(a){return!a},isDefined:function(a){return!!a||void 0!==a&&null!==a},typeOf:function(a){return typeof a},classOf:function(a){return v.toString.apply(a).slice(8,-1);
},stringTypeOf:function(a,b){return function(c){for(var d=-1;++d<b.length;)if(a[b[d]].test(c))return b[d];try{return JSON.parse(c),"json"}catch(e){}return"string"}}(A,["url","email","int","float"])});var D=g(function(a,b){if(a[b]){var c=t.slice.apply(a[b]);c.forEach(n.run)}});Object.assign(p.prototype,{create:function(a){var b=Object.create(this);return b.next=a,b},push:function(a){throw new Error("Fn: "+this.constructor.name+" is not pushable.")},shift:function(){return this.next()},pull:function(a){function b(){for(var b;void 0!==(b=c());)a(b)}a=a||n.noop;var c=this.next;return this.pull=function(b){var c=a;return a=function(){c.apply(null,arguments),b.apply(null,arguments)},this},b(),this.on("push",b)},pipe:function(a){var b=this,c=a||new q;return this.tap(function(a){c.push(a)}),c.on&&(c.on("next",function(){b.next()}),b.on("push",function(){c.push()})),c},tap:function(a){return this.next=n.compose(function(b){return void 0!==b&&a(b),b},this.next),this},map:function(a){return this.create(n.compose(function(b){return void 0!==b?a(b):void 0},this.next))},head:function(){var a=this,b=0;return this.create(function(){return 0===b++?(this.status="done",a.next()):void 0})},tail:function(){var a=this,b=0;return this.create(function(){return 0===b++&&a.next(),a.next()})},slice:function(a,b){var c=this,d=-1;return this.create(function(){for(;++d<a;)c.next();return b>d?(d===b-1&&(this.status="done"),c.next()):void 0})},split:function(a){var b=this,c=[];return this.create(function d(){var e,f=b.next();return void 0!==f?f===a?(e=c,c=[],e):(c.push(f),"done"===b.status?(e=c,c=[],e):d()):void 0})},group:function(a,b){function c(b){var h=e.next();if(void 0!==h){var i=a(h);if(g[i]){if(g[i].push(h),g[i]===b)return}else g[i]=d(i),f.push(g[i]),g[i].push(h);return c(b)}}function d(a){var b=new q;return b.on("next",function(){c(a)}),s&&(b.key=a),b}var e=this,f=[],g={};return a=a||n.id,this.create(function h(){var b=f.shift();if(b)return b;var c=e.next();if(void 0!==c){var i=a(c);return g[i]?(g[i].push(c),h()):(g[i]=d(i),g[i].push(c),g[i])}})},concatParallel:function(){function a(a){a.on("push",function(){d.push(a)}),d.push(a)}function b(){var a=d.shift();if(void 0!==a){var c=a.next();return void 0===c?b():c}}var c=this,d=[];return this.create(function(){var d=c.next();void 0!==d&&a(d);var e=b();return e})},concatSerial:function(){var a,b=this;return this.create(function c(){if(a=a||b.next(),void 0!==a){var d=a.next?a.next():a.shift();return void 0===d?(a=void 0,c()):d}})},find:function(a){function c(){for(var e;void 0!==(e=d.next())&&!a(e););return void 0!==e&&(c=b),e}var d=this;return a="object"==typeof a?compare(a):a.apply?a:n.is(a),new this.constructor(function(){return c()},d.push)},filter:function(a){var b=this;return a="object"==typeof a?n.compare(a):a,this.create(function(){for(var c;void 0!==(c=b.next())&&!a(c););return c},b.push)},scan:function(a){var b=0,c=0;return this.map(function(d){return a(d,c,b++)})},sort:function(a){var b=this,c=[];return a=a||n.byGreater,new this.constructor(function(){return 0===c.length&&(c=b.toArray(),c.sort(a)),c.shift()},b.push)},unique:function(){var a=this,b=[];return new this.constructor(function c(){var d=a.next();if(void 0!==d)return-1===b.indexOf(d)?(b.push(d),d):c()},a.push)},batch:function(a){var b=this,c=[];return new this.create(a?function(){for(var d;c.length<a;){if(d=b.next(),void 0===d)return;c.push(d)}if(c.length>=a){var e=c;return c=[],e}}:function(){return c=b.toArray(),c.length?c:void 0})},concatAll:function(){var a,b=this;return this.create(function c(){var d=a.next?a.next():a.shift();return void 0!==d?d:(a=b.next(),void 0!==a?c():void 0)})},concatMap:function(a){return this.map(a).concatAll()},chain:function(a){var b=this,c=[],d=this.create(function e(){var a=c.shift();if(void 0!==a)return a;if("done"===b.status)return void(this.status="done");var d=b.next();if(void 0!==d)return c=r(d),e()});return d.status="active",d},add:function(a){return this.map(n.add(a))},subtract:function(a){return this.map(n.subtract(a))},multiply:function(a){return this.map(n.multiply(a))},divide:function(a){
return this.map(n.divide(a))},mod:function(a){return this.map(n.mod(a))},pow:function(a){return this.map(n.pow(a))},boolify:function(){return this.map(Boolean)},stringify:function(){return this.map(String)},jsonify:function(){return this.map(JSON.stringify)},slugify:function(){return this.map(n.slugify)},match:function(a){return this.map(n.match(a))},exec:function(a){return this.map(n.exec(a))},get:function(a){return this.map(n.get(path))},set:function(a,b){return this.map(n.set(path,b))},assign:function(a){return this.map(n.assign(a))},typeOf:function(){return this.map(n.typeOf)},classOf:function(){return this.map(n.classOf)},done:function(a){var b=this;this.next;return this.next=function(){var c=_next.apply(b);return void 0===c&&a(),c},this},apply:function(a,b){return this.push.apply(this,b),this.next()},call:function(){var a=t.slice.call(arguments,1);return this.apply(this,a)},toArray:function(){for(var a,b=[];void 0!==(a=this.next());)b.push(a);return b},toReadStream:function(){return new r(this)},toString:function(){return this.toArray().join("")},toFunction:function(){var a=this;return function(){return a.apply(a,arguments)}},toPromise:function(){var a=this,b=this.next();return new Promise(function(c,d){return void 0!==b?void c(b):void a.on("push",function(){var b=a.next();void 0!==b&&c(b)}).on("end",d)})}}),p.prototype.toJSON=p.prototype.toArray,Object.setPrototypeOf(r.prototype,p.prototype),Object.setPrototypeOf(q.prototype,p.prototype),Object.assign(n,{Stream:p,ReadStream:r,BufferStream:q}),a.Fn=n}(this),function(a){"use strict";function b(a){return a.listeners||Object.defineProperty(a,"listeners",{value:{}}),a.listeners}function c(a){return a.delegates||Object.defineProperty(a,"delegates",{value:[]}),a.delegates}function d(a,b){var d=c(a);-1===d.indexOf(b)&&d.push(b)}function e(a,b){var d=c(a);if(void 0===b)return void(d.length=0);var e=d.indexOf(b);-1!==e&&d.splice(e,1)}function f(a,b,c){for(var d,e,f=-1,g=b.length;++f<g&&e!==!1;)d=c.concat(b[f][1]),e=b[f][0].apply(a,d);return e}var g=a.mixin||(a.mixin={}),h={},i=Function.prototype.call.bind(Array.prototype.slice);g.events={on:function(a,c){var e=this;if(1===arguments.length){if("string"==typeof a)return Fn.Stream(function(b){function c(a,c){d.push(c),b("push")}var d=[];return e.on(a,c),{next:function(){return d.shift()},end:function(){e.off(a,c)}}});if(a.trigger)return d(this,a),this}if(!c)throw new Error('Sparky: calling .on("'+a+'", fn) but fn is '+typeof c);var f,g,h=b(this);if("string"!=typeof a)return this;for(a=a.trim().split(/\s+/),g=[c,i(arguments,2)];f=a.shift();)h[f]||(h[f]=[]),h[f].push(g);return this},off:function(a,b){var c,d,f;if(0===arguments.length){if(e(this),this.listeners)for(c in this.listeners)this.listeners[c].length=0,delete this.listeners[c];return this}if(1===arguments.length&&a.trigger)return e(this,a),this;if(!this.listeners)return this;for("string"==typeof a?a=a.trim().split(/\s+/):(b=a,a=Object.keys(this.listeners));c=a.shift();)if(d=this.listeners[c])if(b)for(f=d.length;f--;)d[f][0]===b&&d.splice(f,1);else this.listeners[c].length=0,delete this.listeners[c];return this},trigger:function(a){var d,e,g,j,k=b(this),l=c(this).slice(),m=i(arguments);if("string"==typeof a?(d=a,e=this):(d=a.type,e=a.target),k[d]&&(m[0]=e,f(this,k[d].slice(),m)===!1))return this;if(!l.length)return this;for(g=-1,j=l.length,m[0]=h,"string"==typeof a&&(h.type=d,h.target=e);++g<j;)l[g].trigger.apply(l[g],m);return this}}}(this),function(a){function b(a){a[0].apply(null,a[1])}function c(a,b){return a&&(Object.getOwnPropertyDescriptor(a,b)||c(Object.getPrototypeOf(a),b))}function d(a,c){c=c.slice();for(var d,e,f=-1;c[++f];)d=c[f],e=d[1][0],b(d)}function e(a,b){var e=c(a,b);if(e){var f=e.get&&e.get.observers;f&&d(a,f)}}function f(a,c,d,e){var f=a[c];delete e.writable,delete e.value,e.configurable=!1,e.get=function(){return f},e.set=function(a){a!==f&&(f=a,d.slice().forEach(b))},e.get.observers=d,Object.defineProperty(a,c,e)}function g(a,b,c,e){var f=e.set;f&&(e.set=function(a){f.call(this,a),d(this,c)}),e.configurable=!1,e.get.observers=c,Object.defineProperty(a,b,e);
}function h(a,b,c){var d=l(arguments,0);d.splice(1,2);for(var e,h=[c,d],i=a;!(e=Object.getOwnPropertyDescriptor(i,b))&&(i=Object.getPrototypeOf(i)););if(e&&e.get&&e.get.observers)return void e.get.observers.push(h);var j=[h];return e?e.configurable===!1?void(e.get&&!e.set?e.get.observers=j:(k&&console.warn("observe: Property ."+b+" has { configurable: false }. Can not observe.",a),k&&console.trace())):e.writable===!0?void f(a,b,j,e):e.writable===!1?void(k&&console.warn("observe: Property ."+b+" has { writable: false }. Shall not observe.",a)):e.get?void g(i,b,j,e):void(k&&console.warn("observe: Property ."+b+" has a setter but no getter. Will not observe.",a)):void f(a,b,j,{enumerable:!0})}function i(a,b,c){var d;if("[object Function]"!==m(b))h.apply(null,arguments);else{c=prop,d=l(arguments,0),d.splice(1,0,null);for(b in a)d[1]=b,h.apply(null,d)}}function j(a,b,d){if(b instanceof Function){d=b;for(b in a)j(data,key,d)}else{var e=c(a,b);if(e){var f=e.get&&e.get.observers;if(f){var g;if(d)for(g=f.length;g--;)f[g][0]===d&&f.splice(g,1);else f.length=0}}}}var k=!1,l=Function.prototype.call.bind(Array.prototype.slice),m=Function.prototype.call.bind(Object.prototype.toString);a.observe=i,a.unobserve=j,a.notify=e}(window),function(a){"use strict";function b(){return this}function c(a,b){for(var c=a.index,d=-1,e=a.length;++d<e;)if(a[d][c]===b)return a[d]}function d(a,b,c){c=c||Object.keys(b);for(var d,e=c.length;e--;)if(d=c[e],a[d]!==b[d]&&!("function"==typeof b[d]&&b[d](a,d)||b[d]instanceof RegExp&&b[d].test(a[d])))return!1;return!0}function e(a,b){var c=Object.keys(b);return 0===c.length?a.slice():a.filter(function(a){return d(a,b,c)})}function f(a,b){Array.prototype.push.call(a,b),a.trigger("add",b)}function g(a,b,c){for(var d=Array.prototype.splice.call.apply(Array.prototype.splice,arguments),e=d.length,f=Array.prototype.slice.call(arguments,3),g=f.length,h=-1;e--;)a.trigger("remove",d[e],b+e);for(;++h<g;)a.trigger("add",f[h],h);return d}function h(a,b){var c=a.index;if(!s.isDefined(b[c]))return void(-1===a.indexOf(b)&&f(a,b));for(var d=a.length;a[--d]&&(a[d][c]>b[c]||!s.isDefined(a[d][c])););g(a,d+1,0,b)}function i(a,b,c){for(void 0===c&&(c=-1);++c<a.length;)(b===a[c]||b===a[c][a.index])&&(g(a,c,1),--c)}function j(a,b){var c=a.find(b);c?(r(c,b),a.trigger("update",c)):h(a,b)}function k(a,b,c){for(var d=c.length,e=-1;++e<d;)a.call(null,b,c[e])}function l(a){return function(){var b=arguments.length,c=a[b]||a["default"];return c?c.apply(this,arguments):(console.warn("Collection: method is not overloaded to accept "+b+" arguments."),this)}}function m(a){return p.prototype.isPrototypeOf(a)||q.prototype.isPrototypeOf(a)}function o(a){var b=a.length;return function(){for(var c;b-->a.length;)c=a[b],void 0!==c&&(delete a[b],a.trigger("remove",c,b));b=a.length}}function p(b,c){function d(a,b){return a[e.index]>b[e.index]?1:-1}if(void 0===this||this===a)return new p(b,c);void 0===b?b=[]:s.isDefined(b.length)||(c=b,b=[]);var e=this,f=r({},w,c);Object.defineProperties(e,{length:{value:0,writable:!0,configurable:!0},index:{value:f.index},sort:{value:function(a){return Array.prototype.sort.call(this,a||f.sort||d),this.trigger("sort")},writable:!0}});for(var g=-1;b[++g];)e[g]=b[g];e.length=b.length,t(e,"length",o(e))}function q(a,b,c){function e(b,c){var d=a.indexOf(b),e=a.indexOf(c);return d>e?1:-1}function f(c){var f=o.indexOf(c);if(n=!1,d(c,b,m)){if(-1===f){if(l.sort===e){for(var g,h,i=a.indexOf(c),k=i;k--&&(g=a[k],h=o.indexOf(g),!(h>-1&&i>h)););o.splice(h+1,0,c)}else o.add(c);o.on("add",j)}}else-1!==f&&o.remove(c);n=!0}function g(a,b){for(var c,d=m.length;d--;)c=m[d],t(b,c,f);f(b)}function h(a,b){for(var c,d=m.length;d--;)c=m[d],u(b,c,f);var e=o.indexOf(b);e>-1&&(n=!1,o.splice(e,1),n=!0)}function i(a){a.forEach(function(b){h(a,b)}),o.off("add",j).off("remove",k)}function j(b,c){n&&a.add(c)}function k(b,c){n&&a.remove(c)}var l=r({sort:e},c),m=Object.keys(b),n=!0,o=this;p.call(this,l),a.on("add",g).on("remove",h).on("destroy",i),a.length?a.forEach(function(b){g(a,b)}):o.on("add",j).on("remove",k),this.destroy=function(){i(a),a.off("add",g).off("remove",h).off("destroy",i),
o.off()},this.synchronise=function(){return a.forEach(f),this}}var r=Object.assign,s=a.Fn,t=a.observe,u=a.unobserve,v=a.mixin,w={index:"id"};r(p.prototype,v.events,{filter:Array.prototype.filter,map:Array.prototype.map,reduce:Array.prototype.reduce,concat:Array.prototype.concat,sort:Array.prototype.sort,slice:Array.prototype.slice,some:Array.prototype.some,indexOf:Array.prototype.indexOf,forEach:Array.prototype.forEach,each:function(){return Array.prototype.forEach.apply(this,arguments),this},add:l({0:b,"default":function(){return k(h,this,arguments),this}}),remove:l({0:function(){for(;this.length;)this.pop();return this},"default":function(){return k(i,this,arguments),this}}),push:function(){return k(f,this,arguments),this},pop:function(){var a=this[this.length-1];return--this.length,a},splice:function(){return Array.prototype.unshift.call(arguments,this),g.apply(this,arguments)},update:function(){return k(j,this,arguments),this},find:l({0:s.noop,1:function(a){if(this.indexOf(a)>-1)return a;var b=this.index;return"string"==typeof a||"number"==typeof a||void 0===a?c(this,a):c(this,a[b])}}),query:function(a){return a?e(this,a):[]},contains:function(a){return-1!==this.indexOf(a)},get:function(a){var b=this.length;if(0!==b){for(;--b;)if(this[b][a]!==this[b-1][a])return;return this[b][a]}},set:function(a,b){if(2!==arguments.length)throw new Error("Collection.set(property, value) requires 2 arguments. "+arguments.length+" given.");for(var c=this.length;c--;)this[c][a]=b;return this},toJSON:function(){return Array.prototype.slice.apply(this)},toObject:function(a){a=a||this.index;for(var b,c,d={};n--;)b=this[n][a],c=typeof b,"string"===c||"number"===c&&b>-(1/0)&&1/0>b?d[b]=this[n]:console.warn("Collection: toObject() "+typeof b+" "+b+" cannot be used as a key.");return d},sub:function(a,b){return new q(this,a,b)}}),r(q.prototype,p.prototype),p.add=h,p.remove=i,p.isCollection=m,a.Collection=p}(this),function(a){a.console&&a.console.log&&(console.log("Sparky"),console.log("https://labs.cruncher.ch/sparky"),console.log("_______________________________"))}(this),function(a){"use strict";function b(){return this}function c(){if(u.debug&&"errors"!==u.debug){var a=["Sparky:"];Array.prototype.push.apply(a,arguments),console.log.apply(console,a)}}function d(){if("verbose"===u.debug){var a=["Sparky:"];Array.prototype.push.apply(a,arguments),console.log.apply(console,a)}}function e(a){var b="string"==typeof a?document.querySelector(a):a;if(!b)throw new Error("Sparky: node cannot be found on Sparky(node) setup: "+a);return"template"===u.dom.tag(b)&&(b=u.template(b.id)),b}function f(a,b,c,d,e){if(!a.getAttribute)return e(b);var f=a.getAttribute("data-scope");if(!y(f))return e(b);w.lastIndex=0;var g=w.test(f);if(g)return void jQuery.get(f).then(function(a){e(a)});u.rtags.lastIndex=0;var h=u.rtags.exec(f);return h?f=h[2]:b=c,b&&f?d(b,f):e(b)}function g(a,b,c){return"string"==typeof b?j(b,c):"function"==typeof b?h([b]):"object"==typeof b?h(b):a.getAttribute&&j(a.getAttribute("data-fn"),c)}function h(a){return function(b,c){var d,e=a.length,f=-1,g=c;this.ctrls=a;var h=!1;for(this.interrupt=function(){return h=!0,a.slice(f+1)};++f<e;){if(d=a[f].call(this,b,g),h)return!1;void 0!==d&&(g=d)}return g}}function i(a,b){for(var c,d=[],e=a.length,f=-1;++f<e;){if(c=u.get(b,a[f]),!c)throw new Error('Sparky: data-fn "'+a[f]+'" not found in sparky.ctrl');d.push(c)}return h(d)}function j(a,b){if(y(a)){var c=a.trim().split(u.rspaces);return i(c,b)}}function k(a,b,c){var d=u.debug?u.dom.create("comment",u.dom.tag(a)):u.dom.create("text","");return u.dom.before(a,d),u.dom.remove(a),d}function l(a,b,c){var d=c.placeholders[b];u.dom.before(d,a),u.dom.remove(d)}function m(b,c){c?b.forEach(z):b.forEach(a.requestAnimationFrame),b.length=0}function n(a,b,c){for(var d,e,f,g=b.length;g--;)d=b[g][0],e=b[g][1],f=b[g][2],u.observePath(a,d,f,!c),c&&e(u.get(a,d))}function o(a,b){for(var c,d,e=b.length;e--;)c=b[e][0],d=b[e][2],u.unobservePath(a,c,d)}function p(a,b,c){var d,e,f=b.length;for(c&&c.length&&(b=b.filter(function(a){return c.indexOf(a[0])>-1}));f--;)d=b[f][0],e=b[f][2],
d?e(u.get(a,d)):e()}function q(a){a.setups.length=0,a.teardowns.forEach(z),a.teardowns.length=0;for(var b,c=a.bindings,d=c.length;d--;)b=c[d][2],b.cancel();a.bindings.length=0}function r(a){return a.placeholders?(a.forEach(l),a.placeholders=!1,void a.trigger("dom-add")):void(document.body.contains(a[0])&&a.trigger("dom-add"))}function s(a){a.placeholders||(a.placeholders=a.map(k),a.trigger("dom-remove"))}function t(a,b,c,d,e,f,g){b?g?c(a,g):d(a):g?e(a):f(a)}function u(a,b,c,d){function h(a){b!==(j||a)&&(b&&k&&o(b,k.bindings),b=j||a,b&&k&&(k.setups.length&&m(k.setups,v),n(b,k.bindings,v)),l.trigger("scope",b),t(l,b,r,B,s,C,v),v=!1)}function i(a,b){A(),A=function(){u.unobservePath(a,b,h)},u.observePath(a,b,h,!0)}if(!(this instanceof u))return new u(a,b,c,d);var j,k,l=this,v=!0,w=b;b=void 0;var y=d?d.data:u.data,z=d?d.fn:u.fn,A=x,B=Fn.Throttle(r),C=Fn.Throttle(s);if(a=e(a),!a)throw new Error("Sparky: Sparky(node) – node not found: "+a);return u.logVerbose("Sparky(",a,w,c&&(c.call?c.name:c),")"),c=g(a,c,z),Object.defineProperties(this,{data:{value:Object.create(y),writable:!0},fn:{value:Object.create(z)},placeholders:{writable:!0}}),this.scope=function(b){return f(a,b,d?d.data:u.data,i,h),this},Collection.call(this,11===a.nodeType?a.childNodes:[a]),f(a,w,d?d.data:u.data,function(a,b){j=u.get(a,b)},function(a){j=a}),c&&(j=c.call(l,a,j)),j===!1?(this.on("destroy",function(){u.dom.remove(this)}),this.scope(w),void(v=!1)):(j===w&&(j=void 0),this.render=function(){p(b,k.bindings,arguments),this.trigger.apply(this,["render"].concat(arguments))},this.on("destroy",function(){u.dom.remove(this),this.placeholders&&u.dom.remove(this.placeholders),A(),o(b,k.bindings),q(k)}),k=u.parse(l,function(a){return b&&u.get(b,a)},function(a,c){b&&u.set(b,a,c)}),k.nodes.forEach(function(a){return l.create(a,b)}),k.nodes.length=0,(w||j)&&this.scope(w||j),void(v=!1))}var v=Object.assign,w=/\/\S*\.json$/,x=Fn.noop,y=Fn.isDefined,z=(Fn.id,Fn.call);u.prototype=Object.create(Collection.prototype),v(u.prototype,{create:function(a,b,c){function d(){h.destroy()}function e(a,b){h.scope(b)}function f(a){h.render()}var g=this,h=u(a,b,c,this);return this.on("destroy",d).on("scope",e).on("render",f),h.on("destroy",function(){g.off("destroy",d).off("scope",e).off("render",f)})},destroy:function(){return this.trigger("destroy").off()},scope:b,render:b,interrupt:function(){return[]},tojQuery:function(){return a.jQuery?jQuery(this.filter(u.dom.isElementNode)):void 0}}),v(u,{debug:!1,log:c,logVerbose:d,"try":function(a,b){return function(){if(u.debug)try{return a.apply(this,arguments)}catch(c){throw new Error(b.apply(this,arguments))}return a.apply(this,arguments)}},svgNamespace:"http://www.w3.org/2000/svg",xlinkNamespace:"http://www.w3.org/1999/xlink",data:{},fn:{},template:function(a,b){return u.dom.template.apply(this,arguments)}}),a.Sparky=u}(this),function(a){"use strict";function b(a,b,c){this.node=a,this.get=b,this.set=c}function c(a){return a.getAttribute("class")}function d(a,b){a instanceof SVGElement?a.setAttribute("class",b):a.className=b}function e(a){return a.classList||new b(a,c,d)}function f(a,b){return window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue(b):0}function g(a,b){return a.matches?a.matches(b):a.matchesSelector?a.matchesSelector(b):a.webkitMatchesSelector?a.webkitMatchesSelector(b):a.mozMatchesSelector?a.mozMatchesSelector(b):a.msMatchesSelector?a.msMatchesSelector(b):a.oMatchesSelector?a.oMatchesSelector(b):a.tagName.toLowerCase()===b}function h(a,b,c){return a&&a!==c&&a!==document&&11!==a.nodeType?(a.correspondingUseElement&&(a=a.correspondingUseElement),g(a,b)?a:h(a.parentNode,b,c)):void 0}function i(a){return a.tagName.toLowerCase()}function j(a){if("comment"===a||"!"===a)return document.createComment(arguments[1]);if("text"===a)return document.createTextNode(arguments[1]);if("fragment"===a)return document.createDocumentFragment();var b=document.createElement(a);return b.innerHTML=arguments[1],b}function k(a,b){return a.appendChild(b),a}function l(a){for(;a.lastChild;)a.removeChild(a.lastChild)}function m(a){a.parentNode&&a.parentNode.removeChild(a);
}function n(a,b){a.parentNode&&a.parentNode.insertBefore(b,a)}function o(a,b){a.parentNode&&a.parentNode.insertBefore(b,a.nextSibling)}function p(a,b){return 1===arguments.length&&"string"==typeof a&&(b=a,a=document),J(a.querySelectorAll(b))}function q(a){return 1===a.nodeType}function r(a){return 3===a.nodeType}function s(a){return 8===a.nodeType}function t(a){return 11===a.nodeType}function u(a){var b=J(a.childNodes),c=document.createDocumentFragment();return K(b,k,c)}function v(a){return a.content||u(a)}function w(a){var b=document.getElementById(a);if(!b)throw new Error('dom: element id="'+a+'" is not in the DOM.');var c=L.tag(b);if("template"===c||"script"===c)return b.content?v(b):(m(b),u(b))}function x(a){var b=M[a]||(M[a]=w(a));return b&&b.cloneNode(!0)}function y(a){if("function"!=typeof a)throw new TypeError("multiline(fn) expects a function.");var b=N.exec(a.toString());if(!b)throw new TypeError("Multiline comment missing.");return b[1]}function z(a,b){if("function"==typeof b){var c=L.create("template");c.innerHTML=y(b),b=v(c)}M[a]=b}function A(a){return new CustomEvent(a,O)}function B(a,b){return function(c){var d=h(c.target,a,c.currentTarget);if(d)return c.delegateTarget=d,b(c)}}function C(a){return 1===a.which&&!a.ctrlKey&&!a.altKey}function D(a,b){a.dispatchEvent(A(b))}function E(a,b,c){a.addEventListener(b,c)}function F(a,b,c){a.removeEventListener(b,c)}function G(){return"content"in document.createElement("template")}function H(){var a=document.createElement("input"),b=!1;return k(document.body,a),a.disabled=!0,a.addEventListener("featuretest",function(a){b=!0}),a.dispatchEvent(P),L.remove(a),b}var I=Object.assign,J=Function.prototype.call.bind(Array.prototype.slice),K=Function.prototype.call.bind(Array.prototype.reduce),L={};b.prototype={add:function(){for(var b=arguments.length,c=this.get(this.node),d=c?c.trim().split(a.rspaces):[];b--;)-1===d.indexOf(arguments[b])&&d.push(arguments[b]);this.set(this.node,d.join(" "))},remove:function(){for(var b,c=arguments.length,d=this.get(this.node),e=d?d.trim().split(a.rspaces):[];c--;)b=e.indexOf(arguments[c]),-1!==b&&e.splice(b,1);this.set(this.node,e.join(" "))}},I(L,{query:p,tag:i,create:j,append:function(a,b){Node.prototype.isPrototypeOf(b)?k(a,b):Array.prototype.forEach.call(b,function(b){k(a,b)})},after:o,before:n,empty:l,remove:function(a){return Node.prototype.isPrototypeOf(a)?void m(a):void Array.prototype.forEach.call(a,m)},closest:h,matches:g,classes:e,style:f,getClass:c,setClass:d,isElementNode:q,isTextNode:r,isCommentNode:s,isFragmentNode:t});var M={},N=/\{\s*\/\*\s*([\s\S]*)\s*\*\/\s*\}$/;I(L,{template:function(a,b){return b?void z(a,b):x(a)},fragmentFromTemplate:x,fragmentFromContent:v});var O={bubbles:!0};I(L,{on:E,off:F,trigger:D,delegate:B,isPrimaryButton:C});var P=new CustomEvent("featuretest",{bubbles:!0});L.features={template:G(),inputEventsOnDisabled:H()},a.dom=L}(window.Sparky),function(a){"use strict";function b(a){return a instanceof Object}function c(a){return a.replace(y,"").split(z)}function d(a,b){var c=A.exec(b);return c?e(a,c[1],JSON.parse(c[2])):a[b]}function e(a,b,c){for(var d=-1;++d<a.length;)if(a[d]&&a[d][b]===c)return a[d]}function f(a,b){var c=b.shift(),e=d(a,c);return 0===b.length?e:x(e)?f(e,b):e}function g(a,c,d){var e=c[0];return c.length>1?g(b(a[e])?a[e]:a[e]={},c.slice(1),d):a[e]=d}function h(a,b,c,d,e){function f(){v.logVerbose("path resolved to value:",a[b]),d(a[b])}return v.observe(a,b,f,e),function(){v.unobserve(a,b,f)}}function i(a,b,c,d,f){function g(){l(),"object"!=typeof k&&"function"!=typeof k?(l=w,f&&d()):l=j(k,c.slice(),d,f)}function h(){var b=e(a,m[1],JSON.parse(m[2]));b!==k&&(k=o,g())}function i(){k=a[b],g()}var k,l=w,m=A.exec(b);if(m){if(!a.on)throw new Error("Sparky: Sparky.observe trying to observe with property selector on a non-collection.");return a.on("add remove sort",h),h(),f=!0,function(){l(),a.off("add remove sort",h)}}return v.observe(a,b,i,!0),f=!0,function(){l(),v.unobserve(a,b,i)}}function j(a,b,c,d){if(0===b.length)return w;var e=b.shift();return 0===b.length?h(a,e,b,c,d):i(a,e,b,c,d)}function k(a,b,d,e){
if("."===b)return void(e&&d(a));var f=c(b),g=j(a,f,d,e||!1);B.push([a,b,d,g])}function l(a,b,d){function e(c){k||x(c)&&(k=!0,d(c),setTimeout(function(){m(a,b,d)},0))}var g=c(b),h=f(a,g.slice());if(x(h))return void d(h);var i=j(a,g,e,!1),k=!1;B.push([a,b,d,i])}function m(a,b,c){var d,e=B.length;for("string"!=typeof b&&(c=b,b=void 0);e--;)d=B[e],a!==d[0]||b&&b!==d[1]||c&&c!==d[2]||(d[3](),B.splice(e,1))}function n(a,b){return a&&("."===b?a:f(a,c(b)))}function p(a,b,d){var e=c(b);return 1===e.length?a[b]=d:g(a,e,d)}function q(b){return a.AudioParam&&a.AudioParam.prototype.isPrototypeOf(b)}function r(b,c,d){function e(){var f=b[c];g!==f&&(g=f,d()),h&&a.requestAnimationFrame(e)}function f(){h=!1}var g=b[c],h=!0;return a.requestAnimationFrame(e),f}function s(a,b,c){return C.push([a,b,c,r(a,b,c)]),a}function t(a,b,c){for(var d,e=C.length;e--;)if(d=C[e],a===d[0]&&b===d[1]&&c===d[2])return d[3](),C.splice(e,1),a;return a}var u=a.Fn,v=a.Sparky,w=u.noop,x=u.isDefined,y=/^\[|\]$/g,z=/\]?(?:\.|\[)/g,A=/(\w+)\=(\w+)/,B=[];v.get=n,v.set=p,v.observePath=v["try"](k,function(a,b){return'Sparky: failed to observe path "'+b+'" in object '+JSON.stringify(a)}),v.unobservePath=m,v.observePathOnce=l;var C=[];v.observe=function(a,b,c,d){if(!a)throw new Error("Sparky: Sparky.observe requires an object!",a,b);if(q(a))return s(a,b,c);if("length"===b){var e=Object.getOwnPropertyDescriptor(a,b);if(!e.get&&!e.configurable)return console.warn&&console.warn("Sparky: Are you trying to observe an array?. Sparky is going to observe it by polling. You may want to use a Collection() to avoid this.",a,a instanceof Array),console.trace&&console.trace(),s(a,b,c)}observe(a,b,c),d&&c(a)},v.unobserve=function(a,b,c){if(q(a))return t(a,b,c);if("length"===b){var d=Object.getOwnPropertyDescriptor(a,b);if(!d.get&&!d.configurable)return t(a,b,c)}return unobserve(a,b,c)}}(this),function(a){function b(a){return a.toString().replace(/^function.+\{\s*\/\*\s*/,"").replace(/\s*\*\/\s*\}$/,"")}function c(a){return function(b,c){var d=a[c];return d instanceof Array?d.join(", "):void 0===d||null===d?"":d}}function d(a){return function(b,c,d){var e=a[c];if(void 0===e||null===e)throw new Error("Exception: attempting to build RegExp but obj['"+c+"'] is undefined.");return e=e.source.replace(/^\^|\$$/g,""),d?["(?:",e,")",d].join(""):e}}var e=a.Sparky;e.render=function(a,f){return"function"==typeof a?b(a).replace(e.rsimpletags,c(f)):a instanceof RegExp?RegExp(a.source.replace(/\{\{\s*(\w+)\s*\}\}(\{\d|\?|\*|\+)?/g,d(f)),(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")):a.replace(e.rsimpletags,c(f))}}(this),function(a){"use strict";function b(a,b,c){a.setAttribute(b,c)}function c(a,c,d){d?b(a,c,c):a.removeAttribute(c)}function d(a,b){var c=b.trim().split(U);a.add.apply(a,c)}function e(a,b){var c=b.trim().split(U);a.remove.apply(a,c)}function f(a,b,c,d,e,f,g,h){var i,j,k=a.getAttribute&&a.getAttribute("data-template");if(Z(k)){if(i=M.template(k),!i)return void M.log('template "'+k+'" not found in DOM.');j=_(i.childNodes),f(function(){M.dom.empty(a),M.dom.append(a,i)})}else j=_(a.childNodes);for(var l,c,m=-1,n=j.length;++m<n;)l=j[m],l.getAttribute&&(Z(l.getAttribute("data-fn"))||Z(l.getAttribute("data-scope")))?g(l):ba[l.nodeType]&&h.push.apply(h,ba[l.nodeType](l,b,c,d,e,f,g))}function g(a,b,c,f,g){var h=N.getClass(a);if(h){J.lastIndex=0;var i=[],j=h.replace(J,function(a){return i.push(a),""});if(i.length){N.setClass(a,j);var k=N.classes(a),l=function(a,b){b&&V.test(b)&&e(k,b),a&&V.test(a)&&d(k,a)};"verbose"===M.debug&&console.log('Sparky: bind class="'+h+" "+i.join(" ")+'"'),p(i.join(" "),b,c,f,l,g)}}}function h(a,b,c,d,e,f){for(var g=f.length;g--;)i(a,f[g],b,c,d,e)}function i(a,c,d,e,f,g){var h=(a instanceof SVGElement,a.getAttribute("data-"+c)),i=P[c]||c,j=h?h:a.getAttribute(i);if(j){h&&a.removeAttribute("data-"+c),"verbose"===M.debug&&console.log("Sparky: checking "+i+'="'+j+'"');var k=b.bind(this,a,i);p(j,d,e,f,k,g)}}function j(a,b,d,e,f,g){var h=a.getAttribute("data-"+b),i=b,j=h?h:a.getAttribute(i);if(j){h&&a.removeAttribute("data-"+b),"verbose"===M.debug&&console.log("Sparky: checking "+i+'="'+j+'"');
var k=c.bind(this,a,i);p(j,d,e,f,k,g)}}function k(a){var b=T.exec(a);return{name:b[1],fn:M.filters[b[1]],args:b[2]&&JSON.parse('["",'+b[2].replace(/\'/g,'"')+"]")||[]}}function l(a,b){for(var c,d=X[b]||(X[b]=b.split("|").map(k)),e=d.length,f=-1;++f<e;){if(!d[f].fn)throw new Error("Sparky: filter '"+d[f].name+"' does not exist in Sparky.filters");"filter"===M.debug&&console.log("Sparky: filter:",d[f].name,"value:",a,"args:",d[f].args),c=d[f].args,c[0]=a,a=d[f].fn.apply(M,c)}return a}function m(a,b,c){M.rtags.lastIndex=0,a.replace(M.rtags,function(a,d,e){var f;-1===b.indexOf(e)&&(2===d.length?(b.push(e),f=c.indexOf(e),-1!==f&&c.splice(f,1)):-1===c.indexOf(e)&&c.push(e))})}function n(a){return function(b,c,d,e){var f=a(d),g=e?l(f,e):f;return Z(g)?"string"==typeof g?g:"number"==typeof g?g:"boolean"==typeof g?g:"function"==typeof g?(g.name||"function")+(W.exec(g.toString())||[])[1]:$(g):""}}function o(a,b,c){var d,e=n(b);return function(){M.rtags.lastIndex=0;var b=a.replace(M.rtags,e);c(b,d),d=b}}function p(b,c,d,e,f,g){var h=[],i=[];if(m(b,h,i),0!==h.length||0!==i.length){var j=o(b,e,f);h.length?g.push(q(c,d,j,h)):a.requestAnimationFrame(function(){j()})}}function q(a,b,c,d){return d.forEach(function(b){a(b,c)}),function(){d.forEach(function(a){b(a,c)})}}function r(a){var b=parseFloat(a);return Number.isNaN(b)?void 0:b}function s(a){var b=parseFloat(a);return Number.isNaN(b)?void 0:Math.round(b)}function t(a){return"false"===a?!1:"0"===a?!1:""===a?!1:!!a}function u(a){return"on"===a}function v(a){return Z(a)?a+"":void 0}function w(a){return"number"==typeof a?a+"":void 0}function x(a){return"number"==typeof a&&a%1===0?a+"":void 0}function y(a){return"boolean"==typeof a?a+"":"number"==typeof a?!!a+"":void 0}function z(a){return"boolean"==typeof a||"number"==typeof a?a?"on":"":void 0}function A(a){!N.features.inputEventsOnDisabled&&a.disabled?(a.disabled=!1,setTimeout(function(){M.dom.trigger(a,"valuechange"),a.disabled=!0},0)):M.dom.trigger(a,"valuechange")}function B(a,b,c,d,e){var f=a.type,g=!0;return"radio"===f||"checkbox"===f?function(){var c,f=e(b(d));return g&&(g=!1,!Z(f)&&a.checked)?void A(a):(c=a.value===f,void(a.checked!==c&&(a.checked=c,A(a))))}:function(){var c=e(b(d));if(g&&(g=!1,!Z(c)))return void A(a);if("string"==typeof c){if(a.value===c)return;a.value=c}else a.value="";A(a)}}function C(a,b,c,d){var e=a.type;return"radio"===e?function(e){a.checked&&b(c,d(a.value))}:"checkbox"===e?function(e){b(c,d(a.checked?a.value:void 0))}:function(e){b(c,d(a.value))}}function D(b,c,d,e,f,g,h,i){var j=(b.getAttribute("value"),B(b,c,d,g,h)),k=C(b,d,g,i);b.addEventListener("change",k),b.addEventListener("input",k);var l=a.requestAnimationFrame(function(){l=!1,Z(c(g))||k()});return e(g,j),function(){b.removeEventListener("change",k),b.removeEventListener("input",k),l&&a.cancelAnimationFrame(l),f(g,j)}}function E(a,b,c){var d={setups:[],bindings:[],nodes:[]};return d.teardowns=Array.prototype.concat.apply([],a.map(function(a){return ba[a.nodeType](a,function(a,b){d.bindings.push([a,b,L.Throttle(b)])},function(a){for(var b=d.bindings,c=b.length;c--;)if(b[c][1]===a)return void b.splice(c,1)},b,c,function(a){d.setups.push(a)},function(a){d.nodes.push(a)})})),d}function F(a,b,c,d,e,f,g){a.name;if("verbose"===M.debug&&!a.name)return void console.warn("Sparky: Cannot bind value of node with empty name.",a);var h,i;for(M.rtags.lastIndex=0;h=M.rtags.exec(a.name);)if(2===h[1].length){i=D(a,b,c,d,e,h[2],f,g),a.name=a.name.replace(h[0],h[2]);break}return i}function G(a,b){H=M.render(Q,arguments),I=M.render(R,arguments),J=M.render(S,arguments)}var H,I,J,K=Object.assign,L=a.Fn,M=a.Sparky,N=M.dom,O=["href","title","id","style","src","alt"],P={viewbox:"viewBox"},Q=/({{0}})\s*([\w\-\.]+)\s*(?:\|([^\}]+))?\s*{{1}}/g,R=/{{0}}\s*([\w\-\.\[\]]+)\s*{{1}}/g,S=/[^\s]*{{0}}[^\}]+{{1}}[^\s]*/g,T=/\s*([a-zA-Z0-9_\-]+)\s*(?:\:(.+))?/,U=/\s+/,V=/\S/,W=/function(?:\s+\w+)?\s*(\([\w\,\s]*\))/,X={},Y=(L.noop,L.id),Z=(L.call,L.isDefined),$=L.classOf,_=Function.prototype.call.bind(Array.prototype.slice),aa={label:function(a,b,c,d,e,g,h,j){i(a,"for",b,c,d,j),f(a,b,c,d,e,g,h,j);
},button:function(a,b,c,d,e,g,h,i){j(a,"disabled",b,c,d,i),f(a,b,c,d,e,g,h,i)},input:function(a,b,c,d,e,f,g,h){var k=a.type;i(a,"value",b,c,d,h),i(a,"min",b,c,d,h),i(a,"max",b,c,d,h),j(a,"disabled",b,c,d,h);var l="number"===k||"range"===k?F(a,d,e,b,c,w,r):"checkbox"!==k&&"radio"!==k||Z(a.getAttribute("value"))?F(a,d,e,b,c,Y,Y):F(a,d,e,b,c,z,u);l&&h.push(l),i(a,"name",b,c,d,h)},select:function(a,b,c,d,e,g,h,k){i(a,"value",b,c,d,k),j(a,"disabled",b,c,d,k),f(a,b,c,d,e,g,h,k);var l=F(a,d,e,b,c,Y,Y);l&&k.push(l),i(a,"name",b,c,d,k)},option:function(a,b,c,d,e,g,h,k){i(a,"value",b,c,d,k),j(a,"disabled",b,c,d,k),f(a,b,c,d,e,g,h,k)},textarea:function(a,b,c,d,e,f,g,h){j(a,"disabled",b,c,d,h);var k=F(a,d,e,b,c,Y,Y);k&&h.push(k),i(a,"name",b,c,d,h)},time:function(a,b,c,d,e,g,i,j){h(a,b,c,d,j,["datetime"]),f(a,b,c,d,e,g,i,j)},svg:function(a,b,c,d,e,g,i,j){h(a,b,c,d,j,["viewbox"]),f(a,b,c,d,e,g,i,j)},g:function(a,b,c,d,e,g,i,j){h(a,b,c,d,j,["transform"]),f(a,b,c,d,e,g,i,j)},path:function(a,b,c,d,e,f,g,i){h(a,b,c,d,i,["d","transform"])},line:function(a,b,c,d,e,f,g,i){h(a,b,c,d,i,["x1","x2","y1","y2","transform"])},rect:function(a,b,c,d,e,f,g,i){h(a,b,c,d,i,["x","y","width","height","rx","ry","transform"])},text:function(a,b,c,d,e,g,i,j){h(a,b,c,d,j,["x","y","dx","dy","text-anchor"]),f(a,b,c,d,e,g,i,j)},use:function(a,b,c,d,e,f,g,i){h(a,b,c,d,i,["href","transform"])},template:M.noop,script:M.noop},ba={1:function(a,b,c,d,e,i,j){var k=[],l=a.tagName.toLowerCase();return"verbose"===M.debug&&console.group("Sparky: dom node: ",a),g(a,b,c,d,k),h(a,b,c,d,k,O),aa[l]?aa[l](a,b,c,d,e,i,j,k):f(a,b,c,d,e,i,j,k),"verbose"===M.debug&&console.groupEnd(),k},3:function(a,b,c,d,e,f,g){var h=[];return"verbose"===M.debug&&console.group("Sparky: text node:",a),p(a.nodeValue,b,c,d,function(b){a.nodeValue=b},h),"verbose"===M.debug&&console.groupEnd(),h},11:function(a,b,c,d,e,g,h){var i=[];return"verbose"===M.debug&&console.group("Sparky: fragment: ",a),f(a,b,c,d,e,g,h,i),"verbose"===M.debug&&console.groupEnd(),i}};Object.defineProperties(M,{rtags:{get:function(){return H},enumerable:!0},rsimpletags:{get:function(){return I},enumerable:!0}}),G(/\{{2,3}/,/\}{2,3}/),K(M,{parse:E,parseName:F,attributes:O,stringToInt:s,stringToFloat:r,stringToBool:t,stringOnToBool:u,definedToString:v,intToString:x,floatToString:w,boolToString:y,boolToStringOn:z,tags:G,rspaces:U})}(this),function(a){var b=a.Sparky;b.fn.ignore=function(){this.interrupt()}}(this),function(a){var b=a.Sparky;b.fn.log=function(a){function b(a,b){console.group("scope change"),console.log("node ",a),console.log("scope",b),console.log("data",c.data),console.log("fn",c.fn),console.groupEnd()}var c=this;this.on("scope",b),console.group("initialisation"),console.log("node ",a),console.groupEnd()}}(this),function(a){"use strict";var b=Object.assign,c=a.Sparky,d=c.dom;b(c.fn,{"remove-hidden":function(b){this.on("scope",function(){a.requestAnimationFrame(function(){d.classes(b).remove("hidden")})})}})}(this),function(a){"use strict";var b=Object.assign,c=a.Sparky;b(c.fn,{html:function(a){this.on("scope",function(b,c){a.innerHTML=c})}})}(this),function(){"use strict";function a(a){a.preventDefault()}Sparky.scope=function(a){return console.warn("Sparky: Sparky.scope() deprecated in favour of Sparky.getScope()"),Sparky.getScope(a)},Sparky.setScope=function(a,b){if(!window.jQuery)throw new Error('data-fn="store-scope" requires jQuery.');window.jQuery&&jQuery.data(a,"scope",b)},Sparky.getScope=function(a){if(!window.jQuery)throw new Error('data-fn="store-scope" requires jQuery.');return jQuery.data(a,"scope")},Object.assign(Sparky.fn,{"prevent-click":function(b){b.addEventListener("click",a),this.on("destroy",function(){b.removeEventListener("click",a)})},"prevent-submit":function(b){b.addEventListener("submit",a),this.on("destroy",function(){b.removeEventListener("submit",a)})},scope:function(a){this.on("scope",function(b,c){Sparky.setScope(a,c)})}})}(),function(){"use strict";Sparky.dom;Sparky.fn["x-scroll-slave"]=function(a){function b(){a.scrollLeft=c.scrollLeft}var c,d=a.getAttribute("data-x-scroll-master");this.on("dom-add",function(){
if(c=document.getElementById(d),!c)throw console.error(a),new Error('Sparky scroll-x-slave: id="'+d+'" not in the DOM.');c.addEventListener("scroll",b),b()}).on("destroy",function(){c&&c.removeEventListener("scroll",b)})},Sparky.fn["y-scroll-slave"]=function(a){function b(){a.scrollTop=d.scrollTop}var c=a.getAttribute("data-y-scroll-master"),d=document.getElementById(c);if(!d)throw console.error(a),new Error('Sparky scroll-x-slave: id="'+c+'" not in the DOM.');d.addEventListener("scroll",b),b(),this.on("destroy",function(){d.removeEventListener("scroll",b)})}}(),function(a){"use strict";function b(a,b,c,d){function f(){h.destroy()}function g(a){h.render()}var h=e(b,c,d,this);return a.on("destroy",f).on("render",g),h.on("destroy",function(){a.off("destroy",f).off("render",g)})}function c(a){if(!e.debug)return f.create("text","");var b=a.getAttribute("data-scope"),c=a.getAttribute("data-fn");return f.create("comment",(b?' data-scope="'+b+'"':"")+(c?' data-fn="'+c+'" ':""))}var d=(Object.assign,a.Fn),e=a.Sparky,f=e.dom,g=12e3;d.call;e.fn.each=function(h){function i(){clearTimeout(n),n=setTimeout(function(){s.forEach(function(a){r.get(a).destroy(),r["delete"](a)})},g)}function j(a){var b=s.indexOf(a);-1!==b&&s.splice(b,1)}function k(){m.on?(m.on("add remove sort",w),w()):e.observe(m,"length",w)}function l(){m.on?m.off("add remove sort",w):e.unobserve(m,"length",w)}var m,n,o=this,p=[],q=[],r=new Map,s=[],t=h.cloneNode(!0),u=this.interrupt(),v=c(h),w=d.Throttle(function(){var c,d,g,h=-1,k=q.length,l={};for(e.debug&&(g=a.performance.now());k--;)d=q[k],c=m.indexOf(d),-1===c?(f.remove(p[k][0]),r.set(d,p[k]),s.push(d)):l[c]=p[k];for(k=p.length=q.length=m.length;q[++h]&&q[h]===m[h];);for(--h;++h<k;)d=q[h]=m[h],j(d),p[h]=l[h]||r.get(d)||b(o,t.cloneNode(!0),d,u),f.before(v,p[h][0]);e.log("collection rendered (length: "+m.length+", time: "+(a.performance.now()-g)+"ms)"),i()});t.removeAttribute("data-scope"),t.removeAttribute("data-fn"),f.before(h,v),f.remove(h),this.on("scope",function(a,b){this===a&&b!==m&&(m&&l(),m=b,void 0!==b&&k())}).on("destroy",function(){w.cancel(),l()})}}(this),function(a){"use strict";function b(){}function c(a,b,c){return(a-b)/(c-b)}function d(a,b,c){return a*(c-b)+b}function e(a,c,d,e){var f,g,h,i=s.parseName(c,function(a){return s.get(f,a)},function(a,b){return f&&s.set(f,a,b)},function(a,b){g=a,h=b},b,d,e);a.on("scope",function(a,b){f&&s.unobservePath(f,g,h),f=b,f&&s.observePath(f,g,h,!0)}).on("destroy",function(){i(),f&&s.unobservePath(f,g,h)})}function f(a){e(this,a,x,r.id)}function g(a){e(this,a,r.id,r.id)}function h(a){e(this,a,y,u)}function i(a){e(this,a,y,t)}function j(a){"checkbox"!==a.type||r.isDefined(a.getAttribute("value"))?e(this,a,z,v):e(this,a,A,w)}function k(a){function b(b){if(void 0===b)return"";d=b;var c=d.indexOf(a.value);return c>-1?a.value:""}function c(b){if(void 0===d&&(d=Collection()),void 0===b){var c=d.indexOf(a.value);-1!==c&&d.splice(c,1)}else-1===d.indexOf(b)&&d.push(b);return d}var d;e(this,a,b,c)}function l(a){function b(b){if(void 0===b)return"";var c=t(a.value);d=b;var e=d.indexOf(c);return e>-1?y(c):""}function c(b){if(void 0===d&&(d=Collection()),void 0===b){var c=d.indexOf(t(a.value));-1!==c&&d.splice(c,1)}else-1===d.indexOf(b)&&d.push(b);return d}var d;e(this,a,b,r.compose(c,t))}function m(a,b){function f(){i=a.min?parseFloat(a.min):0,j=a.max?parseFloat(a.max):1}function g(a){return"number"!=typeof a?"":(f(),d(Math.pow(c(a,i,j),.5),i,j)+"")}function h(a){var b=parseFloat(a);if(!Number.isNaN(b))return f(),d(Math.pow(c(b,i,j),2),i,j)}var i,j;e(this,a,g,h)}function n(a,b){function f(){i=a.min?parseFloat(a.min):0,j=a.max?parseFloat(a.max):1}function g(a){return"number"!=typeof a?"":(f(),d(Math.pow(c(a,i,j),1/3),i,j)+"")}function h(a){var b=parseFloat(a);if(!Number.isNaN(b))return f(),d(Math.pow(c(b,i,j),3),i,j)}var i,j;e(this,a,g,h)}function o(a,b){function f(){return i=a.min?parseFloat(a.min):1,j=a.max?parseFloat(a.max):10,0>=i?void console.warn('Sparky.fn["value-float-log"] cannot accept a min attribute of 0 or lower.',a):void 0}function g(a){return"number"!=typeof a?"":(f(),
d(Math.log(a/i)/Math.log(j/i),i,j)+"")}function h(a){var b=parseFloat(a);if(!Number.isNaN(b))return f(),i*Math.pow(j/i,c(b,i,j))}var i,j;e(this,a,g,h)}function p(a,b){function f(){return i=a.min?parseFloat(a.min):1,j=a.max?parseFloat(a.max):10,0>=i?void console.warn('Sparky.fn["value-int-log"] cannot accept a min attribute of 0 or lower.',a):void 0}function g(a){return"number"!=typeof a?"":(f(),d(Math.log(Math.round(a)/i)/Math.log(j/i),i,j)+"")}function h(a){var b=parseFloat(a);if(!Number.isNaN(b))return f(),Math.round(i*Math.pow(j/i,c(b,i,j)))}var i,j;e(this,a,g,h)}var q=Object.assign,r=a.Fn,s=a.Sparky,t=(s.parseName,s.stringToInt),u=s.stringToFloat,v=s.stringToBool,w=s.stringOnToBool,x=s.definedToString,y=(s.intToString,s.floatToString),z=s.boolToString,A=s.boolToStringOn;q(s.fn,{"value-any":f,"value-string":g,"value-int":i,"value-float":h,"value-boolean":j,"value-int-log":p,"value-float-log":o,"value-float-pow-2":m,"value-float-pow-3":n,"value-in-array":k,"value-int-in-array":l})}(this),function(a){"use strict";function b(a){for(var b=[],c=0;c++<31;)b[c]=a[c]||a.n;return b}function c(a){for(var b="";a--;)b+=" ";return b}var d=a.Fn,e=a.Sparky,f=d.isDefined,g=e.settings=e.settings||{},h=[];g.en={days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),months:"January February March April May June July August September October November December".split(" "),ordinals:b({n:"th",1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"})},g.fr={days:"dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),months:"janvier février mars avril mai juin juillet août septembre octobre novembre décembre".split(" "),ordinals:b({n:"ième",1:"er"})},g.de={days:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),months:"Januar Februar März April Mai Juni Juli Oktober September Oktober November Dezember".split(" "),ordinals:b({n:"er"})},g.it={days:"domenica lunedì martedì mercoledì giovedì venerdì sabato".split(" "),months:"gennaio febbraio marzo aprile maggio giugno luglio agosto settembre ottobre novembre dicembre".split(" "),ordinals:b({n:"o"})};var i=document.documentElement.lang;g.lang=i&&g[i]?i:"en",e.filters={add:function(a,b){var c=parseFloat(a)+b;if(!Number.isNaN(c))return c},capfirst:function(a){return a.charAt(0).toUpperCase()+a.substring(1)},cut:function(a,b){return e.filters.replace(a,b,"")},date:function(a){function b(a){var b=new Date(a),c=b.toJSON(),d=c.slice(0,a.length)===a&&!c.slice(a.length).match(e);return"string"!=typeof a?new Date(a):d?new Date(+b+6e4*b.getTimezoneOffset()):b}var c={a:function(a){return a.getHours()<12?"a.m.":"p.m."},A:function(a){return a.getHours()<12?"AM":"PM"},b:function(b,c){return a[c].months[b.getMonth()].toLowerCase().slice(0,3)},c:function(a){return a.toISOString()},d:function(a){return a.getDate()},D:function(b,c){return a[c].days[b.getDay()].slice(0,3)},F:function(b,c){return a[c].months[b.getMonth()]},g:function(a){return a.getHours()%12},G:function(a){return a.getHours()},h:function(a){return("0"+a.getHours()%12).slice(-2)},H:function(a){return("0"+a.getHours()).slice(-2)},i:function(a){return("0"+a.getMinutes()).slice(-2)},j:function(a){return a.getDate()},l:function(b,c){return a[c].days[b.getDay()]},m:function(a){return("0"+a.getMonth()).slice(-2)},M:function(b,c){return a[c].months[b.getMonth()].slice(0,3)},n:function(a){return a.getMonth()},O:function(a){return(a.getTimezoneOffset()<0?"+":"-")+("0"+Math.round(100*Math.abs(a.getTimezoneOffset())/60)).slice(-4)},r:function(a){return a.toISOString()},s:function(a){return("0"+a.getSeconds()).slice(-2)},S:function(b){return a.ordinals[b.getDate()]},U:function(a){return+a},w:function(a){return a.getDay()},y:function(a){return("0"+a.getFullYear()%100).slice(-2)},Y:function(a){return a.getFullYear()},Z:function(a){return 60*-a.getTimezoneOffset()}},d=/([a-zA-Z])/g,e=/[1-9]/;return function(e,f,g){if(e){var h=e instanceof Date?e:b(e);return g=g||a.lang,f.replace(d,function(a,b){return c[b](h,g)})}}}(g),decibels:function(a){return"number"==typeof a?20*Math.log10(a):void 0},decimals:function(a,b){return"number"==typeof a?Number.prototype.toFixed.call(a,b):void 0;
},divide:function(a,b){return"number"==typeof a?a/b:void 0},escape:function(){var a=document.createElement("pre"),b=document.createTextNode("");return a.appendChild(b),function(c){return b.textContent=c,a.innerHTML}}(),"find-in":function(a,b){if(f(a)){var c=e.get(e.data,b);return c&&c.find(a)}},first:function(a){return a[0]},floatformat:function(a,b){return"number"==typeof a?Number.prototype.toFixed.call(a,b):f(a)?e.debug&&console.warn("Sparky: filter floatformat: "+b+" called on non-number "+a):""},floor:function(a){return Math.floor(a)},get:function(a,b){return a?a[b]:void 0},"greater-than":function(a,b,c,d){return a>b?c:d},contains:function(a,b){return a&&a.indexOf(b)>-1},invert:function(a){return"boolean"==typeof a?!a:"number"==typeof a?1/a:!a},is:function(a,b,c,d){return(a===b?c:d)||""},join:function(a,b){return Array.prototype.join.call(a,b)},json:function(a){return JSON.stringify(a)},last:function(a){return a[a.length-1]},length:function(a){return a.length},"less-than":function(a,b,c,d){return b>a?c:d},lower:function(a){String.prototype.toLowerCase.apply(a)},lowercase:function(a){return"string"==typeof a?String.prototype.toLowerCase.apply(a):void 0},map:function(a,b){return a&&a.map(d.get(b))},mod:function(a,b){return"number"==typeof a?a%b:void 0},multiply:function(a,b){return a*b},parseint:function(a){return parseInt(a,10)},percent:function(a){return 100*a},pluralize:function(a,b,c,d){return"number"==typeof a?(b=b||"",c=c||"s","fr"===d?2>a&&a>=0?b:c:1===a?b:c):void 0},postpad:function(a,b){var d=f(a)?a.toString():"",e=d.length,g=parseInt(b,10);return g===e?a:g>e?d+c(g-e):d.substring(0,g)},prepad:function(a,b,c){var d=f(a)?a.toString():"",e=d.length;return 1>b-e?a:(h.length=0,h.length=b-e,h.push(d),h.join(c||" "))},random:function(a){return a[Math.floor(Math.random()*a.length)]},reduce:function(a){return function(b,c,d){return b&&b.reduce(a[c],d||0)}}({sum:function(a,b){return a+b}}),replace:function(a,b,c){return"string"==typeof a?a.replace(RegExp(b,"g"),c):void 0},round:function(a){return"number"==typeof a?Math.round(a):void 0},slice:function(a,b,c){return"string"==typeof a?a.slice(b,c):Array.prototype.slice.call(a,b,c)},slugify:function(a){return"string"==typeof a?a.trim().toLowerCase().replace(/\W/g,"-").replace(/[_]/g,"-"):void 0},striptags:function(){var a=/<(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(b){return b.replace(a,"")}}(),"switch":function(a){return"string"==typeof a&&(a=parseInt(a,10)),"number"!=typeof a||Number.isNaN(a)?void 0:arguments[a+1]},symbolise:function(a){var b=a+"",c=1/0+"";return b===c?"∞":b==="-"+c?"-∞":a},time:function(){},truncatechars:function(a,b){return a.length>b?a.slice(0,b)+"…":a},type:function(a){return typeof a},uppercase:function(a){return"string"==typeof a?String.prototype.toUpperCase.apply(a):void 0},yesno:function(a,b,c){return a?b:c}}}(this),Sparky.debug=!1;