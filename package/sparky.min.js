Object.assign||function(a){"use strict";function b(a){return void 0!==a&&null!==a}function c(b){var c,d,e,f=a.keys(b);if(a.getOwnPropertySymbols)for(c=a.getOwnPropertySymbols(b),d=c.length;d--;)e=a.getOwnPropertyDescriptor(b,c[d]),e.enumerable&&f.push(symbol);return f}a.defineProperty(a,"assign",{value:function(d){if(!b(d))throw new TypeError("Object.assign: First argument "+d+" cannot be converted to object.");var e,f,g,h,i,j=a(d);for(e=1;e<arguments.length;e++)if(f=arguments[e],b(f))for(g=c(a(f)),i=g.length;i--;)h=g[i],j[h]=f[h];return j},configurable:!0,writable:!0})}(Object),Number.isNaN||(window.console&&console.log("Polyfill: Number.isNaN()"),function(a){"use strict";Object.defineProperty(Number,"isNaN",{value:function(b){return"number"==typeof b&&a(b)},configurable:!0,enumerable:!1,writable:!0})}(isNaN)),Math.log10||(window.console&&console.log("Polyfill: Math.log10()"),Math.log10=function(a){return Math.log(a)/Math.LN10}),function(a){for(var b=40,c=["ms","moz","webkit","o"],d=c.length;d--&&!a.requestAnimationFrame;)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.console&&console.log("Polyfill: requestAnimationFrame()"),a.requestAnimationFrame=function(c,d){var e=+new Date,f=b-e%b,g=a.setTimeout(function(){c(f)},f);return g}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}(window),function(a){a.console&&a.console.log&&console.log("Fn     – https://github.com/stephband/fn")}(this),function(a){"use strict";function b(a,b,c,d){d.toString=function(){return/function\s*[\w\d]*\s*\([,\w\d\s]*\)/.exec(c.toString())+" { ["+a+"] }"},N&&Object.defineProperty(d,"length",{value:b})}function c(){}function d(a){return a}function e(a){return a()}function f(a,b){return b(a)}function g(a,b){var c=[null];return c.push.apply(c,a),b.bind.apply(b,c)}function h(a,b){return function(c){return a(b(c))}}function i(){var a=arguments;return function(b){return G.reduce.call(a,f,b)}}function j(a){function c(b){if(1!==arguments.length)throw new Error("Fn: Cached function called with "+arguments.length+" arguments. Accepts exactly 1.");if(d.has(b))return d.get(b);var c=a(b);return d.set(b,c),c}var d=new Map;return K&&b("cached function",1,a,c),c}function k(a,c){if(c=c||a.length,2>c)return a;var d=function(){var b=arguments;return b.length>=c?a.apply(this,b):k(function(c){var d=G.slice.apply(b);return G.push.apply(d,arguments),a.apply(this,d)},c-b.length)};return K&&b("curried function",c,a,d),d}function l(a,c){function d(){return arguments.length>1?e(arguments[0]).apply(null,G.slice.call(arguments,1)):e(arguments[0])}if(c=c||a.length,2>c)return j(a);var e=j(function(b){return l(function(){var c=[b];return G.push.apply(c,arguments),a.apply(null,c)},c-1)});return K&&b("cached and curried function",c,a,d),d}function m(a){return function(){var b=arguments.length,c=a[b]||a["default"];return c?c.apply(this,arguments):(console.warn("Fn: method overload for "+b+" arguments not available"),this)}}function n(a){return function(){var b=Array.prototype.map.call(arguments,toType),c=a[b]||a["default"];return c?c.apply(this,arguments):void console.warn("Fn: method overload for type ("+b+") not available")}}function o(a,b,c){for(var d=a.length;d--&&b(a[d],c)>0;);a.splice(++d,0,c)}function p(a){for(var b;a.length;)if(b=G.shift.apply(a),void 0!==b)return b}function q(a,b){return a===b?0:a>b?1:-1}function r(a){return a instanceof Object}function s(a){return a.replace(P,"").split(Q)}function t(a,b){var c=R.exec(b);return c?u(a,c[1],JSON.parse(c[2])):A.get(b,a)}function u(a,b,c){for(var d=-1;++d<a.length;)if(a[d]&&a[d][b]===c)return a[d]}function v(a,b){var c=b.shift(),d=t(a,c);return 0===b.length?d:A.isDefined(d)?v(d,b):d}function w(a,b,c){var d=b.shift();if(0===b.length)return A.set(d,c,a),c;var e=A.get(d,a);return r(e)||(e={}),A.set(d,e,a),w(e,b,c)}function x(a){function b(){c=!1,d=U(),e.forEach(A.run([U()])),e.length=0}var c=!1,d=0,e=[];return function(f){if(c)return void e.push(f);var g=U();return d+a>g?(e.push(f),
void(c=setTimeout(b,a+d-g))):(d=g,void f(d))}}function y(a,b){function d(){g=!1,a.apply(h,i)}function e(){k=c,g&&d(),a=c}function f(){h=this,i=arguments,k()}var g,h,i,j=b?x(1e3*b):T,k=function(){g||(g=!0,j(d))};return f.cancel=e,f}function z(a,b){function d(){a.apply(h,i)}function e(){j=c,clearTimeout(g)}function f(){h=this,i=arguments,j()}var g,h,i,j=function(){clearTimeout(g),g=setTimeout(d,1e3*(b||0))};return f.cancel=e,f}function A(a){if(!this||!A.prototype.isPrototypeOf(this))return new A(a);var b,d=this;return a?"function"==typeof a?void(this.shift=a):"function"==typeof a.shift&&void 0===a.length?void(this.shift=function(){if("done"!==d.status){var b=a.shift();return"done"===a.status&&(d.status="done"),b}}):"function"==typeof a.next?void(this.shift=function(){if("done"!==d.status){var b=a.next();return b.done&&(d.status="done"),b.value}}):"Arguments"===A.toClass(a)?void(this.shift=function(){if("done"!==d.status){var b=p(a);return void 0===b&&(d.status="done"),b}}):(b=G.slice.apply(a),void(this.shift=function(){return"done"!==d.status?b.shift():void 0})):void(this.shift=c)}function B(a,b){var c=Object.create(a);return c.shift=b,c}function C(a,b,c){if(!C.prototype.isPrototypeOf(this))return new C(a,b,c);var d=this;this.shift=a,b&&(this.push=function(){b.apply(d,arguments),E("push",d)}),c&&(d.stop=c),d[V]={}}function D(a){for(var b,c;void 0!==(c=a.shift());)b=c;return b}function E(a,b){var c=b[V];c&&c[a]&&c[a].forEach(e)}function F(a,b){var c=a.create||A.noop,d=a.reset||A.noop,e=a.isIdle,f=[];return O.push(function(){var b=f.length,c=f.filter(e).length;return{name:a.name,total:b,active:b-c,idle:c}}),function(){var a=f.find(e);return a||(a=Object.create(b||null),c.apply(a,arguments),f.push(a)),d.apply(a,arguments),a}}var G=Array.prototype,H=Number.prototype,I=Object.prototype,J=String.prototype,K=!0,L=Object.freeze(Object.defineProperties([],{shift:{value:c}})),M=360/(2*Math.PI),N=function(){var a=function(){};try{Object.defineProperty(a,"length",{value:2})}catch(b){return!1}return 2===a.length}(),O=[],P=/^\[|\]$/g,Q=/\]?(?:\.|\[)/g,R=/(\w+)=(\w+)/,S={url:/^(?:\/|https?:\/\/)(?:[!#$&-;=?-~\[\]\w]|%[0-9a-fA-F]{2})+$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,date:/^\d{4}-(?:0[1-9]|1[012])-(?:0[1-9]|[12][0-9]|3[01])$/,hexColor:/^(#)?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,hslColor:/^(?:(hsl)(\())?\s?(\d{1,3}(?:\.\d+)?)\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?(\))?$/,rgbColor:/^(?:(rgb)(\())?\s?(\d{1,3})\s?,\s?(\d{1,3})\s?,\s?(\d{1,3})\s?(\))?$/,hslaColor:/^(?:(hsla)(\())?\s?(\d{1,3}(?:\.\d+)?)\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?,\s?([01](?:\.\d+)?)\s?(\))?$/,rgbaColor:/^(?:(rgba)(\())?\s?(\d{1,3})\s?,\s?(\d{1,3})\s?,\s?(\d{1,3})\s?,\s?([01](?:\.\d+)?)\s?(\))?$/,cssValue:/^(\-?\d+(?:\.\d+)?)(px|%|em|ex|pt|in|cm|mm|pt|pc)?$/,cssAngle:/^(\-?\d+(?:\.\d+)?)(deg)?$/,image:/(?:\.png|\.gif|\.jpeg|\.jpg)$/,"float":/^(\-?\d+(?:\.\d+)?)$/,"int":/^(\-?\d+)$/},T=a.requestAnimationFrame,U=a.performance&&a.performance.now?function(){return a.performance.now()}:function(){return+new Date};Object.assign(A.prototype,{of:function(){return this.constructor.of.apply(this.constructor,arguments)},process:function(a){return a(this)},ap:function(a){var b=this.shift();
if(void 0!==b)return a.map(b)},map:function(a){return B(this,A.compose(function(b){return void 0===b?void 0:a(b)},this.shift))},filter:function(a){var b=this;return B(this,function(){for(var c;void 0!==(c=b.shift())&&!a(c););return c})},syphon:function(a){var b=this.shift,c=[],d=[];return this.shift=function(){if(c.length)return c.shift();for(var e;void 0!==(e=b())&&a(e);)d.push(e);return e},B(this,function(){if(d.length)return d.shift();for(var e;void 0!==(e=b())&&!a(e);)c.push(e);return e})},dedup:function(){var a;return this.filter(function(b){var c=a;return a=b,c!==b})},join:function(){var a=this,b=L;return B(this,function c(d){var e=b.shift();return void 0!==e?e:(b=a.shift(),void 0!==b?c(d):void(b=L))})},chain:function(a){return this.map(a).join()},concat:function(a){var b=this;return B(this,function(){var c=b.shift();return void 0===c&&(c=a.shift()),c})},cue:function(a,b,c,d,e){function f(b){var c=b>=l?l:b;if(void 0===g)for(;void 0!==(g=i.shift())&&void 0!==(h=d(g))&&e(m,c,h);)j.push(h),g=void 0;else if(h=d(g),void 0!==h&&e(m,c,h))for(j.push(h);void 0!==(g=i.shift())&&void 0!==(h=d(g))&&e(m,c,h);)j.push(h),g=void 0;"done"!==i.status&&b!==l&&(m=k>b?k:b,a(f))}var g,h,i=this,j=C.of(),k=-(1/0),l=1/0,m=k;return j.stop=function(a){return l=a,m>=l&&b(f),this},j.start=function(b){return k=b,m=k,k>=c()?a(f):f(c()),this},j},sort:function(a){a=a||A.byGreater;var b=this,c=[];return B(this,function(){for(var d;void 0!==(d=b.shift());)o(c,a,d);return c.shift()})},head:function(){var a=this;return B(this,function(){return"done"!==a.status?(a.status="done",a.shift()):void 0})},tail:function(){var a=this,b=0;return B(this,function(){return 0===b++&&a.shift(),a.shift()})},last:function(){var a=this;return B(this,function(){var b;return a.each(function(a){b=a}),b})},slice:function(a,b){var c=this,d=-1;return B(this,function(){for(;++d<a;)c.shift();return b>d?(d===b-1&&(this.status="done"),c.shift()):void 0})},split:function(a){var b=this,c=[];return B(this,function d(){var e,f=b.shift();return void 0!==f?a(f)?(e=c,c=[f],e.length?e:d()):(c.push(f),d()):c.length?(e=c,c=[],e):void 0})},batch:function(a){var b=this,c=[];return B(this,a?function(){for(var d,e;c.length<a;){if(d=b.shift(),void 0===d)return;c.push(d)}return c.length>=a?(e=c,c=[],A.of.apply(A,e)):void 0}:function(){return c=b.toArray(),c.length?c:void 0})},group:function(a){function b(){var a=[],b=C(function(){return a.length||c(A.is(b)),a.shift()},function(){a.push.apply(a,arguments)});return f.push(b),b}function c(d){var f=e.shift();if(void 0!==f){var h=a(f),i=g.get(h);return void 0===i&&(i=b(),g.set(h,i)),i.push(f),d(i)||c(d)}}function d(){return!!f.length}var e=this,f=[],g=new Map;return a=a||A.id,B(this,function(){return c(d),f.shift()})},scan:function(a,b){b=arguments.length>1?b:0;var c=0;return this.map(function(d){return b=a(b,d,c++)})},unique:function(){var a=this,b=[];return B(this,function c(){var d=a.shift();if(void 0!==d)return-1===b.indexOf(d)?(b.push(d),d):c()})},assign:function(a){return this.map(A.assign(a))},parse:function(){return this.map(JSON.parse)},stringify:function(){return this.map(A.stringify)},next:function(){var a=this.shift();return{done:void 0===a,value:a}},pipe:function(a){if(!a||!a.push)throw new Error("Fn: Fn.pipe(object) object must be a pushable stream. ("+a+")");var b=this;return a.push&&b.on&&b.on("push",a.push),a.on("pull",function c(){var d=b.shift();return"done"===b.status&&a.off("pull",c),d}),a},clone:function(){function a(){var a=b();void 0!==a&&(c.push(a),d.push(a))}var b=this.shift,c=[],d=[];return this.shift=function(){return c.length||a(),c.shift()},B(this,function(){return d.length||a(),d.shift()})},tap:function(a){return this.shift=A.compose(function(b){return void 0!==b&&a(b),b},this.shift),this},each:function(a){for(var b;void 0!==(b=this.shift());)a(b);return this},reduce:function(a,b){for(var c=A.isDefined(b)?b:0;void 0!==(b=this.shift());)c=a(c,b);return c},find:function(a){return this.filter(a).head().shift()},toJSON:function(){return this.reduce(function(a,b){return a.push(b),a},[])},toFunction:function(){var a=this;return function(){
return arguments.length&&this.push.apply(this,arguments),a.shift()}},log:function(){var a=arguments;return this.tap(function(b){console.log.apply(console,A.push(b,G.slice.apply(a)))})}}),A.prototype.toArray=A.prototype.toJSON,a.Symbol&&(A.prototype[Symbol.iterator]=function(){return this}),Object.assign(A,{of:function(){return new this(arguments)},empty:L,noop:c,id:d,cache:j,curry:k,cacheCurry:l,compose:h,pipe:i,overloadLength:m,overloadTypes:n,returnThis:function(){return this},is:k(function(a,b){return a===b}),equals:k(function W(a,b){if(a===b)return!0;if("object"!=typeof a||"object"!=typeof b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(var e=c.length;e--;)if(!W(a[c[e]],b[c[e]]))return!1;return!0}),isGreater:k(function(a,b){return b>a}),by:k(function(a,b,c){return q(b[a],c[a])}),byGreater:k(q),byAlphabet:k(function(a,b){return J.localeCompare.call(a,b)}),assign:k(Object.assign,2),get:k(function(a,b){return b&&("function"==typeof b.get?b.get(a):null===b[a]?void 0:b[a])}),set:k(function(a,b,c){return"function"==typeof c.set?c.set(a,b):c[a]=b}),getPath:k(function(a,b){return b&&(b.get?b.get(a):"number"==typeof a?b[a]:""===a||"."===a?b:v(b,s(a)))}),setPath:k(function(a,b,c){if(c.set&&c.set(a,b),"number"==typeof a)return c[a]=b;var d=s(a);return 1===d.length?c[a]=b:w(c,d,b)}),bind:k(g),invoke:k(function(a,b,c){return c[a].apply(c,b)}),run:k(function(a,b){return b.apply(null,a)}),map:k(function(a,b){return b.map?b.map(a):G.map.call(b,a)}),find:k(function(a,b){return b.find?b.find(a):G.find.call(b,a)}),throttle:function(a,b){function c(b){return y(b,a)}return void 0===b&&a.apply&&(b=a,a=void 0),b?c(b):c},requestTick:function(a){return function(b){a.then(b)}}(Promise.resolve()),entries:function(a){return"function"==typeof a.entries?a.entries():G.entries.apply(a)},keys:function(a){return"function"==typeof a.keys?a.keys():G.keys.apply(a)},values:function(a){return"function"==typeof a.values?a.values():G.values.apply(a)},each:k(function(a,b){return b&&(b.each?b.each(a):b.forEach?b.forEach(function(b){a(b)}):G.forEach.call(b,function(b){a(b)}))}),concat:k(function(a,b){return b.concat?b.concat(a):G.concat.call(b,a)}),filter:k(function(a,b){return b.filter?b.filter(a):G.filter.call(b,a)}),reduce:k(function(a,b,c){return c.reduce?c.reduce(a,b):G.reduce.call(c,a,b)}),slice:k(function(a,b,c){return c.slice?c.slice(a,b):G.slice.call(c,a,b)}),sort:k(function(a,b){return b.sort?b.sort(a):G.sort.call(b,a)}),push:k(function(a,b){return(b.push||G.push).call(b,a),b}),intersect:k(function(a,b){for(var c=a.length,d=b.length,e=0,f=0,g=[];c>e&&d>f;)a[e]===b[f]?(g.push(a[e]),++e,++f):b[f]>a[e]?++e:++f;return g}),diff:k(function(a,b){for(var c,d=a.length,e=b.length,f=0,g=0,h=[];d>f;){for(;e>g&&a[f]>b[g];)h.push(b[g]),++g;for(a[f]!==b[g]&&h.push(a[f]),c=a[f];c===a[f]&&++f<d;);for(;c===b[g]&&++g<e;);}for(;e>g;)h.push(b[g]),++g;return h}),unite:k(function(a,b){return a.concat(b).filter(unique).sort(A.byGreater)}),randomGaussian:function(a){return a*(Math.random()+Math.random()-1)},add:k(function(a,b){return b+a}),multiply:k(function(a,b){return b*a}),mod:k(function(a,b){return b%a}),pow:k(function(a,b){return Math.pow(b,a)}),min:k(function(a,b){return a>b?b:a}),max:k(function(a,b){return b>a?b:a}),limit:k(function(a,b,c){return c>b?b:a>c?a:c}),wrap:k(function(a,b,c){return(a>c?b:a)+(c-a)%(b-a)}),degToRad:function(a){return a/M},radToDeg:function(a){return a*M},toPolar:function(a){var b=a[0],c=a[1];return[0===b?Math.abs(c):0===c?Math.abs(b):Math.sqrt(b*b+c*c),Math.atan2(b,c)]},toCartesian:function(a){var b=a[0],c=a[1];return[Math.sin(c)*b,Math.cos(c)*b]},nthRoot:k(function(a,b){return Math.pow(b,1/a)}),gcd:function X(a,b){return b?X(b,a%b):a},lcm:function(a,b){return a*b/A.gcd(a,b)},factorise:function(a,b){var c=A.gcd(a,b);return[a/c,b/c]},normalise:k(function(a,b,c){return(c-a)/(b-a)}),denormalise:k(function(a,b,c){return c*(b-a)+a}),toFixed:k(function(a,b){return H.toFixed.call(b,a)}),rangeLog:k(function(a,b,c){return A.denormalise(a,b,Math.log(c/a)/Math.log(b/a))}),rangeLogInv:k(function(a,b,c){return a*Math.pow(b/a,A.normalise(a,b,c));
}),dB:function(a){return this.map(function(a){return 20*Math.log10(a)})},match:k(function(a,b){return a.test(b)}),exec:k(function(a,b){return a.exec(b)||void 0}),replace:k(function(a,b,c){return c.replace(a,b)}),slugify:function(a){return"string"==typeof a?a.trim().toLowerCase().replace(/[\W_]/g,"-"):void 0},not:function(a){return!a},isDefined:function(a){return!!a||void 0!==a&&null!==a&&!Number.isNaN(a)},toType:function(a){return typeof a},toClass:function(a){return I.toString.apply(a).slice(8,-1)},toArray:function(a){return a.toArray?a.toArray():A(a).toArray()},toInt:function(a){return parseInt(a,10)},toFloat:parseFloat,toPlainText:function(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},toStringType:function(a,b){return function(c){for(var d=-1;++d<b.length;)if(a[b[d]].test(c))return b[d];try{return JSON.parse(c),"json"}catch(e){}return"string"}}(S,["date","url","email","int","float"]),stringify:function(a){return JSON.stringify("Map"===A.toClass(a)?A(a):a)},log:k(function(a,b){return console.log(a,b),b})});var V=Symbol("events");C.prototype=Object.create(A.prototype),Object.assign(C.prototype,{on:function(a,b){var c=this[V],d=c[a]||(c[a]=[]);return d.push(b),this},off:function(a,b){var c=this[V],d=c[a];if(d){for(var e=d.length;e--;)d[e]===b&&d.splice(e,1);return this}},stop:function(){this.status="done",E("done",this)},ap:function(a){var b=this;return B(this,function(){var c=b.shift();if(void 0!==c)return a.map(c)})},push:function(){throw new Error("Fn: "+this.constructor.name+" is not pushable.")},each:function(a){function b(){A.prototype.each.apply(c,d)}var c=this,d=arguments;return b(),this.on("push",b)},pipe:function(a){return A.prototype.pipe.apply(this,arguments),this("push",a.push),a},concatParallel:function(){function a(a){a.on("push",function(){d.push(a)}),d.push(a)}function b(){var a=d.shift();if(void 0!==a){var c=a.shift();return void 0===c?b():c}}var c=this,d=[];return B(this,function(){var d=c.shift();void 0!==d&&a(d);var e=b();return e})},delay:function(a){var b=this,c=this.push,d=C(b.shift,A.noop);return this.push=function(){c.apply(b,arguments),setTimeout(d.push,a)},d},throttle:function(a){var b=this,c=this.push,d=C(function(){var a=D(b);return"done"===b.status&&(e.cancel(),d.status="done"),a},A.noop),e=A.Throttle(d.push,a);return this.push=function(){c.apply(b,arguments),e()},d},toPromise:function(){var a=this;return new Promise(function(b,c){var d=a.shift();return void 0!==d?void b(d):void a.on("push",function(){var c=a.shift();void 0!==c&&b(c)}).on("stop",c)})}}),Object.assign(C,{of:function(){var a=arguments;return new C(function(){return p(a)},function(){G.push.apply(a,arguments)})}}),F.snapshot=function(){return A(O).map(e).toJSON()},Object.assign(A,{Pool:F,Throttle:y,Hold:z,Stream:C}),a.Fn=A}(this),function(a){"use strict";function b(a){return a.listeners||Object.defineProperty(a,"listeners",{value:{}}),a.listeners}function c(a){return a.delegates||Object.defineProperty(a,"delegates",{value:[]}),a.delegates}function d(a,b){var d=c(a);-1===d.indexOf(b)&&d.push(b)}function e(a,b){var d=c(a);if(void 0===b)return void(d.length=0);var e=d.indexOf(b);-1!==e&&d.splice(e,1)}function f(a,b,c){for(var d,e,f=-1,g=b.length;++f<g&&e!==!1;)d=c.concat(b[f][1]),e=b[f][0].apply(a,d);return e}var g=a.Fn,h=a.mixin||(a.mixin={}),i={},j=Function.prototype.call.bind(Array.prototype.slice);h.events={on:function(a,c){var e=this;if(1===arguments.length){if("string"==typeof a)return g.Stream(function(b){function c(a,c){d.push(c),b("push")}var d=[];return e.on(a,c),{next:function(){return d.shift()},end:function(){e.off(a,c)}}});if(a.trigger)return d(this,a),this}if(!c)throw new Error('Sparky: calling .on("'+a+'", fn) but fn is '+typeof c);var f,h,i=b(this);if("string"!=typeof a)return this;for(a=a.trim().split(/\s+/),h=[c,j(arguments,2)];f=a.shift();)i[f]||(i[f]=[]),i[f].push(h);return this},off:function(a,b){var c,d,f;if(0===arguments.length){if(e(this),this.listeners)for(c in this.listeners)this.listeners[c].length=0,delete this.listeners[c];return this}if(1===arguments.length&&a.trigger)return e(this,a),this;
if(!this.listeners)return this;for("string"==typeof a?a=a.trim().split(/\s+/):(b=a,a=Object.keys(this.listeners));c=a.shift();)if(d=this.listeners[c])if(b)for(f=d.length;f--;)d[f][0]===b&&d.splice(f,1);else this.listeners[c].length=0,delete this.listeners[c];return this},trigger:function(a){var d,e,g,h,k=b(this),l=c(this).slice(),m=j(arguments);if("string"==typeof a?(d=a,e=this):(d=a.type,e=a.target),k[d]&&(m[0]=e,f(this,k[d].slice(),m)===!1))return this;if(!l.length)return this;for(g=-1,h=l.length,m[0]=i,"string"==typeof a&&(i.type=d,i.target=e);++g<h;)l[g].trigger.apply(l[g],m);return this}}}(this),function(a){function b(a){a[0].apply(null,a[1])}function c(a,b){return a&&(Object.getOwnPropertyDescriptor(a,b)||c(Object.getPrototypeOf(a),b))}function d(a,c){c=c.slice();for(var d,e,f=-1;c[++f];)d=c[f],e=d[1][0],b(d)}function e(a,b){var e=c(a,b);if(e){var f=e.get&&e.get.observers;f&&d(a,f)}}function f(a,c,d,e){var f=a[c];delete e.writable,delete e.value,e.configurable=!1,e.get=function(){return f},e.set=function(a){a!==f&&(f=a,d.slice().forEach(b))},e.get.observers=d,Object.defineProperty(a,c,e)}function g(a,b,c,e){var f=e.set;f&&(e.set=function(a){f.call(this,a),d(this,c)}),e.configurable=!1,e.get.observers=c,Object.defineProperty(a,b,e)}function h(a,b,c){var d=l(arguments,0);d.splice(1,2);for(var e,h=[c,d],i=a;!(e=Object.getOwnPropertyDescriptor(i,b))&&(i=Object.getPrototypeOf(i)););if(e&&e.get&&e.get.observers)return void e.get.observers.push(h);var j=[h];return e?e.configurable===!1?void(e.get&&!e.set?e.get.observers=j:(k&&console.warn("observe: Property ."+b+" has { configurable: false }. Can not observe.",a),k&&console.trace())):e.writable===!0?void f(a,b,j,e):e.writable===!1?void(k&&console.warn("observe: Property ."+b+" has { writable: false }. Shall not observe.",a)):e.get?void g(i,b,j,e):void(k&&console.warn("observe: Property ."+b+" has a setter but no getter. Will not observe.",a)):void f(a,b,j,{enumerable:!0})}function i(a,b,c){var d;if("[object Function]"!==m(b))h.apply(null,arguments);else{c=prop,d=l(arguments,0),d.splice(1,0,null);for(b in a)d[1]=b,h.apply(null,d)}}function j(a,b,d){if(b instanceof Function){d=b;for(b in a)j(data,key,d)}else{var e=c(a,b);if(e){var f=e.get&&e.get.observers;if(f){var g;if(d)for(g=f.length;g--;)f[g][0]===d&&f.splice(g,1);else f.length=0}}}}var k=!1,l=Function.prototype.call.bind(Array.prototype.slice),m=Function.prototype.call.bind(Object.prototype.toString);a.observe=i,a.unobserve=j,a.notify=e}(window),function(a){"use strict";function b(){return this}function c(a,b){for(var c=a.index,d=-1,e=a.length;++d<e;)if(a[d][c]===b)return a[d]}function d(a,b,c){c=c||Object.keys(b);for(var d,e=c.length;e--;)if(d=c[e],a[d]!==b[d]&&!("function"==typeof b[d]&&b[d](a,d)||b[d]instanceof RegExp&&b[d].test(a[d])))return!1;return!0}function e(a,b){var c=Object.keys(b);return 0===c.length?a.slice():a.filter(function(a){return d(a,b,c)})}function f(a,b){Array.prototype.push.call(a,b),a.trigger("add",b)}function g(a,b,c){for(var d=Array.prototype.splice.call.apply(Array.prototype.splice,arguments),e=d.length,f=Array.prototype.slice.call(arguments,3),g=f.length,h=-1;e--;)a.trigger("remove",d[e],b+e);for(;++h<g;)a.trigger("add",f[h],h);return d}function h(a,b){var c=a.index;if(!s.isDefined(b[c]))return void(-1===a.indexOf(b)&&f(a,b));for(var d=a.length;a[--d]&&(a[d][c]>b[c]||!s.isDefined(a[d][c])););g(a,d+1,0,b)}function i(a,b,c){for(void 0===c&&(c=-1);++c<a.length;)(b===a[c]||b===a[c][a.index])&&(g(a,c,1),--c)}function j(a,b){var c=a.find(b);c?(r(c,b),a.trigger("update",c)):h(a,b)}function k(a,b,c){for(var d=c.length,e=-1;++e<d;)a.call(null,b,c[e])}function l(a){return function(){var b=arguments.length,c=a[b]||a["default"];return c?c.apply(this,arguments):(console.warn("Collection: method is not overloaded to accept "+b+" arguments."),this)}}function m(a){return p.prototype.isPrototypeOf(a)||q.prototype.isPrototypeOf(a)}function o(a){var b=a.length;return function(){for(var c;b-->a.length;)c=a[b],void 0!==c&&(delete a[b],a.trigger("remove",c,b));b=a.length}}function p(b,c){function d(a,b){return a[e.index]>b[e.index]?1:-1;
}if(void 0===this||this===a)return new p(b,c);void 0===b?b=[]:s.isDefined(b.length)||(c=b,b=[]);var e=this,f=r({},w,c);Object.defineProperties(e,{length:{value:0,writable:!0,configurable:!0},index:{value:f.index},sort:{value:function(a){return Array.prototype.sort.call(this,a||f.sort||d),this.trigger("sort")},writable:!0}});for(var g=-1;b[++g];)e[g]=b[g];e.length=b.length,t(e,"length",o(e))}function q(a,b,c){function e(b,c){var d=a.indexOf(b),e=a.indexOf(c);return d>e?1:-1}function f(c){var f=o.indexOf(c);if(n=!1,d(c,b,m)){if(-1===f){if(l.sort===e){for(var g,h,i=a.indexOf(c),k=i;k--&&(g=a[k],h=o.indexOf(g),!(h>-1&&i>h)););o.splice(h+1,0,c)}else o.add(c);o.on("add",j)}}else-1!==f&&o.remove(c);n=!0}function g(a,b){for(var c,d=m.length;d--;)c=m[d],t(b,c,f);f(b)}function h(a,b){for(var c,d=m.length;d--;)c=m[d],u(b,c,f);var e=o.indexOf(b);e>-1&&(n=!1,o.splice(e,1),n=!0)}function i(a){a.forEach(function(b){h(a,b)}),o.off("add",j).off("remove",k)}function j(b,c){n&&a.add(c)}function k(b,c){n&&a.remove(c)}var l=r({sort:e},c),m=Object.keys(b),n=!0,o=this;p.call(this,l),a.on("add",g).on("remove",h).on("destroy",i),a.length?a.forEach(function(b){g(a,b)}):o.on("add",j).on("remove",k),this.destroy=function(){i(a),a.off("add",g).off("remove",h).off("destroy",i),o.off()},this.synchronise=function(){return a.forEach(f),this}}var r=Object.assign,s=a.Fn,t=a.observe,u=a.unobserve,v=a.mixin,w={index:"id"};r(p,{of:function(){return p(arguments)},add:h,remove:i,isCollection:m}),r(p.prototype,v.events,{of:function(){return p(arguments)},ap:function(a){return this.map(function(b){return a.map(b)})},filter:Array.prototype.filter,map:Array.prototype.map,reduce:Array.prototype.reduce,concat:Array.prototype.concat,sort:Array.prototype.sort,slice:Array.prototype.slice,some:Array.prototype.some,indexOf:Array.prototype.indexOf,forEach:Array.prototype.forEach,each:function(){return Array.prototype.forEach.apply(this,arguments),this},add:l({0:b,"default":function(){return k(h,this,arguments),this}}),remove:l({0:function(){for(;this.length;)this.pop();return this},"default":function(){return k(i,this,arguments),this}}),push:function(){return k(f,this,arguments),this},pop:function(){var a=this[this.length-1];return--this.length,a},shift:function(){var a=this[0];return this.remove(a),a},splice:function(){return Array.prototype.unshift.call(arguments,this),g.apply(this,arguments)},update:function(){return k(j,this,arguments),this},find:l({0:s.noop,1:function(a){if(this.indexOf(a)>-1)return a;var b=this.index;return"string"==typeof a||"number"==typeof a||void 0===a?c(this,a):c(this,a[b])}}),query:function(a){return a?e(this,a):[]},contains:function(a){return-1!==this.indexOf(a)},getAll:function(a){var b=this.length;if(0!==b){for(;--b;)if(this[b][a]!==this[b-1][a])return;return this[b][a]}},setAll:function(a,b){if(2!==arguments.length)throw new Error("Collection.set(property, value) requires 2 arguments. "+arguments.length+" given.");for(var c=this.length;c--;)this[c][a]=b;return this},toJSON:function(){return Array.prototype.slice.apply(this)},toObject:function(a){a=a||this.index;for(var b,c,d={};n--;)b=this[n][a],c=typeof b,"string"===c||"number"===c&&b>-(1/0)&&1/0>b?d[b]=this[n]:console.warn("Collection: toObject() "+typeof b+" "+b+" cannot be used as a key.");return d},sub:function(a,b){return new q(this,a,b)}}),r(q.prototype,p.prototype),a.Collection=p}(this),function(a){a.console&&a.console.log&&console.log("Sparky - https://github.com/cruncher/sparky")}(this),function(a){"use strict";function b(a){a()}function c(a){return["<",z.tag(a),a.getAttribute("data-scope")?' data-scope="'+a.getAttribute("data-scope")+'"':"",a.getAttribute("data-fn")?' data-fn="'+a.getAttribute("data-fn")+'"':"",a.getAttribute("data-template")?' data-template="'+a.getAttribute("data-template")+'"':"",a.className?' class="'+a.className+'"':"",a.id?' id="'+a.id+'"':"",">"].join("")}function d(){if(v.debug&&"errors"!==v.debug){var a=["Sparky:"];Array.prototype.push.apply(a,arguments),console.log.apply(console,a)}}function e(){if("verbose"===v.debug){var a=["Sparky:"];Array.prototype.push.apply(a,arguments),
console.log.apply(console,a)}}function f(a){var b,c="string"==typeof a?document.querySelector(a):a;return c?(b=z.tag(c),"template"===b||"script"===b?v.template(c.id):c):(/^#/.test(a)&&(c=v.template(a.slice(1))),c?c:void console.warn("Sparky: node cannot be found during setup: "+a))}function g(a,b,c,d,e){if(!a.getAttribute)return e(b);var f=a.getAttribute("data-scope");if(!D(f))return e(b);B.lastIndex=0;var g=B.test(f);if(g)return void jQuery.get(f).then(function(a){e(a)});v.rtags.lastIndex=0;var h=v.rtags.exec(f);return h?f=h[2]:b=c,b&&f?d(b,f):e(b)}function h(a,b,c,d){return"string"==typeof b?k(b,c,d):"function"==typeof b?i([b],d):"object"==typeof b?i(b,d):a.getAttribute&&k(a.getAttribute("data-fn"),c,d)}function i(a,b){return function(c){var d,e=a.length,f=-1,g=!1;for(this.ctrls=a,this.interrupt=function(){return g=!0,a.slice(f+1)};++f<e;){if(d=a[f].call(this,c,b),g)return!1;void 0!==d&&(b=d.each?d:y.of(d))}return b}}function j(a,b,c){for(var d,e=[],f=a.length,g=-1;++g<f;){if(d=y.getPath(a[g],b),!d)throw new Error('Sparky: data-fn "'+a[g]+'" not found in sparky.fn');e.push(d)}return i(e,c)}function k(a,b,c){if(D(a)){var d=a.trim().split(v.rspaces);return j(d,b,c)}}function l(a,b,c){var d=v.debug?z.create("comment",z.tag(a)):z.create("text","");return z.before(a,d),z.remove(a),d}function m(a,b,c){var d=c.placeholders[b];z.before(d,a),z.remove(d)}function n(c,d){d?c.forEach(b):c.forEach(a.requestAnimationFrame),c.length=0}function o(a,b,c){for(var d,e,f,g=b.length;g--;)d=b[g][0],e=b[g][1],f=b[g][2],v.observePath(a,d,f,!c),c&&e(y.getPath(d,a))}function p(a,b){for(var c,d,e=b.length;e--;)c=b[e][0],d=b[e][2],v.unobservePath(a,c,d)}function q(a,b,c){var d,e,f=b.length;for(c&&c.length&&(b=b.filter(function(a){return c.indexOf(a[0])>-1}));f--;)d=b[f][0],e=b[f][2],d?e(y.getPath(d,a)):e()}function r(a){a.setups.length=0,a.teardowns.forEach(b),a.teardowns.length=0;for(var c,d=a.bindings,e=d.length;e--;)c=d[e][2],c.cancel();a.bindings.length=0}function s(a){return a.placeholders?(a.forEach(m),a.placeholders=!1,void a.trigger("dom-add")):void(document.body.contains(a[0])&&a.trigger("dom-add"))}function t(a){a.placeholders||(a.placeholders=a.map(l),a.trigger("dom-remove"))}function u(a,b,c,d,e,f,g){b?g?c(a,g):d(a):g?e(a):f(a)}function v(a,b,c,d){function e(a){B.push(a)}function i(a,b){G(),G=function(){v.unobservePath(a,b,e)},v.observePath(a,b,e,!0)}if(!(this instanceof v))return new v(a,b,c,d);var j,k,l,m=this,w=!0,B=A(function(){var a=l;return l=void 0,a},function(){l=arguments[arguments.length-1],this.notify("push")}).dedup(),E=d?d.data:v.data,F=d?d.fn:v.fn,G=C,H=y.Throttle(s),I=y.Throttle(t);if(a=f(a),!a)return void console.warn("Sparky: Sparky(node) – node not found: "+a);v.logVerbose("Sparky(",a,b,c&&(c.call?c.name:c),")"),c=h(a,c,F,B),Object.defineProperties(this,{data:{value:Object.create(E),writable:!0},fn:{value:Object.create(F)},placeholders:{writable:!0}}),this.scope=function(c){return c!==b?(b=c,g(a,c,d?d.data:v.data,i,e),this):void 0},x.call(this,[a]);var J=c?c.call(m,a,B):B;if(J===!1)return this.on("destroy",function(){z.remove(this)}),this.scope(b),void(w=!1);var K=[];this.create=function(a,b,c){var d=v.prototype.create.apply(this,arguments);return D(j)&&d.scope(j),K.push(d.scope),d.on("destroy",function(){var a=K.indexOf(d.scope);a>-1&&K.splice(a,1)})},this.render=function(){q(j,k.bindings,arguments),this.trigger.apply(this,["render"].concat(arguments))},this.on("destroy",function(){z.remove(this),this.placeholders&&z.remove(this.placeholders),G(),p(j,k.bindings),r(k)}),k=v.parse(m,function(a){return j&&y.getPath(a,j)},function(a,b){j&&y.setPath(a,b,j)}),k.nodes.forEach(function(a){return m.create(a,j)}),k.nodes.length=0,J.dedup().map(function(b){return j&&k&&p(j,k.bindings),j=b,j&&k&&(k.setups.length&&n(k.setups,w),o(j,k.bindings,w)),v.log("Sparky: scope change",a,j),u(m,j,s,H,t,I,w),w=!1,j}).each(function(a){K.forEach(function(b){b(a)})}),g(a,b,d?d.data:v.data,i,e),w=!1}var w=Object.assign,x=a.Collection,y=a.Fn,z=a.dom,A=y.Stream,B=/\/\S*\.json$/,C=y.noop,D=y.isDefined,E=y.returnThis;v.prototype=Object.create(x.prototype),
w(v.prototype,{create:function(a,b,c){function d(){g.destroy()}function e(a){g.render()}var f=this,g=v(a,b,c,this);return this.on("destroy",d).on("render",e),g.on("destroy",function(){f.off("destroy",d).off("render",e)})},destroy:function(){return this.trigger("destroy").off()},scope:E,render:E,interrupt:function(){return[]},tojQuery:function(){return a.jQuery?jQuery(this.filter(z.isElementNode)):void 0}});var F={};w(v,{debug:!1,log:d,logVerbose:e,nodeToString:c,"try":function(a,b){return function(){if(v.debug)try{return a.apply(this,arguments)}catch(c){throw new Error(b.apply(this,arguments))}return a.apply(this,arguments)}},svgNamespace:"http://www.w3.org/2000/svg",xlinkNamespace:"http://www.w3.org/1999/xlink",data:{},fn:{},template:function(a){var b=F[a]||(F[a]=z.fragmentFromId(a));return b.cloneNode(!0)}}),a.Sparky=v}(this),function(a){"use strict";function b(a){return a.replace(t,"").split(u)}function c(a,b,c){for(var d=-1;++d<a.length;)if(a[d]&&a[d][b]===c)return a[d]}function d(a,b,c,d,e){function f(){o.logVerbose("path resolved to value:",a[b]),d(a[b])}return o.observe(a,b,f,e),function(){o.unobserve(a,b,f)}}function e(a,b,d,e,g){function h(){l(),"object"!=typeof k&&"function"!=typeof k?(l=r,g&&e()):l=f(k,d.slice(),e,g)}function i(){var b=c(a,m[1],JSON.parse(m[2]));b!==k&&(k=b,h())}function j(){k=a[b],h()}var k,l=r,m=v.exec(b);if(m){if(!a.on)throw new Error("Sparky: Sparky.observe trying to observe with property selector on a non-collection.");return a.on("add remove sort",i),i(),g=!0,function(){l(),a.off("add remove sort",i)}}return o.observe(a,b,j,!0),g=!0,function(){l(),o.unobserve(a,b,j)}}function f(a,b,c,f){if(0===b.length)return r;var g=b.shift();return 0===b.length?d(a,g,b,c,f):e(a,g,b,c,f)}function g(a,c,d,e){if("."===c)return void(e&&d(a));var g=b(c),h=f(a,g,d,e||!1);w.push([a,c,d,h])}function h(a,c,d){function e(b){k||s(b)&&(k=!0,d(b),setTimeout(function(){i(a,c,d)},0))}var g=n.getPath(c,a);if(s(g))return void d(g);var h=b(c),j=f(a,h,e,!1),k=!1;w.push([a,c,d,j])}function i(a,b,c){var d,e=w.length;for("string"!=typeof b&&(c=b,b=void 0);e--;)d=w[e],a!==d[0]||b&&b!==d[1]||c&&c!==d[2]||(d[3](),w.splice(e,1))}function j(b){return a.AudioParam&&a.AudioParam.prototype.isPrototypeOf(b)}function k(b,c,d){function e(){var f=b[c];g!==f&&(g=f,d()),h&&a.requestAnimationFrame(e)}function f(){h=!1}var g=b[c],h=!0;return a.requestAnimationFrame(e),f}function l(a,b,c){return x.push([a,b,c,k(a,b,c)]),a}function m(a,b,c){for(var d,e=x.length;e--;)if(d=x[e],a===d[0]&&b===d[1]&&c===d[2])return d[3](),x.splice(e,1),a;return a}var n=a.Fn,o=a.Sparky,p=a.observe,q=a.unobserve,r=n.noop,s=n.isDefined,t=/^\[|\]$/g,u=/\]?(?:\.|\[)/g,v=/(\w+)=(\w+)/,w=[];o.observePath=g,o.unobservePath=i,o.observePathOnce=h;var x=[];o.observe=function(a,b,c,d){if(!a)throw new Error("Sparky: Sparky.observe requires an object!",a,b);if(j(a))return l(a,b,c);var e;return"length"!==b||(e=Object.getOwnPropertyDescriptor(a,b),e.get||e.configurable)?(p(a,b,c),void(d&&c(a))):(console.warn&&console.warn("Sparky: Are you trying to observe an array?. Sparky is going to observe it by polling. You may want to use a Collection() to avoid this.",a,a instanceof Array),console.trace&&console.trace(),l(a,b,c))},o.unobserve=function(a,b,c){if(j(a))return m(a,b,c);var d;return"length"!==b||(d=Object.getOwnPropertyDescriptor(a,b),d.get||d.configurable)?q(a,b,c):m(a,b,c)}}(this),function(a){function b(a){return a.toString().replace(/^function.+\{\s*\/\*\s*/,"").replace(/\s*\*\/\s*\}$/,"")}function c(a){return function(b,c){var d=a[c];return d instanceof Array?d.join(", "):void 0===d||null===d?"":d}}function d(a){return function(b,c,d){var e=a[c];if(void 0===e||null===e)throw new Error("Exception: attempting to build RegExp but obj['"+c+"'] is undefined.");return e=e.source.replace(/^\^|\$$/g,""),d?["(?:",e,")",d].join(""):e}}var e=a.Sparky;e.render=function(a,f){return"function"==typeof a?b(a).replace(e.rsimpletags,c(f)):a instanceof RegExp?RegExp(a.source.replace(/\{\{\s*(\w+)\s*\}\}(\{\d|\?|\*|\+)?/g,d(f)),(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")):a.replace(e.rsimpletags,c(f));
}}(this),function(a){"use strict";function b(a,b,c){a.setAttribute(b,c)}function c(a,b,c){b in a?a[b]=!!c:c?a.setAttribute(b,b):a.removeAttribute(b)}function d(a,b){var c=b.trim().split(U);a.add.apply(a,c)}function e(a,b){var c=b.trim().split(U);a.remove.apply(a,c)}function f(a,b,c,d,e,f,g,h){var i,j,k=a.getAttribute&&a.getAttribute("data-template");if(Z(k)){if(i=N.template(k),!i)return void N.log('template "'+k+'" not found in DOM.');j=_(i.childNodes),f(function(){M.empty(a),M.append(a,i)})}else j=_(a.childNodes);for(var l,m=-1,n=j.length;++m<n;)l=j[m],l.getAttribute&&(Z(l.getAttribute("data-fn"))||Z(l.getAttribute("data-scope")))?g(l):ba[l.nodeType]&&h.push.apply(h,ba[l.nodeType](l,b,c,d,e,f,g))}function g(a,b,c,f,g){var h=M.attribute("class",a);if(h){J.lastIndex=0;var i=[],j=h.replace(J,function(a){return i.push(a),""});if(i.length){a.setAttribute("class",j);var k=M.classes(a),l=function(a,b){b&&V.test(b)&&e(k,b),a&&V.test(a)&&d(k,a)};"verbose"===N.debug&&console.log('Sparky: bind class="'+h+" "+i.join(" ")+'"'),q(i.join(" "),b,c,f,l,g)}}}function h(a,b,c,d,e,f){for(var g=f.length;g--;)i(a,f[g],b,c,d,e)}function i(a,c,d,e,f,g){var h=a.getAttribute("data-"+c),i=P[c]||c,j=h?h:a.getAttribute(i);if(j){h&&a.removeAttribute("data-"+c),"verbose"===N.debug&&console.log("Sparky: checking "+i+'="'+j+'"');var k=b.bind(null,a,i);q(j,d,e,f,k,g)}}function j(a,b,d,e,f,g){var h=a.getAttribute("data-"+b),i=b,j=h?h:a.getAttribute(i);if(j){h&&a.removeAttribute("data-"+b),"verbose"===N.debug&&console.log("Sparky: checking "+i+'="'+j+'"');var l=c.bind(null,a,i);k(j.trim(),d,e,f,l,g)}}function k(b,c,d,e,f,g){function h(){N.rtags.lastIndex=0;var a=j.apply(null,i);f(a)}N.rtags.lastIndex=0;var i=N.rtags.exec(b);if(i){var j=o(e);2===i[1].length?g.push(r(c,d,h,[i[2]])):a.requestAnimationFrame(h)}}function l(a){var b=T.exec(a);return{name:b[1],fn:N.filter[b[1]],args:b[2]&&JSON.parse('["",'+b[2].replace(/'/g,'"')+"]")||[]}}function m(a,b){for(var c,d=X[b]||(X[b]=b.split("|").map(l)),e=d.length,f=-1;++f<e&&Z(a);){if(!d[f].fn)throw new Error("Sparky: filter '"+d[f].name+"' does not exist in Sparky.filter");"verbose"===N.debug&&console.log("Sparky: filter:",d[f].name,"value:",a,"args:",d[f].args),c=d[f].args,c[0]=a,a=d[f].fn.apply(null,c)}return a}function n(a,b,c){N.rtags.lastIndex=0,a.replace(N.rtags,function(a,d,e){var f;-1===b.indexOf(e)&&(2===d.length?(b.push(e),f=c.indexOf(e),-1!==f&&c.splice(f,1)):-1===c.indexOf(e)&&c.push(e))})}function o(a){return function(b,c,d,e){var f=e?m(a(d),e):a(d),g=typeof f;return Z(f)?"string"===g?f:"number"===g?f:"boolean"===g?f:"function"===g?(f.name||"function")+(W.exec(f.toString())||[])[1]:$(f):""}}function p(a,b,c){var d,e=o(b);return function(){N.rtags.lastIndex=0;var b=a.replace(N.rtags,e);c(b,d),d=b}}function q(b,c,d,e,f,g){var h=[],i=[];if(n(b,h,i),0!==h.length||0!==i.length){var j=p(b,e,f);h.length?g.push(r(c,d,j,h)):a.requestAnimationFrame(j)}}function r(a,b,c,d){return d.forEach(function(b){a(b,c)}),function(){d.forEach(function(a){b(a,c)})}}function s(a){var b=parseFloat(a);return Number.isNaN(b)?void 0:b}function t(a){var b=parseFloat(a);return Number.isNaN(b)?void 0:Math.round(b)}function u(a){return"false"===a?!1:"0"===a?!1:""===a?!1:!!a}function v(a){return"on"===a}function w(a){return Z(a)?a+"":void 0}function x(a){return"number"==typeof a?a+"":void 0}function y(a){return"number"==typeof a&&a%1===0?a+"":void 0}function z(a){return"boolean"==typeof a?a+"":"number"==typeof a?!!a+"":void 0}function A(a){return"boolean"==typeof a||"number"==typeof a?a?"on":"":void 0}function B(a,b,c,d,e){var f=a.type,g=!0;return"radio"===f||"checkbox"===f?function(){var c,f=e(b(d));g&&(g=!1,!Z(f)&&a.checked)||requestAnimationFrame(function(){c=a.value===f,a.checked!==c&&(a.checked=c)})}:function(){var c=e(b(d));(!g||(g=!1,Z(c)))&&requestAnimationFrame(function(){if("string"==typeof c){if(a.value===c)return;a.value=c}else a.value=""})}}function C(a,b,c,d){var e=a.type;return"radio"===e?function(e){a.checked&&b(c,d(a.value))}:"checkbox"===e?function(e){b(c,d(a.checked?a.value:void 0))}:function(e){b(c,d(a.value))}}function D(b,c,d,e,f,g,h,i){
var j=B(b,c,d,g,h),k=C(b,d,g,i);b.addEventListener("change",k),b.addEventListener("input",k);var l=a.requestAnimationFrame(function(){l=!1,Z(c(g))||k()});return e(g,j),function(){b.removeEventListener("change",k),b.removeEventListener("input",k),l&&a.cancelAnimationFrame(l),f(g,j)}}function E(a,b,c){var d={setups:[],bindings:[],nodes:[]};return d.teardowns=Array.prototype.concat.apply([],a.map(function(a){return ba[a.nodeType](a,function(a,b){d.bindings.push([a,b,L.Throttle(b)])},function(a){for(var b=d.bindings,c=b.length;c--;)if(b[c][1]===a)return void b.splice(c,1)},b,c,function(a){d.setups.push(a)},function(a){d.nodes.push(a)})})),d}function F(a,b,c,d,e,f,g){if("verbose"===N.debug&&!a.name)return void console.warn("Sparky: Cannot bind value of node with empty name.",a);var h,i;for(N.rtags.lastIndex=0;h=N.rtags.exec(a.name);)if(2===h[1].length){i=D(a,b,c,d,e,h[2],f,g),a.name=a.name.replace(h[0],h[2]);break}return i}function G(a,b){H=N.render(Q,arguments),I=N.render(R,arguments),J=N.render(S,arguments)}var H,I,J,K=Object.assign,L=a.Fn,M=a.dom,N=a.Sparky,O=["href","title","id","style","src","alt"],P={viewbox:"viewBox"},Q=/({{0}})\s*([\w\-\.]+)\s*(?:\|([^\}]+))?\s*{{1}}/g,R=/{{0}}\s*([\w\-\.\[\]]+)\s*{{1}}/g,S=/[^\s]*{{0}}[^\}]+{{1}}[^\s]*/g,T=/\s*([a-zA-Z0-9_\-]+)\s*(?::(.+))?/,U=/\s+/,V=/\S/,W=/function(?:\s+\w+)?\s*(\([\w,\s]*\))/,X={},Y=L.id,Z=L.isDefined,$=L.toClass,_=Function.prototype.call.bind(Array.prototype.slice),aa={label:function(a,b,c,d,e,g,h,j){i(a,"for",b,c,d,j),f(a,b,c,d,e,g,h,j)},button:function(a,b,c,d,e,g,h,i){j(a,"disabled",b,c,d,i),f(a,b,c,d,e,g,h,i)},input:function(a,b,c,d,e,f,g,h){var k=a.type;i(a,"value",b,c,d,h),i(a,"min",b,c,d,h),i(a,"max",b,c,d,h),i(a,"step",b,c,d,h),j(a,"disabled",b,c,d,h),j(a,"required",b,c,d,h);var l="number"===k||"range"===k?F(a,d,e,b,c,x,s):"checkbox"!==k&&"radio"!==k||Z(a.getAttribute("value"))?F(a,d,e,b,c,Y,Y):F(a,d,e,b,c,A,v);l&&h.push(l),i(a,"name",b,c,d,h)},select:function(a,b,c,d,e,g,h,k){i(a,"value",b,c,d,k),j(a,"disabled",b,c,d,k),j(a,"required",b,c,d,k),f(a,b,c,d,e,g,h,k);var l=F(a,d,e,b,c,Y,Y);l&&k.push(l),i(a,"name",b,c,d,k)},option:function(a,b,c,d,e,g,h,k){i(a,"value",b,c,d,k),j(a,"disabled",b,c,d,k),f(a,b,c,d,e,g,h,k)},textarea:function(a,b,c,d,e,f,g,h){j(a,"disabled",b,c,d,h),j(a,"required",b,c,d,h);var k=F(a,d,e,b,c,Y,Y);k&&h.push(k),i(a,"name",b,c,d,h)},time:function(a,b,c,d,e,g,i,j){h(a,b,c,d,j,["datetime"]),f(a,b,c,d,e,g,i,j)},svg:function(a,b,c,d,e,g,i,j){h(a,b,c,d,j,["viewbox"]),f(a,b,c,d,e,g,i,j)},g:function(a,b,c,d,e,g,i,j){h(a,b,c,d,j,["transform"]),f(a,b,c,d,e,g,i,j)},path:function(a,b,c,d,e,f,g,i){h(a,b,c,d,i,["d","transform"])},line:function(a,b,c,d,e,f,g,i){h(a,b,c,d,i,["x1","x2","y1","y2","transform"])},rect:function(a,b,c,d,e,f,g,i){h(a,b,c,d,i,["x","y","width","height","rx","ry","transform"])},text:function(a,b,c,d,e,g,i,j){h(a,b,c,d,j,["x","y","dx","dy","text-anchor"]),f(a,b,c,d,e,g,i,j)},use:function(a,b,c,d,e,f,g,i){h(a,b,c,d,i,["href","transform"])},template:N.noop,script:N.noop},ba={1:function(a,b,c,d,e,i,j){var k=[],l=a.tagName.toLowerCase();return"verbose"===N.debug&&console.group("Sparky: dom node: ",a),g(a,b,c,d,k),h(a,b,c,d,k,O),aa[l]?aa[l](a,b,c,d,e,i,j,k):f(a,b,c,d,e,i,j,k),"verbose"===N.debug&&console.groupEnd(),k},3:function(a,b,c,d,e,f,g){var h=[];return"verbose"===N.debug&&console.group("Sparky: text node:",a),q(a.nodeValue,b,c,d,function(b){a.nodeValue=b},h),"verbose"===N.debug&&console.groupEnd(),h},11:function(a,b,c,d,e,g,h){var i=[];return"verbose"===N.debug&&console.group("Sparky: fragment: ",a),f(a,b,c,d,e,g,h,i),"verbose"===N.debug&&console.groupEnd(),i}};Object.defineProperties(N,{rtags:{get:function(){return H},enumerable:!0},rsimpletags:{get:function(){return I},enumerable:!0}}),G(/\{\[{1,2}/,/\]{1,2}\}/),K(N,{parse:E,parseName:F,bindValue:D,attributes:O,stringToInt:t,stringToFloat:s,stringToBool:u,stringOnToBool:v,definedToString:w,intToString:y,floatToString:x,boolToString:z,boolToStringOn:A,tags:G,rspaces:U})}(this),function(a){var b=a.Sparky;b.fn.ignore=function(){this.interrupt()}}(this),function(a){var b=a.Sparky,c=!!(document.all&&document.compatMode||a.navigator.msPointerEnabled);
b.fn.log=function(a,d){function e(d){console[c?"log":"group"]("Sparky: scope "+b.nodeToString(a)),console.log("data ",f.data),console.log("scope",d),console.log("fn   ",f.fn),console[c?"log":"groupEnd"]("---")}var f=this;return console[c?"log":"group"]("Sparky: run   "+b.nodeToString(a)),console.log("data ",f.data),console[c?"log":"groupEnd"]("---"),d.tap(e)}}(this),function(a){"use strict";var b=Object.assign,c=a.dom,d=a.Sparky;b(d.fn,{"show-on-scope":function(b,d){d.tap(function(){a.requestAnimationFrame(function(){c.classes(b).remove("sparky-hidden")})})}})}(this),function(a){"use strict";var b=Object.assign,c=a.Sparky;b(c.fn,{html:function(a,b){b.tap(function(b){a.innerHTML=b})}})}(this),function(a){"use strict";function b(a){a.preventDefault()}var c=a.Fn;Sparky.scope=function(a){return console.warn("Sparky: Sparky.scope() deprecated in favour of Sparky.getScope()"),Sparky.getScope(a)},Sparky.setScope=function(b,c){if(!a.jQuery)throw new Error('data-fn="store-scope" requires jQuery.');a.jQuery&&jQuery.data(b,"scope",c)},Sparky.getScope=function(b){if(!a.jQuery)throw new Error('data-fn="store-scope" requires jQuery.');return jQuery.data(b,"scope")},Object.assign(Sparky.fn,{"prevent-click":function(a){a.addEventListener("click",b),this.on("destroy",function(){a.removeEventListener("click",b)})},"prevent-submit":function(a){a.addEventListener("submit",b),this.on("destroy",function(){a.removeEventListener("submit",b)})},"ajax-on-submit":function(a,d){var e=a.getAttribute("method")||"POST",f=a.getAttribute("action");if(!c.isDefined(f))throw new Error('Sparky: fn ajax-on-submit requires an action="url" attribute.');var g;a.addEventListener("submit",b),d.tap(function(b){g&&a.removeEventListener(g),g=function(a){jQuery.ajax({type:e.toLowerCase(),url:f,data:JSON.stringify(b),dataType:"json"}).then(function(a){console.log(a)})},a.addEventListener("submit",g)}),this.on("destroy",function(){a.removeEventListener("submit",g)})},scope:function(a,b){b.tap(function(b){Sparky.setScope(a,b)})}})}(this),function(){"use strict";Sparky.fn["x-scroll-slave"]=function(a){function b(){a.scrollLeft=c.scrollLeft}var c,d=a.getAttribute("data-x-scroll-master");this.on("dom-add",function(){if(c=document.getElementById(d),!c)throw console.error(a),new Error('Sparky scroll-x-slave: id="'+d+'" not in the DOM.');c.addEventListener("scroll",b),b()}).on("destroy",function(){c&&c.removeEventListener("scroll",b)})},Sparky.fn["y-scroll-slave"]=function(a){function b(){a.scrollTop=d.scrollTop}var c=a.getAttribute("data-y-scroll-master"),d=document.getElementById(c);if(!d)throw console.error(a),new Error('Sparky scroll-x-slave: id="'+c+'" not in the DOM.');d.addEventListener("scroll",b),b(),this.on("destroy",function(){d.removeEventListener("scroll",b)})}}(),function(a){"use strict";function b(a){if(!e.debug)return d.create("text","");var b=a.getAttribute("data-scope"),c=a.getAttribute("data-fn");return d.create("comment",(b?' data-scope="'+b+'"':"")+(c?' data-fn="'+c+'" ':""))}var c=a.Fn,d=a.dom,e=a.Sparky,f=8e3;e.fn.each=function(g,h){function i(){clearTimeout(w),w=setTimeout(function(){s.forEach(function(a){var b=r.get(a);b&&(b.destroy(),r["delete"](a))}),s.length=0},f)}function j(a){var b=s.indexOf(a);-1!==b&&s.splice(b,1)}function k(){m.on?(m.on("add remove sort",x),x()):e.observe(m,"length",x)}function l(){m.on?m.off("add remove sort",x):e.unobserve(m,"length",x)}var m,n=this,o=this.data,p=[],q=[],r=new Map,s=[],t=g.cloneNode(!0),u=this.interrupt(),v=b(g);u.unshift(function(){this.data=Object.create(o)});var w,x=c.Throttle(function(){var b,c,f,g=-1,h=q.length,k={};for(e.debug&&(f=a.performance.now());h--;)c=q[h],b=m.indexOf(c),-1===b?(r.set(c,p[h]),d.remove(p[h][0]),s.push(c)):k[b]=p[h];for(h=p.length=q.length=m.length;q[++g]&&q[g]===m[g];);--g;for(var l=!1;++g<h;)(l||q[g]!==m[g])&&(l=!0,c=q[g]=m[g],j(c),p[g]=r.get(c),e.log("sparky for object"),p[g]?(e.log("    ...found in rejects"),r["delete"](c)):p[g]=k[g]||n.create(t.cloneNode(!0),c,u),v.previousSibling!==p[g][0]?d.before(v,p[g][0]):e.log("    ...already in dom position",p[g][0]));e.log("collection rendered (length: "+m.length+", time: "+(a.performance.now()-f)+"ms)"),
i()});t.removeAttribute("data-scope"),t.removeAttribute("data-fn"),d.before(g,v),d.remove(g),h.dedup().each(function(a){m&&l(),m=a,m&&k()}),this.on("destroy",function(){x.cancel(),l()})}}(this),function(a){"use strict";function b(a,b,c,d,e){var f,g,h,i=q.parseName(b,function(a){return o.getPath(a,f)},function(a,b){return f&&o.setPath(a,b,f)},function(a,b){g=a,h=b},r,d,e);return a.on("destroy",function(){i(),f&&q.unobservePath(f,g,h)}),c.tap(function(a){f&&q.unobservePath(f,g,h),f=a,f&&q.observePath(f,g,h,!0)})}function c(a,c){b(this,a,c,w,o.id)}function d(a,c){b(this,a,c,o.id,o.id)}function e(a,c){b(this,a,c,x,t)}function f(a,c){b(this,a,c,x,s)}function g(a,c){"checkbox"!==a.type||o.isDefined(a.getAttribute("value"))?b(this,a,c,y,u):b(this,a,c,z,v)}function h(a,c){function d(b){if(void 0===b)return"";f=b;var c=f.indexOf(a.value);return c>-1?a.value:""}function e(b){void 0===f&&(f=p());var c;return void 0===b?(c=f.indexOf(a.value),-1!==c&&f.splice(c,1)):-1===f.indexOf(b)&&f.push(b),f}var f;b(this,a,c,d,e)}function i(a,c){function d(b){if(void 0===b)return"";var c=s(a.value);f=b;var d=f.indexOf(c);return d>-1?x(c):""}function e(b){void 0===f&&(f=p());var c;return void 0===b?(c=f.indexOf(s(a.value)),-1!==c&&f.splice(c,1)):-1===f.indexOf(b)&&f.push(b),f}var f;b(this,a,c,d,o.compose(e,s))}function j(a,c){function d(){var b=a.min?parseFloat(a.min):0,c=a.max?parseFloat(a.max):1;g=o.normalise(b,c),h=o.denormalise(b,c)}function e(a){return"number"!=typeof a?"":(d(),h(Math.pow(g(a),.5))+"")}function f(a){var b=parseFloat(a);if(!Number.isNaN(b))return d(),h(Math.pow(g(b),2))}var g,h;b(this,a,c,e,f)}function k(a,c){function d(){var b=a.min?parseFloat(a.min):0,c=a.max?parseFloat(a.max):1;g=o.normalise(b,c),h=o.denormalise(b,c)}function e(a){return"number"!=typeof a?"":(d(),h(Math.pow(g(a),1/3))+"")}function f(a){var b=parseFloat(a);if(!Number.isNaN(b))return d(),h(Math.pow(g(b),3))}var g,h;b(this,a,c,e,f)}function l(a,c){function d(){return g=a.min?parseFloat(a.min):1,h=a.max?parseFloat(a.max):10,i=o.normalise(g,h),j=o.denormalise(g,h),0>=g?void console.warn('Sparky.fn["value-float-log"] cannot accept a min attribute of 0 or lower.',a):void 0}function e(a){return"number"!=typeof a?"":(d(),j(Math.log(a/g)/Math.log(h/g))+"")}function f(a){var b=parseFloat(a);if(!Number.isNaN(b))return d(),g*Math.pow(h/g,i(b))}var g,h,i,j;b(this,a,c,e,f)}function m(a,c){function d(){return g=a.min?parseFloat(a.min):1,h=a.max?parseFloat(a.max):10,i=o.normalise(g,h),j=o.denormalise(g,h),0>=g?void console.warn('Sparky.fn["value-int-log"] cannot accept a min attribute of 0 or lower.',a):void 0}function e(a){return"number"!=typeof a?"":(d(),j(Math.log(Math.round(a)/g)/Math.log(h/g))+"")}function f(a){var b=parseFloat(a);if(!Number.isNaN(b))return d(),Math.round(g*Math.pow(h/g,i(b)))}var g,h,i,j;b(this,a,c,e,f)}var n=Object.assign,o=a.Fn,p=a.Collection,q=a.Sparky,r=o.noop,s=q.stringToInt,t=q.stringToFloat,u=q.stringToBool,v=q.stringOnToBool,w=q.definedToString,x=q.floatToString,y=q.boolToString,z=q.boolToStringOn;n(q.fn,{"value-any":c,"value-string":d,"value-int":f,"value-float":e,"value-boolean":g,"value-int-log":m,"value-float-log":l,"value-float-pow-2":j,"value-float-pow-3":k,"value-in-array":h,"value-int-in-array":i})}(this),function(a){"use strict";function b(a){for(var b=[],c=0;c++<31;)b[c]=a[c]||a.n;return b}function c(a){for(var b="";a--;)b+=" ";return b}function d(a){var b=new Date(a),c=b.toJSON(),d=c.slice(0,a.length)===a&&!c.slice(a.length).match(k);return"string"!=typeof a?new Date(a):d?new Date(+b+6e4*b.getTimezoneOffset()):b}var e=a.Fn,f=a.Sparky,g=e.isDefined,h=f.settings=f.settings||{};h.en={days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),months:"January February March April May June July August September October November December".split(" "),ordinals:b({n:"th",1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"})},h.fr={days:"dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),months:"janvier février mars avril mai juin juillet août septembre octobre novembre décembre".split(" "),ordinals:b({n:"ième",1:"er"
})},h.de={days:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),months:"Januar Februar März April Mai Juni Juli Oktober September Oktober November Dezember".split(" "),ordinals:b({n:"er"})},h.it={days:"domenica lunedì martedì mercoledì giovedì venerdì sabato".split(" "),months:"gennaio febbraio marzo aprile maggio giugno luglio agosto settembre ottobre novembre dicembre".split(" "),ordinals:b({n:"o"})};var i=document.documentElement.lang;h.lang=i&&h[i]?i:"en";var j=/([YMDdHhms]{2,4}|[a-zA-Z])/g,k=/[1-9]/;f.filter={add:function(a,b){var c=parseFloat(a)+b;if(!Number.isNaN(c))return c},capfirst:function(a){return a.charAt(0).toUpperCase()+a.substring(1)},cut:function(a,b){return f.filter.replace(a,b,"")},formatdate:function(a){var b={YYYY:function(a){return("000"+a.getFullYear()).slice(-4)},YY:function(a){return("0"+a.getFullYear()%100).slice(-2)},MM:function(a){return("0"+(a.getMonth()+1)).slice(-2)},MMM:function(a){return this.MMMM(a).slice(0,3)},MMMM:function(b){return a[i].months[b.getMonth()]},DD:function(a){return("0"+a.getDate()).slice(-2)},d:function(a){return""+a.getDay()},dd:function(a){return("0"+a.getDay()).slice(-2)},ddd:function(a){return this.dddd(a).slice(0,3)},dddd:function(b){return a[i].days[b.getDay()]},HH:function(a){return("0"+a.getHours()).slice(-2)},mm:function(a){return("0"+a.getMinutes()).slice(-2)},ss:function(a){return("0"+a.getSeconds()).slice(-2)},sss:function(a){return(a.getSeconds()+a.getMilliseconds()/1e3+"").replace(/^\d\.|^\d$/,function(a){return"0"+a})}};return function(c,e,f){if(c){var g=c instanceof Date?c:d(c);return f=f||a.lang,e.replace(j,function(a,c){return b[c]?b[c](g,f):c})}}}(h),formattime:function(a,b,c){return Time(a).render(b,c)},date:function(a){var b={a:function(a){return a.getHours()<12?"a.m.":"p.m."},A:function(a){return a.getHours()<12?"AM":"PM"},b:function(b,c){return a[c].months[b.getMonth()].toLowerCase().slice(0,3)},c:function(a){return a.toISOString()},d:function(a){return a.getDate()},D:function(b,c){return a[c].days[b.getDay()].slice(0,3)},F:function(b,c){return a[c].months[b.getMonth()]},g:function(a){return a.getHours()%12},G:function(a){return a.getHours()},h:function(a){return("0"+a.getHours()%12).slice(-2)},H:function(a){return("0"+a.getHours()).slice(-2)},i:function(a){return("0"+a.getMinutes()).slice(-2)},j:function(a){return a.getDate()},l:function(b,c){return a[c].days[b.getDay()]},m:function(a){return("0"+a.getMonth()).slice(-2)},M:function(b,c){return a[c].months[b.getMonth()].slice(0,3)},n:function(a){return a.getMonth()},O:function(a){return(a.getTimezoneOffset()<0?"+":"-")+("0"+Math.round(100*Math.abs(a.getTimezoneOffset())/60)).slice(-4)},r:function(a){return a.toISOString()},s:function(a){return("0"+a.getSeconds()).slice(-2)},S:function(b){return a.ordinals[b.getDate()]},U:function(a){return+a},w:function(a){return a.getDay()},y:function(a){return("0"+a.getFullYear()%100).slice(-2)},Y:function(a){return a.getFullYear()},Z:function(a){return 60*-a.getTimezoneOffset()}};return function(c,e,f){if(c){var g=c instanceof Date?c:d(c);return f=f||a.lang,e.replace(j,function(a,c){return b[c]?b[c](g,f):c})}}}(h),decibels:function(a){return"number"==typeof a?20*Math.log10(a):void 0},decimals:function(a,b){return"number"==typeof a?Number.prototype.toFixed.call(a,b):void 0},divide:function(a,b){return"number"==typeof a?a/b:void 0},escape:function(){var a=document.createElement("pre"),b=document.createTextNode("");return a.appendChild(b),function(c){return b.textContent=c,a.innerHTML}}(),"find-in":function(a,b){if(g(a)){var c=e.getPath(b,f.data);return c&&c.find(a)}},first:function(a){return a[0]},floatformat:function(a,b){return"number"==typeof a?Number.prototype.toFixed.call(a,b):g(a)?f.debug&&console.warn("Sparky: filter floatformat: "+b+" called on non-number "+a):""},floor:function(a){return Math.floor(a)},get:function(a,b){return g(a)?e.get(b,a):void 0},"greater-than":function(a,b){return a>b},contains:function(a,b){return a&&a.indexOf(b)>-1},invert:function(a){return"number"==typeof a?1/a:!a},is:e.is,equals:e.equals,join:function(a,b){
return Array.prototype.join.call(a,b)},json:function(a){return JSON.stringify(a)},last:function(a){return a[a.length-1]},length:function(a){return a.length},"less-than":function(a,b,c,d){return b>a?c:d},localise:function(a,b){var c=document.documentElement.lang,d={};return g(b)&&(d.minimumFractionDigits=b,d.maximumFractionDigits=b),a.toLocaleString?a.toLocaleString(c,d):a},lowercase:function(a){return"string"==typeof a?String.prototype.toLowerCase.apply(a):void 0},map:function(a,b,c){return a&&a.map(e[b](c))},mod:function(a,b){return"number"==typeof a?a%b:void 0},multiply:function(a,b){return a*b},not:e.not,parseint:function(a){return parseInt(a,10)},percent:function(a){return 100*a},pluralise:function(a,b,c,d){return"number"==typeof a?(b=b||"",c=c||"s","fr"===d?2>a&&a>=0?b:c:1===a?b:c):void 0},postpad:function(a,b){var d=g(a)?a.toString():"",e=d.length,f=parseInt(b,10);return f===e?a:f>e?d+c(f-e):d.substring(0,f)},prepad:function(a,b,c){var d=g(a)?a.toString():"",e=d.length,f=[];return 1>b-e?a:(f.length=0,f.length=b-e,f.push(d),f.join(c||" "))},random:function(a){return a[Math.floor(Math.random()*a.length)]},reduce:function(a,b,c){return a&&a.reduce(e[b],c||0)},replace:function(a,b,c){return"string"==typeof a?a.replace(RegExp(b,"g"),c):void 0},round:function(a){return"number"==typeof a?Math.round(a):void 0},slice:function(a,b,c){return"string"==typeof a?a.slice(b,c):Array.prototype.slice.call(a,b,c)},slugify:function(a){return"string"==typeof a?a.trim().toLowerCase().replace(/\W/g,"-").replace(/[_]/g,"-"):void 0},striptags:function(){var a=/<(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(b){return b.replace(a,"")}}(),"switch":function(a){return"string"==typeof a&&(a=parseInt(a,10)),"number"!=typeof a||Number.isNaN(a)?void 0:arguments[a+1]},symbolise:function(a){var b=a+"",c=1/0+"";return b===c?"∞":b==="-"+c?"-∞":a},time:function(){},trans:function(){var a={};return function(b){var c=f.data.translations;if(!c)return a.missingTranslations||(console.warn("Sparky: Missing lookup object Sparky.data.translations"),a.missingTranslations=!0),b;var d=c[b];return d?d:(a[b]||(console.warn('Sparky: Sparky.data.translations contains no translation for "'+b+'"'),a[b]=!0),b)}}(),truncatechars:function(a,b){return a.length>b?a.slice(0,b)+"…":a},type:function(a){return typeof a},uppercase:function(a){return"string"==typeof a?String.prototype.toUpperCase.apply(a):void 0},yesno:function(a,b,c){return a?b:c}}}(this),Sparky.debug=!1;