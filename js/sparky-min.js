!function(a,b){function g(a){return a!==b&&null!==a}function h(a){return a instanceof Object}function i(a,b){var c=a[b[0]],d=b.slice(1);return g(c)&&d.length?i(c,d):c}function j(a,b){return i(a,b.split("."))}function k(a,b,c){var d=b[0];return b.length>1?k(h(a[d])?a[d]:a[d]={},b.slice(1),c):a[d]=c}function l(a,b,c){return k(a,b.split("."),c)}function m(a,b){l(a,b.getAttribute("data-template"),b),b.removeAttribute("data-template"),b.parentNode.removeChild(b)}function n(a,c,d){function m(a,b){sparky.observe(k,a,b)}function n(a,b){sparky.unobserve(k,a,b)}function o(a){return sparky.get(k,a)}function p(){l&&l()}var k,l,f=d.getAttribute("data-view"),g=d.getAttribute("data-data"),h=f&&j(c,f),i=g?j(a,g):a;if(i===b)throw new Error("'"+g+"' not found in sparky.data");console.log("view:",f),console.log("data:",g,i),k=h&&h(d,i,p)||i,console.log("context:",k),l=sparky.template(d,m,n,o)}function o(b,e){if("string"==typeof b&&(b=a(b)[0],!b))throw new Error("Node not found from selector '"+arguments[0]+"'.");d.ready(function(){if(c)var d=Date.now();a("[data-template]",b).each(function(){m(templates,this)}),a("[data-data]",b).each(function(){c&&console.group("[sparky] template node",this.id),n(o.data,o.views,this,e),c&&console.groupEnd()}),c&&console.log("[sparky] Initialised templates and views ("+(Date.now()-d)+"ms)")})}var c=!0,d=a(document);window.require?module.exports=o:window.sparky=o}(jQuery),function(a){"use strict";function j(a,b,c,d,e,f){return p(c,d,e,f,function(c){a.setAttribute(b,c)})}function k(a,b,c,d){var e=a.innerText?"innerText":"textContent";return p(a[e],b,c,d,function(b){a[e]=b})}function m(a){var b={},c=[];return a.replace(d,function(a,d){b[d]||(b[d]=!0,c.push(d))}),c}function n(b){var c=e.exec(b);return{fn:a.filters[c[1]],args:c[2]&&JSON.parse("["+c[2].replace(/\'/g,'"')+"]")}}function o(a,b){for(var c=f[b]||(f[b]=b.split("|").map(n)),d=c.length,e=-1;++e<d;)a=c[e].fn.apply(a,c[e].args);return a}function p(a,b,c,e,f){function i(a,b,c){var d=e(b);return c?o(d,c):void 0===d?"":d}function j(){h=!1,f(a.replace(d,i))}function k(){h||(h=!0,window.requestAnimationFrame(j))}var g=m(a),h=!1;return g.forEach(function(a){b(a,k)}),function(){g.forEach(function(a){c(a,k)})}}function q(a,c,d,e){g=0,h=0;var f=i[1](a,c,d,e);return b&&(console.log("dom nodes:  "+g),console.log("text nodes: "+h)),function(){for(;l--;)f[l]()}}var b=window.console&&console.log,c=["href","title","id","class","style","value"],d=/\{\{\s*([a-z]+)\s*(?:\|([^\}]+))?\s*\}\}/g,e=/\s*([a-zA-Z0-9_]+)\s*(?:\:(.+))?/,f={},g=0,h=0,i={1:function(a,b,d,e){for(var k,l,f=c.length,h=[];f--;)k=c[f],l=a.getAttribute(k),l&&h.push(j(a,k,l,b,d,e));for(var p,m=a.childNodes,n=-1,o=m.length;++n<o;)p=m[n],i[p.nodeType]&&(h=h.concat(i[p.nodeType](p,b,d,e)));return g++,h},3:function(a,b,c,d){var e=k(a,b,c,d);return h++,[e]}};a.template=q}(window.sparky||require("sparky")),function(a,b){"use strict";window.console&&console.log;var d=a.settings=a.settings||{};d.months="January February March April May June July August September October November December".split(" "),d.days="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d.ordinals=function(a){for(var b=[],c=0;c++<31;)b[c]=a[c]||"th";return b}({1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"}),a.filters={add:function(a){return parseFloat(this)+a},capfirst:function(){return this.charAt(0).toUpperCase()+string.substring(1)},cut:function(a){return this.replace(RegExp(a,"g"),"")},date:function(){var g={a:function(a){return a.getHours()<12?"a.m.":"p.m."},A:function(a){return a.getHours()<12?"AM":"PM"},b:function(a){return d.months[a.getMonth()].toLowerCase().slice(0,3)},c:function(a){return a.toISOString()},d:function(a){return a.getDate()},D:function(a){return d.days[a.getDay()].slice(0,3)},F:function(a){return d.months[a.getMonth()]},g:function(a){return a.getHours()%12},G:function(a){return a.getHours()},h:function(a){return("0"+a.getHours()%12).slice(-2)},H:function(a){return("0"+a.getHours()).slice(-2)},i:function(a){return("0"+a.getMinutes()).slice(-2)},j:function(a){return a.getDate()},l:function(a){return d.days[a.getDay()]},m:function(a){return("0"+a.getMonth()).slice(-2)},M:function(a){return d.months[a.getMonth()].slice(0,3)},n:function(a){return a.getMonth()},O:function(a){return(a.getTimezoneOffset()<0?"+":"-")+("0"+Math.round(100*Math.abs(a.getTimezoneOffset())/60)).slice(-4)},r:function(a){return a.toISOString()},s:function(a){return("0"+a.getSeconds()).slice(-2)},S:function(a){return d.ordinals[a.getDate()]},U:function(a){return+a},w:function(a){return a.getDay()},y:function(a){return a.getFullYear()%100},Y:function(a){return a.getFullYear()},Z:function(a){return 60*-a.getTimezoneOffset()}};return function h(a){var h=this instanceof Date?this:new Date(this);return a.replace(/([a-zA-Z])/g,function(a,b){return g[b](h)})}}(d),"default":function(a){return this===b||null===this?a:this},escape:function(){var a=document.createElement("pre"),b=document.createTextNode(this);return a.appendChild(b),function(){return b.textContent=this,a.innerHTML}}(),first:function(){return this[0]},floatformat:Number.prototype.toFixed,join:Array.prototype.join,json:function(){return JSON.stringify(this)},last:function(){return this[this.length-1]},length:function(){return this.length},linebreaksbr:function(){var a=/\n/;return function(){return this.replace(a,"<br/>")}}(),lower:String.prototype.toLowerCase,multiply:function(a){return console.log(this,a,this*a),this*a},pluralize:function(){return this+(this>1?"s":"")},random:function(){return this[Math.floor(Math.random()*this.length)]},replace:function(a,b){return this.replace(RegExp(a,"g"),b)},safe:function(){},slice:Array.prototype.slice,slugify:function(){return this.trim().toLowerCase.replace(/\W/g,"").replace(/_/g,"-")},striptags:function(){var a=/<(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(){return this.replace(a,"")}}(),striptagsexcept:function(){function d(a,c,d){return d&&-1!==b.indexOf(d)?"<"+(c||"")+d+">":""}var b,c,a=/<(\/)?(\w*)(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(e){return e?(b=e.split(" "),c=this.replace(a,d),b=!1,c):this.replace(a,"")}}(),time:function(){},truncatechars:function(a){return this.length>a?this.length.slice(0,a)+"&hellips;":this},unordered_list:function(){for(var a=this,b=a.length,c=-1,d="";++c<b;)d+="<li>",d+=a[c],d+="</li>";return d},yesno:function(a,b){return this?a:b}}}(window.sparky||require("sparky")),function(a){jQuery.extend(a.views,{test:function(b,c){console.log(b,c);var d=jQuery(b);d.html(a.render("test",{text:"You cock"}))}})}(app);