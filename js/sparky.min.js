Object.assign||function(a){"use strict";function b(a){return void 0!==a&&null!==a}function c(b){var c,d,e,f=a.keys(b);if(a.getOwnPropertySymbols)for(c=a.getOwnPropertySymbols(b),d=c.length;d--;)e=a.getOwnPropertyDescriptor(b,c[d]),e.enumerable&&f.push(symbol);return f}a.defineProperty(a,"assign",{value:function(d){if(!b(d))throw new TypeError("Object.assign: First argument "+d+" cannot be converted to object.");var e,f,g,h,i,j=a(d);for(e=1;e<arguments.length;e++)if(f=arguments[e],b(f))for(g=c(a(f)),i=g.length;i--;)h=g[i],j[h]=f[h];return j},configurable:!0,writable:!0})}(Object),Number.isNaN||!function(a){"use strict";Object.defineProperty(Number,"isNaN",{value:function(b){return"number"==typeof b&&a(b)},configurable:!0,enumerable:!1,writable:!0})}(isNaN),Math.log10||(Math.log10=function(a){return Math.log(a)/Math.LN10}),function(a,b){a.CustomEvent&&"function"==typeof a.CustomEvent||(a.CustomEvent=function(a,c){c=c||{bubbles:!1,cancelable:!1,detail:b};var d=document.createEvent("CustomEvent");return d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),d},a.CustomEvent.prototype=a.Event.prototype)}(window),function(a){for(var b=40,c=["ms","moz","webkit","o"],d=c.length;d--&&!a.requestAnimationFrame;)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c){var d=+new Date,e=b-d%b,f=a.setTimeout(function(){c(e)},e);return f}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}(window),function(a){"use strict";var b=a.mixin||(a.mixin={});b.array={filter:Array.prototype.filter,map:Array.prototype.map,reduce:Array.prototype.reduce,pop:Array.prototype.pop,push:Array.prototype.push,concat:Array.prototype.concat,sort:Array.prototype.sort,slice:Array.prototype.slice,splice:Array.prototype.splice,some:Array.prototype.some,indexOf:Array.prototype.indexOf,forEach:Array.prototype.forEach,each:function(){return Array.prototype.forEach.apply(this,arguments),this}}}(this),function(a){"use strict";function b(a){return a.listeners||Object.defineProperty(a,"listeners",{value:{}}),a.listeners}function c(a){return a.delegates||Object.defineProperty(a,"delegates",{value:[]}),a.delegates}function d(a,b){var d=c(a);-1===d.indexOf(b)&&d.push(b)}function e(a,b){var d=c(a);if(void 0===b)return void(d.length=0);var e=d.indexOf(b);-1!==e&&d.splice(e,1)}var f=a.mixin||(a.mixin={}),g={},h=Function.prototype.call.bind(Array.prototype.slice);f.events={on:function(a,c){if(1===arguments.length&&a.trigger)return d(this,a),this;if(!c)throw new Error('Sparky: calling .on("'+a+'", fn) but fn is '+typeof c);var e,f,g=b(this);if("string"!=typeof a)return this;for(a=a.trim().split(/\s+/),f=[c,h(arguments,2)];e=a.shift();)g[e]||(g[e]=[]),g[e].push(f);return this},off:function(a,b){var c,d;if(0===arguments.length){if(e(this),this.listeners)for(c in this.listeners)this.listeners[c].length=0,delete this.listeners[c];return this}if(1===arguments.length&&a.trigger)return e(this,a),this;if(!this.listeners)return this;for("string"==typeof a?a=a.trim().split(/\s+/):(b=a,a=Object.keys(this.listeners));c=a.shift();)d=this.listeners[c],d&&(b?d.forEach(function(a,c){a[0]===b&&d.splice(c,c+1)}):(this.listeners[c].length=0,delete this.listeners[c]));return this},trigger:function(a){var c,d,e,f,i,j,k=b(this),l=h(arguments);"string"==typeof a?(c=a,d=this):(c=a.type,d=a.target);var m=this.delegates&&this.delegates.slice();if(k[c])for(e=k[c].slice(),f=-1,i=e.length,l[0]=d;++f<i;)j=l.concat(e[f][1]),e[f][0].apply(this,j);if(!m)return this;for(f=-1,i=m.length,"string"==typeof a&&(l[0]=g,g.type=c,g.target=d);++f<i;)m[f].trigger.apply(m[f],l);return this}}}(this),function(a){function b(a){a[0].apply(null,a[1])}function c(a,b,c,d,e){var f=a[b],g=[d],h={enumerable:c?c.enumerable:!0,configurable:!1,get:c&&c.get?c.get:function(){return f},set:c&&c.set?function(a){c.set.call(this,a),g.slice().forEach(e)}:function(a){a!==f&&(f=a,g.slice().forEach(e))}};h.set.observers=g,Object.defineProperty(a,b,h)}function d(a,d,e){var f=Object.getOwnPropertyDescriptor(a,d),h=g.call(arguments,0),i=[e,h];
if(h.splice(1,2),f){if(f.set&&f.set.observers)return void f.set.observers.push(i);if(f.configurable===!1)return void console.warn('Property "'+d+'" is not observable (configurable: false) in object:',a)}c(a,d,f,i,b)}function e(a,b,c){var e;if("[object Function]"!==h.call(b))d.apply(null,arguments);else{c=b,e=g.call(arguments,0),e.splice(1,0,null);for(b in a)e[1]=b,d.apply(null,e)}}function f(a,b,c){var d,e;if(void 0!==a[b])if(b instanceof Function){c=b;for(b in a)f(data,key,c)}else if(d=Object.getOwnPropertyDescriptor(a,b),e=d.set&&d.set.observers){var g;if(c)for(g=e.length;g--;)e[g][0]===c&&e.splice(g,1);else d.set.observers.length=0}}var g=Array.prototype.slice,h=Object.prototype.toString;a.observe=e,a.unobserve=f}(window),function(a,b,c){"use strict";function d(a){return a!==c&&null!==a}function e(a){return a}function f(a,b){this[b]=a}function g(a,b){for(var c=a.index,d=-1,e=a.length;++d<e;)if(a[d][c]===b)return a[d]}function h(a,b,c){c=c||Object.keys(b);for(var d,e=c.length;e--;){if(d=c[e],"function"==typeof b[d])return b[d](a,d);if(a[d]!==b[d])return!1}return!0}function i(a,b){var c=Object.keys(b);return 0===c.length?a.slice():a.filter(function(a){return h(a,b,c)})}function j(a,b){var c=a.index;if(!d(b[c]))return void(-1===a.indexOf(b)&&a.push(b));for(var e=a.length;a[--e]&&(a[e][c]>b[c]||!d(a[e][c])););a.splice(e+1,0,b)}function k(a,b,d){var e;for(d===c&&(d=-1);++d<a.length;)b===a[d]&&(a.splice(d,1),--d,e=!0);return e}function l(){}function m(a,b){return function(){l(this);var c=arguments.length;if(0===c)return b&&b.apply(this),this;for(var d=-1;++d<c;)a.call(this,arguments[d]);return this}}function o(a){return p.prototype.isPrototypeOf(a)}function p(a,b){function d(a,b){return a[i.index]>b[i.index]?1:-1}function e(a){return Array.prototype.sort.call(h,a||i.sort||d)}function g(a){for(;j-->a.length;)a[j]=c;j=a.length}if(this===c||this===window)return new p(a,b);a instanceof Array||(b=a,a=[]);var h=this,i=Object.assign({},q,b);Object.defineProperties(h,{length:r,index:{value:i.index},sort:{value:e}}),a.forEach(f,h);var j=h.length=a.length;observe(h,"length",g)}{var q={index:"id"};"add remove push pop splice".split(" ")}b.collection={add:m(function(a){j(this,a)}),remove:m(function(a){var b=this.find(a);d(b)&&k(this,b)},function(){for(var a=this.length;a--;)this.pop()}),push:function(){var a=arguments.length,b=-1;for(Array.prototype.push.apply(this,arguments);++b<a;)this.trigger("add",arguments[b]);return this},pop:function(){var a=this.length-1,b=this[a];return this.length=a,this.trigger("remove",b,a),b},splice:function(a){for(var b=Array.prototype.splice.apply(this,arguments),c=b.length,d=Array.prototype.slice.call(arguments,2),e=d.length,f=-1;c--;)this.trigger("remove",b[c],a+c);for(;++f<e;)this.trigger("add",d[f],f);return b},update:m(function(a){var b=this.find(a);return b?(Object.assign(b,a),this.trigger("update",b)):this.add(a),this}),find:function(a){if(this.indexOf(a)>-1)return a;var b=this.index;return 0===arguments.length?c:"string"==typeof a||"number"==typeof a||a===c?g(this,a):g(this,a[b])},query:function(a){return a?i(this,a):[]},sub:function(a,b){function c(b){var c=k.indexOf(b);h(b,a,l)?-1===c&&k.off("add",g).add(b).on("add",g):-1!==c&&k.off("remove",i).remove(b).on("remove",i)}function d(a,b){for(var d,e=l.length;e--;)d=l[e],observe(b,d,c);c(b)}function e(a,b){for(var d,e=l.length;e--;)d=l[e],unobserve(b,d,c);-1!==k.indexOf(b)&&k.off("remove",i).remove(b).on("remove",i)}function f(a){a.forEach(function(b){e(a,b)}),k.off("add",g).off("remove",i)}function g(a,b){j.add(b)}function i(a,b){j.remove(b)}var j=this,k=p([],b),l=Object.keys(a);return j.on("add",d).on("remove",e).on("destroy",f),j.length?j.forEach(function(a){d(j,a)}):k.on("add",g).on("remove",i),k.destroy=function(){f(j),j.off("add",d).off("remove",e).off("destroy",f),k.off()},k.synchronise=function(){j.forEach(function(a){c(a)})},k},contains:function(a){return-1!==this.indexOf(a)},get:function(a){var b=this.length;if(0!==b){for(;--b;)if(this[b][a]!==this[b-1][a])return;return this[b][a]}},set:function(a,b){if(2!==arguments.length)throw new Error("Collection.set(property, value) requires 2 arguments. "+arguments.length+" given.");
for(var c=this.length;c--;)this[c][a]=b;return this},toJSON:function(){return this.map(e)},toObject:function(a){var b,c,d={};for(a||(a=this.index);n--;)b=this[n][a],c=typeof b,"string"===c||"number"===c&&b>-1/0&&1/0>b?d[b]=this[n]:console.warn("collection.toObject() "+typeof b+" "+b+" cannot be used as a key.");return d}};var r={value:0,enumerable:!1,writable:!0,configurable:!0};Object.assign(p.prototype,b.events,b.array,b.collection),p.add=j,p.remove=k,p.isCollection=o,a.Collection=p}(this,this.mixin),function(a){"use strict";function b(){}function c(a){return void 0!==a&&null!==a}function d(a,b){Array.prototype.push.apply(b,a)}function e(a){return["<",a.tagName.toLowerCase(),a.getAttribute("data-ctrl")?' data-ctrl="'+a.getAttribute("data-ctrl")+'"':"",a.getAttribute("data-scope")?' data-scope="'+a.getAttribute("data-scope")+'"':"",a.id?' id="'+a.id+'"':"",">"].join("")}function f(a,b){return a.appendChild(b),a}function g(a,b){for(;a.lastChild;)a.removeChild(a.lastChild);return a.appendChild(b),a}function h(a){var b=C(a.childNodes),c=document.createDocumentFragment();return D(b,f,c)}function i(a){if(a.content)return a.content;var b=h(a);return l(a),b}function j(a){var b=document.getElementById(a);if(!b)throw new Error('Sparky: requested template id="'+a+'". That is not in the DOM.');return i(b)}function k(a){var b=y[a]||(y[a]=j(a));return b&&b.cloneNode(!0)}function l(a){a.parentNode&&a.parentNode.removeChild(a)}function m(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function n(a,b){b.parentNode&&b.parentNode.insertBefore(a,b.nextSibling)}function o(a,b){return c(a)&&c(b)?"."===b?a:x.get(a,b):void 0}function p(a,b){return a.on("destroy",function(){b.destroy()}).on("ready",function(){a.on(b)}),b}function q(a,b,c){function d(){var d,e,k=-1,n=i.length,o={};if(x.debug)var p=+new Date;for(;n--;)e=i[n],d=b.indexOf(e),-1===d?(l(g[n]),h[n].destroy(),j.off(h[n])):g[n]&&h[n]&&(o[d]=[g[n],h[n]]);for(n=b.length,g.length=n,h.length=n,i.length=n;++k<n;)i[k]=b[k],o[k]?(g[k]=o[k][0],h[k]=o[k][1]):(g[k]=a.cloneNode(!0),h[k]=x(g[k],b[k],c,!1),j.on(h[k])),m(g[k],f),document.body.contains(h[k][0])&&h[k].trigger("insert");x.debug&&console.log("Sparky: collection rendered (length: "+b.length+" time: "+(+new Date-p)+"ms)")}var e=a.getAttribute("data-scope"),f=document.createComment(' [Sparky] data-scope="'+e+'" '),g=[],h=[],i=[],j=Object.create(B);m(f,a),l(a),a.removeAttribute("data-scope"),a.removeAttribute("data-ctrl");var k=x.Throttle(d);return x.observe(b,"length",k),j.on("destroy",function(){k.cancel(),x.unobserve(b,"length",k)}),j}function r(a,b,d,e,f){var g;if(!c(f))return void p(a,x(b,d,void 0,!1));if("."===f)return void p(a,x(b,e));if(A.test(f)){if(g=o(e,f.replace(A,"")),!g)throw new Error("Sparky: No object at relative path '"+f+"' of model#"+e.id);return void p(a,x(b,g))}if(z.lastIndex=0,z.test(f)){z.lastIndex=0;var h=z.exec(f)[1];g=o(d,h);var i,j=document.createComment(' [Sparky] data-scope="'+f+'" '),k=b.cloneNode(!0),q=function(c){i&&i.destroy(),b||(b=k.cloneNode(!0)),i=x(b,c),n(b,j),l(j),p(a,i)},r=function(){m(j,b),l(b),i&&(i.destroy(),i=void 0,b=void 0)},s=function(a){return a?q(a):r()};return x.observePath(d,h,s),s(g),void a.on("destroy",function(){x.unobservePath(d,h,s),r()})}p(a,x(b,o(x.data,f)))}function s(a,c,e,f){function h(a,b,c){requestAnimationFrame(function(){g(b,c),a.trigger("template",b)})}function i(){h(a,c,w),h=b}function j(a){return"."===a?s:x.get(s,a)}function l(a,b){x.set(s,a,b)}function m(b){var c=b.getAttribute("data-scope");return r(a,b,s,e,c)}function n(){window.cancelAnimationFrame(u)}function o(a,b){x.observePath(s,a,b),w&&x.observePath(s,a,i)}function p(a,b){x.unobservePath(s,a,b)}function q(){document.body.contains(a[0])?a.trigger("insert"):u=window.requestAnimationFrame(q)}var s,u,v=c.getAttribute&&c.getAttribute("data-template"),w=v&&k(v);if(11===c.nodeType?d(c.childNodes,a):(a[0]=c,a.length=1),s=f&&f.call(a,c,e),s!==!1){s=s||e||{},x.debug&&v&&console.log("Sparky: template:",v);var y=document.body.contains(a[0]);a.on("insert",t),y||(a.on("insert",n),u=window.requestAnimationFrame(q)),a.bind(w||c,o,p,j,l,m,s),a.trigger("ready"),y&&a.trigger("insert")
}}function t(){this.off("insert")}function u(a){return 1===a.length?a[0]:function(b,c){for(var d,e=a.length,f=-1,g=c;++f<e;)d=a[f].call(this,b,g),d&&(g=d);return g}}function v(a){for(var b,c=[],d=a.length,e=-1;++e<d;){if(b=o(x.ctrl,a[e]),!b)throw new Error('Sparky: data-ctrl "'+a[e]+'" not found in Sparky.ctrl');c.push(b)}return u(c)}function w(a){var b,d=a.getAttribute("data-ctrl");if(c(d)){var e=d.trim().split(/\s+/);if(1===e.length){if(b=o(x.ctrl,e[0]),!b)throw console.log(a),new Error('Sparky: data-ctrl "'+e[0]+'" not found in Sparky.ctrl');return b}return v(e)}}function x(a,b,d,f){"verbose"===x.debug&&console.log("Sparky: Sparky(","string"==typeof a?a:e(a),",",b&&"{}",",",d&&(d.name||"anonymous function"),")");var g,h;if(f!==!1&&(f=!0),"string"==typeof a&&(h=a,a=x.template(h),a||(a=document.getElementById(h)),!a))throw new Error("Sparky: Sparky() called but id of node not found: #"+h);if(!a)throw new Error("Sparky: Sparky() called without node: "+a);if(!c(b)&&a.getAttribute&&(g=a.getAttribute("data-scope"),c(g)&&(b=o(x.data,g),x.debug&&!b&&console.log('Sparky: data-scope="'+g+'" model not found in Sparky.data. Path will be observed.'))),"string"==typeof d&&(d=x.ctrl[d]),!d&&a.getAttribute&&(d=w(a)),f&&b&&void 0!==b.length&&"function"!=typeof b)return q(a,b,d);var i=Object.create(B);return g&&!b?x.observePathOnce(x.data,g,function(b){s(i,a,b,d)}):s(i,a,b,d),i}var y={},z=/\{\{\s*([\w\-\.\[\]]+)\s*\}\}/g,A=/^\.|^\[/,B=Object.assign({create:function(){},reset:function(){},unbind:b,destroy:function(){return this.unbind().remove().trigger("destroy").off()},remove:function(){for(;this.length-->0;)l(this[this.length]);return this},appendTo:function(a){for(var b=-1;++b<this.length;)a.appendChild(this[b]);return this}},a.mixin.events,a.mixin.array),C=Function.prototype.call.bind(Array.prototype.slice),D=Function.prototype.call.bind(Array.prototype.reduce);x.debug=!1,x.config={},x.settings={},x.data={},x.ctrl={},x.Collection=function(a,b){return new Collection(a,b)},x.dom={append:f,remove:l},x.templates=y,x.template=k,x.content=i,x.extend=function(){return console.warn("Sparky.extend() is deprecated. Use Object.assign()."),console.warn("Object.assign polyfill: https://github.com/cruncher/object.assign"),Object.assign.apply(this,arguments)},x.svgNamespace="http://www.w3.org/2000/svg",x.xlink="http://www.w3.org/1999/xlink",x.prototype=B,a.Sparky=x}(window),function(a,b){"use strict";function c(){return"content"in document.createElement("template")}function d(){var a=document.createElement("input"),b=!1;return e.append(document.body,a),a.disabled=!0,a.addEventListener("featuretest",function(){b=!0}),a.dispatchEvent(f),e.remove(a),b}var e=b.dom,f=new CustomEvent("featuretest",{bubbles:!0});b.features={template:c(),inputEventsOnDisabled:d()}}(window,window.Sparky),function(a){"use strict";function b(){return this}function c(a){a()}function d(a){return!!a||void 0!==a&&null!==a&&!Number.isNaN(a)}function e(a){return(/\[object\s(\w+)\]/.exec(Object.prototype.toString.apply(a))||[])[1]}function f(a,b,c){this.node=a,this.get=b,this.set=c}function g(b,c,d,e,f,g,h){var i=[],k=b.tagName.toLowerCase();return"verbose"===a.debug&&console.group("Sparky: dom node: ",b),r(b,c,d,e,i),s(b,c,d,e,i,_),lb[k]?lb[k](b,c,d,e,f,g,i,h):j(b,c,d,e,f,g,i,h),"verbose"===a.debug&&console.groupEnd(),i}function h(b,c,d,e){var f=[];return"verbose"===a.debug&&console.group("Sparky: text node:",b),z(b.nodeValue,c,d,e,function(a){b.nodeValue=a},f),"verbose"===a.debug&&console.groupEnd(),f}function i(b,c,d,e,f,g,h){var i=[];return"verbose"===a.debug&&console.group("Sparky: fragment: ",b),j(b,c,d,e,f,g,i,h),"verbose"===a.debug&&console.groupEnd(),i}function j(a,b,c,e,f,g,h,i){if(0!==a.childNodes.length)for(var j,c,k=kb(a.childNodes),l=-1,m=k.length;++l<m;)j=k[l],j.getAttribute&&(d(j.getAttribute("data-ctrl"))||d(j.getAttribute("data-scope")))?g(j):hb[j.nodeType]&&h.push.apply(h,hb[j.nodeType](j,b,c,e,f,g,i))}function k(b,c,d){b.setAttributeNS(a.xlink,c,d)}function l(a,b,c){a.setAttribute(b,c)}function m(a){return a.getAttribute("class")}function n(a){return a.classList||new f(a,m,o)
}function o(a,b){a instanceof SVGElement?a.setAttribute("class",b):a.className=b}function p(a,b){var c=b.trim().split(db);a.add.apply(a,c)}function q(a,b){var c=b.trim().split(db);a.remove.apply(a,c)}function r(b,c,d,e,f){var g=m(b);if(g){bb.lastIndex=0;var h=[],i=g.replace(bb,function(a){return h.push(a),""});if(h.length){o(b,i);var j=n(b),k=function(a,b){b&&eb.test(b)&&q(j,b),a&&eb.test(a)&&p(j,a)};"verbose"===a.debug&&console.log('Sparky: bind class="'+g+" "+h.join(" ")+'"'),z(h.join(" "),c,d,e,k,f)}}}function s(a,b,c,d,e,f){for(var g=f.length;g--;)t(a,f[g],b,c,d,e)}function t(b,c,d,e,f,g){var h=b instanceof SVGElement,i=b.getAttribute("data-"+c),j=i?i:h?b.getAttributeNS(a.xlink,c)||b.getAttribute(c):b.getAttribute(c);if(j){i&&b.removeAttribute("data-"+c),"verbose"===a.debug&&console.log("Sparky: checking "+c+'="'+j+'"');var m=h?k.bind(this,b,c):l.bind(this,b,c);z(j,d,e,f,m,g)}}function u(b){var c=cb.exec(b);return{name:c[1],fn:a.filters[c[1]],args:c[2]&&JSON.parse('["",'+c[2].replace(/\'/g,'"')+"]")||[]}}function v(b,c){for(var d,e=gb[c]||(gb[c]=c.split("|").map(u)),f=e.length,g=-1;++g<f;){if(!e[g].fn)throw new Error("Sparky: filter '"+e[g].name+"' does not exist in Sparky.filters");"filter"===a.debug&&console.log("Sparky: filter:",e[g].name,"value:",b,"args:",e[g].args),d=e[g].args,d[0]=b,b=e[g].fn.apply(a,d)}return b}function w(a,b,c){ab.lastIndex=0,a.replace(ab,function(a,d,e){var f;-1===b.indexOf(e)&&(2===d.length?(b.push(e),f=c.indexOf(e),-1!==f&&c.splice(f,1)):-1===c.indexOf(e)&&c.push(e))})}function x(a){return function(b,c,f,g){var h=a(f),i=g?v(h,g):h;return d(i)?"string"==typeof i?i:"number"==typeof i?i:"boolean"==typeof i?i:"function"==typeof i?(i.name||"function")+(fb.exec(i.toString())||[])[1]:e(i):""}}function y(a,b,c){var d,e=x(b);return function(){ab.lastIndex=0;var b=a.replace(ab,e);c(b,d),d=b}}function z(a,b,c,d,e,f){var g=[],h=[];if(w(a,g,h),0!==g.length||0!==h.length){var i=y(a,d,e);g.length?f.push(A(b,c,i,g)):i()}}function A(b,c,d,e){var f=a.Throttle(d);return e.forEach(function(a){b(a,f)}),function(){e.forEach(function(a){c(a,f)}),f.cancel()}}function B(b,d,e,f,g,h,i){var j=hb[b.nodeType](b,d,e,f,g,h,i);return a.debug&&0===j.length&&console.log("Sparky: No Sparky tags found in",b),this.unbind=function(){return j.forEach(c),this},this}function C(b){!a.features.inputEventsOnDisabled&&b.disabled?(b.disabled=!1,setTimeout(function(){b.dispatchEvent(jb),b.disabled=!0},0)):b.dispatchEvent(jb)}function D(b,c,d,e){var f=b.type;return"radio"===f||"checkbox"===f?function(){var f=e(a.get(c,d)),g=b.value===f;b.checked!==g&&(b.checked=g,C(b))}:function(){var f=e(a.get(c,d));if("string"==typeof f){if(b.value===f)return;b.value=f}else b.value="";C(b)}}function E(b,c,d,e){var f=b.type;return"radio"===f?function(){b.checked&&a.set(c,d,e(b.value))}:"checkbox"===f?function(){a.set(c,d,e(b.checked?b.value:void 0))}:function(){a.set(c,d,e(b.value))}}function F(b,c,e,f,g){var h,i=(b.getAttribute("value"),D(b,c,e,f)),j=E(b,c,e,g);b.addEventListener("change",j),b.addEventListener("input",j);var k=window.requestAnimationFrame(function(){k=!1,d(a.get(c,e))||j(),h=a.Throttle(i),a.observePath(c,e,h)});return function(){b.removeEventListener("change",j),b.removeEventListener("input",j),k?window.cancelAnimationFrame(k):(h.cancel(),a.unobservePath(c,e,h))}}function G(a,b,c,d){var e=a.name;if(a.name){ab.lastIndex=0;var f=ab.exec(e)||ib,g=f[2];if(g)return f[3]?void console.warn('Sparky: Sparky tags in name attributes do not accept filters. Ignoring name="'+e+'".'):(a.name=e.replace(ab,g),F(a,b,g,c,d))}}function H(a){return a}function I(a){var b=parseFloat(a);return Number.isNaN(b)?void 0:b}function J(a){var b=parseFloat(a);return Number.isNaN(b)?void 0:Math.round(b)}function K(a){return"false"===a?!1:"0"===a?!1:""===a?!1:!!a}function L(a){return!K(a)}function M(a){return"on"===a}function N(a){return"on"!==a}function O(a){return d(a)?a+"":void 0}function P(a){return"number"==typeof a?a+"":void 0}function Q(a){return"boolean"==typeof a?a+"":"number"==typeof a?!!a+"":void 0}function R(a){return"boolean"==typeof a?!a+"":"number"==typeof a?!a+"":void 0
}function S(a){return"boolean"==typeof a||"number"==typeof a?a?"on":"":void 0}function T(a){return"boolean"==typeof a||"number"==typeof a?a?"":"on":void 0}function U(b,c){var d=a.bindNamedValueToObject(b,c,O,H);d&&this.on("destroy",d)}function V(b,c){var d=a.bindNamedValueToObject(b,c,H,H);d&&this.on("destroy",d)}function W(b,c){var d=a.bindNamedValueToObject(b,c,P,I);d&&this.on("destroy",d)}function X(b,c){var d=a.bindNamedValueToObject(b,c,P,J);d&&this.on("destroy",d)}function Y(b,c){var e=b.type,f="checkbox"!==e||d(b.getAttribute("value"))?a.bindNamedValueToObject(b,c,Q,K):a.bindNamedValueToObject(b,c,S,M);f&&this.on("destroy",f)}function Z(b,c){var e=b.type,f="checkbox"!==e||d(b.getAttribute("value"))?a.bindNamedValueToObject(b,c,R,L):a.bindNamedValueToObject(b,c,T,N);f&&this.on("destroy",f)}function $(b,c){var d=b.min?parseFloat(b.min):b.min=0,e=mode.max?parseFloat(b.max):b.max=1,f=a.bindNamedValueToObject(b,c,function(a){return"number"!=typeof a?"":""+(e-a+d)},function(a){var b=parseFloat(a);return Number.isNaN(b)?void 0:e-a+d});f&&this.on("destroy",f)}var _=["href","title","id","style","src","alt"],ab=/(\{{2,3})\s*([\w\-\.\[\]]+)\s*(?:\|([^\}]+))?\s*\}{2,3}/g,bb=/[^\s]*\{{2,3}[^\}]+\}{2,3}[^\s]*/g,cb=/\s*([a-zA-Z0-9_\-]+)\s*(?:\:(.+))?/,db=/\s+/,eb=/\S/,fb=/function(?:\s+\w+)?\s*(\([\w\,\s]*\))/,gb={},hb={1:g,3:h,11:i},ib=[],jb=new CustomEvent("valuechange",{bubbles:!0}),kb=Function.prototype.call.bind(Array.prototype.slice);f.prototype={add:function(){for(var a=arguments.length,b=this.get(this.node),c=b?b.trim().split(db):[];a--;)-1===c.indexOf(arguments[a])&&c.push(arguments[a]);this.set(this.node,c.join(" "))},remove:function(){for(var a,b=arguments.length,c=this.get(this.node),d=c?c.trim().split(db):[];b--;)a=d.indexOf(arguments[b]),-1!==a&&d.splice(a,1);this.set(this.node,d.join(" "))}};var lb={label:function(a,b,c,d,e,f,g,h){t(a,"for",b,c,d,g),j(a,b,c,d,e,f,g,h)},input:function(b,c,e,f,g,h,i,j){var k=b.type;t(b,"value",c,e,f,i),t(b,"min",c,e,f,i),t(b,"max",c,e,f,i);var e="number"===k||"range"===k?a.bindNamedValueToObject(b,j,P,I):"checkbox"!==k||d(b.getAttribute("value"))?a.bindNamedValueToObject(b,j,H,H):a.bindNamedValueToObject(b,j,S,M);e&&i.push(e)},select:function(b,c,d,e,f,g,h,i){t(b,"value",c,d,e,h),j(b,c,d,e,f,g,h,i);var d=a.bindNamedValueToObject(b,i,H,H);d&&h.push(d)},option:function(a,b,c,d,e,f,g,h){t(a,"value",b,c,d,g),j(a,b,c,d,e,f,g,h)},textarea:function(b,c,d,e,f,g,h,i){var d=a.bindNamedValueToObject(b,i,H,H);d&&h.push(d)},time:function(a,b,c,d,e,f,g,h){s(a,b,c,d,g,["datetime"]),j(a,b,c,d,e,f,g,h)}};a.attributes=_,a.prototype.bind=B,a.prototype.unbind=b,Object.assign(a.ctrl,{"value-any":U,"value-string":V,"value-number":W,"value-number-integer":X,"value-number-invert":$,"value-boolean":Y,"value-boolean-invert":Z}),a.getClassList=n,a.bindNamedValueToObject=G}(Sparky),function(a){"use strict";function b(){}function c(a){return void 0!==a&&null!==a}function d(a){return a instanceof Object}function e(a){return a.replace(t,"").split(u)}function f(a,b){var d=b.shift(),e=a[d];return 0===b.length?e:c(e)?f(e,b):e}function g(a,b,c){var e=b[0];return b.length>1?g(d(a[e])?a[e]:a[e]={},b.slice(1),c):a[e]=c}function h(b,c,d,e,f){function g(){"verbose"===a.debug&&console.log("Sparky: path resolved. Value:",b[c]),e(b[c])}return f&&g(),a.observe(b,c,g),function(){a.unobserve(b,c,g)}}function i(c,d,e,f,g){function h(){var a=c[d];i(),"object"!=typeof a&&"function"!=typeof a?(i=b,g&&f()):i=j(a,e.slice(),f,g)}var i=b;return a.observe(c,d,h),h(),g=!0,function(){i(),a.unobserve(c,d,h)}}function j(a,c,d,e){if(0===c.length)return b;var f=c.shift();return 0===c.length?h(a,f,c,d,e):i(a,f,c,d,e)}function k(a,b,c){var d=e(b),f=j(a,d,c,!1);v.push([a,b,c,f])}function l(a,b,d){function g(e){l||c(e)&&(l=!0,d(e),setTimeout(function(){m(a,b,d)},0))}var h=e(b),i=f(a,h.slice());if(c(i))return void d(i);var k=j(a,h,g,!1),l=!1;v.push([a,b,d,k])}function m(a,b,c){var d,e=v.length;for("string"!=typeof b&&(c=b,b=void 0);e--;)d=v[e],a!==d[0]||b&&b!==d[1]||c&&c!==d[2]||(d[3](),v.splice(e,1))}function n(a,b){var c=e(b);return 1===c.length?a[b]:f(a,c)
}function o(a,b,c){var d=e(b);return 1===d.length?a[b]=c:g(a,d,c)}function p(a){return window.AudioParam&&window.AudioParam.prototype.isPrototypeOf(a)}function q(a,b,c){function d(){var e=a[b];f!==e&&(f=e,c()),g&&window.requestAnimationFrame(d)}function e(){g=!1}var f=a[b],g=!0;return window.requestAnimationFrame(d),e}function r(a,b,c){return w.push([a,b,c,q(a,b,c)]),a}function s(a,b,c){for(var d,e=w.length;e--;)if(d=w[e],a===d[0]&&b===d[1]&&c===d[2])return d[3](),w.splice(e,1),a;return a}var t=/^\[|]$/g,u=/\]?\.|\[/g,v=[];a.get=n,a.set=o,a.observePath=k,a.unobservePath=m,a.observePathOnce=l;var w=[];!function(a){a.observe=function(a,b,c){if(p(a))return r(a,b,c);if("length"===b){var d=Object.getOwnPropertyDescriptor(a,b);if(!d.get&&!d.configurable)return console.warn&&console.warn("Sparky: Are you trying to observe an array?. Sparky is going to observe it by polling. You may want to use a Sparky.Collection() to avoid this.",a,a instanceof Array),console.trace&&console.trace(),r(a,b,c)}return observe(a,b,c)},a.unobserve=function(a,b,c){if(p(a))return s(a,b,c);if("length"===b){var d=Object.getOwnPropertyDescriptor(a,b);if(!d.get&&!d.configurable)return s(a,b,c)}return unobserve(a,b,c)}}(a)}(Sparky),function(){"use strict";function a(){}function b(b){function c(){g=!1,b.apply(h,i)}function d(){e=a,g&&c(),b=a}function e(){g||(window.requestAnimationFrame(c),g=!0)}function f(){h=this,i=arguments,e()}var g,h,i;return f.cancel=d,c(),f}Sparky.Throttle=b}(Sparky),function(){"use strict";function a(a,b,c){return(a-b)/(c-b)}function b(a,b,c){return a*(c-b)+b}function c(a){a.preventDefault()}var d=Math.pow;Sparky.ctrl["value-number-pow-2"]=function(c,e){function f(c){if("number"!=typeof c)return"";var e=b(d(a(c,h,i),.5),h,i);return e+""}function g(c){var e=parseFloat(c);if(!Number.isNaN(e))return b(d(a(e,h,i),2),h,i)}var h=c.min?parseFloat(c.min):c.min=0,i=c.max?parseFloat(c.max):c.max=1,j=Sparky.bindNamedValueToObject(c,e,f,g);this.on("destroy",j)},Sparky.ctrl["value-number-pow-3"]=function(c,e){function f(c){if("number"!=typeof c)return"";var e=b(d(a(c,h,i),1/3),h,i);return e+""}function g(c){var e=parseFloat(c);if(!Number.isNaN(e))return b(d(a(e,h,i),3),h,i)}var h=c.min?parseFloat(c.min):c.min=0,i=c.max?parseFloat(c.max):c.max=1,j=Sparky.bindNamedValueToObject(c,e,f,g);this.on("destroy",j)},Sparky.ctrl["value-number-log"]=function(c,d){function e(a){if("number"!=typeof a)return"";var c=b(Math.log(a/g)/Math.log(i),g,h);return c+""}function f(b){var c=parseFloat(b);if(!Number.isNaN(c))return g*Math.pow(i,a(c,g,h))}var g=c.min?parseFloat(c.min):c.min=1,h=c.max?parseFloat(c.max):c.max=10,i=h/g;if(0>=g)return void console.warn('Sparky: ctrl "value-number-log" cannot accept a min attribute of 0 or lower.',c);var j=Sparky.bindNamedValueToObject(c,d,e,f);this.on("destroy",j)},Sparky.ctrl["value-pow-2"]=function(){console.warn('Sparky: ctrl "value-pow-2" is deprecated. Use "value-number-pow-2"')},Sparky.ctrl["value-pow-3"]=function(){console.warn('Sparky: ctrl "value-pow-3" is deprecated. Use "value-number-pow-3"')},Sparky.ctrl["value-log"]=function(){console.warn('Sparky: ctrl "value-log" is deprecated. Replace with "value-number-log"')},Object.assign(Sparky.ctrl,{"prevent-click":function(a){a.addEventListener("click",c),this.on("destroy",function(){a.removeEventListener("click",c)})},"prevent-submit":function(a){a.addEventListener("submit",c),this.on("destroy",function(){a.removeEventListener("submit",c)})},"delegate-scope":function(a,b){jQuery.data(a,"scope",b)}}),Sparky.getScope=function(a){return jQuery.data(a,"scope")}}(),function(){"use strict";var a=0;Sparky.ctrl.debug=function(){console.log("DEBUG",a++)},Sparky.ctrl["debug-events"]=function(a){var b=0,c=0,d=0;this.on("ready",function(){console.log("READY",b++,a)}).on("insert",function(){console.log("INSERT",c++,a)}).on("destroy",function(){console.log("DESTROY",d++,a)})}}(),function(a){"use strict";function b(a){for(var b=[],c=0;c++<31;)b[c]=a[c]||a.n;return b}function c(a){for(var b="";a--;)b+=" ";return b}function d(a){return!!a||void 0!==a&&null!==a&&!Number.isNaN(a)}var e=a.settings=a.settings||{},f=[];
e.en={days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),months:"January February March April May June July August September October November December".split(" "),ordinals:b({n:"th",1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"})},e.fr={days:"dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),months:"janvier février mars avril mai juin juillet août septembre octobre novembre décembre".split(" "),ordinals:b({n:"ième",1:"er"})},e.de={days:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),months:"Januar Februar März April Mai Juni Juli Oktober September Oktober November Dezember".split(" "),ordinals:b({n:"er"})},e.it={days:"domenica lunedì martedì mercoledì giovedì venerdì sabato".split(" "),months:"gennaio febbraio marzo aprile maggio giugno luglio agosto settembre ottobre novembre dicembre".split(" "),ordinals:b({n:"o"})};var g=document.documentElement.lang;e.lang=g&&e[g]?g:"en",a.filters={add:function(a,b){var c=parseFloat(a)+b;if(!Number.isNaN(c))return c},capfirst:function(a){return a.charAt(0).toUpperCase()+a.substring(1)},cut:function(b,c){return a.filters.replace(b,c,"")},date:function(a){function b(a){var b=new Date(a);return new Date(+b+6e4*b.getTimezoneOffset())}function c(a){return"string"!=typeof a?new Date(a):h?new Date(a):a.length>16&&g.test(a)?new Date(a):b(a)}var e={a:function(a){return a.getHours()<12?"a.m.":"p.m."},A:function(a){return a.getHours()<12?"AM":"PM"},b:function(b,c){return a[c].months[b.getMonth()].toLowerCase().slice(0,3)},c:function(a){return a.toISOString()},d:function(a){return a.getDate()},D:function(b,c){return a[c].days[b.getDay()].slice(0,3)},F:function(b,c){return a[c].months[b.getMonth()]},g:function(a){return a.getHours()%12},G:function(a){return a.getHours()},h:function(a){return("0"+a.getHours()%12).slice(-2)},H:function(a){return("0"+a.getHours()).slice(-2)},i:function(a){return("0"+a.getMinutes()).slice(-2)},j:function(a){return a.getDate()},l:function(b,c){return a[c].days[b.getDay()]},m:function(a){return("0"+a.getMonth()).slice(-2)},M:function(b,c){return a[c].months[b.getMonth()].slice(0,3)},n:function(a){return a.getMonth()},O:function(a){return(a.getTimezoneOffset()<0?"+":"-")+("0"+Math.round(100*Math.abs(a.getTimezoneOffset())/60)).slice(-4)},r:function(a){return a.toISOString()},s:function(a){return("0"+a.getSeconds()).slice(-2)},S:function(b){return a.ordinals[b.getDate()]},U:function(a){return+a},w:function(a){return a.getDay()},y:function(a){return("0"+a.getFullYear()%100).slice(-2)},Y:function(a){return a.getFullYear()},Z:function(a){return 60*-a.getTimezoneOffset()}},f=/([a-zA-Z])/g,g=/(?:Z|[+-]\d{2}:\d{2})$/,h=0===(new Date).getTimezoneOffset()||"1970-01-01T00:00:00.000Z"!==new Date("1970").toJSON();return function(b,g,h){if(d(b)){var i=b instanceof Date?b:c(b);return h=h||a.lang,g.replace(f,function(a,b){return e[b](i,h)})}}}(e),decibels:function(a){return"number"==typeof a?20*Math.log10(a):void 0},decimals:function(a,b){return"number"==typeof a?Number.prototype.toFixed.call(a,b):void 0},escape:function(){var a=document.createElement("pre"),b=document.createTextNode(this);return a.appendChild(b),function(c){return b.textContent=c,a.innerHTML}}(),equals:function(a,b,c,d){return(a===b?c:d)||""},first:function(a){return a[0]},floatformat:function(b,c){return"number"==typeof b?Number.prototype.toFixed.call(b,c):d(b)?a.debug&&console.warn("Sparky: filter floatformat: "+c+" called on non-number "+b):""},get:function(a,b){return a[b]},join:function(a){return Array.prototype.join.apply(a)},json:function(a){return JSON.stringify(a)},last:function(a){return a[a.length-1]},length:function(a){return a.length},linebreaksbr:function(){var a=/\n/;return function(b){return b.replace(a,"<br/>")}}(),lower:function(a){String.prototype.toLowerCase.apply(a)},lowercase:function(a){return"string"==typeof a?String.prototype.toLowerCase.apply(a):void 0},multiply:function(a,b){return a*b},parseint:function(a){return parseInt(a,10)},percent:function(a){return 100*a},pluralize:function(a,b,c,d){return"number"==typeof a?(b=b||"",c=c||"s","fr"===d?2>a&&a>=0?b:c:1===a?b:c):void 0
},prepad:function(a,b,c){var e=d(a)?a.toString():"",g=e.length;return 1>b-g?a:(f.length=0,f.length=b-g,f.push(e),f.join(c||" "))},postpad:function(a,b){var e=d(a)?a.toString():"",f=e.length,g=parseInt(b,10);return g===f?a:g>f?e+c(g-f):e.substring(0,g)},random:function(a){return a[Math.floor(Math.random()*a.length)]},replace:function(a,b,c){return"string"==typeof a?a.replace(RegExp(b,"g"),c):void 0},safe:function(a){},slice:function(a,b,c){return"string"==typeof a?a.slice(b,c):Array.prototype.slice.call(a,b,c)},slugify:function(a){return"string"==typeof a?a.trim().toLowerCase().replace(/\W/g,"-").replace(/[_]/g,"-"):void 0},striptags:function(){var a=/<(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(b){return b.replace(a,"")}}(),striptagsexcept:function(){function a(a,c,d){return d&&-1!==b.indexOf(d)?"<"+(c||"")+d+">":""}var b,c,d=/<(\/)?(\w*)(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(e,f){return f?(b=f.split(" "),c=e.replace(d,a),b=!1,c):e.replace(d,"")}}(),"switch":function(a){return"string"==typeof a&&(a=parseInt(a,10)),"number"!=typeof a||Number.isNaN(a)?void 0:arguments[a+1]},symbolise:function(a){var b=a+"",c=1/0+"";return b===c?"∞":b==="-"+c?"-∞":a},time:function(){},truncatechars:function(a,b){return a.length>b?a.length.slice(0,b)+"&hellips;":a},type:function(a){return typeof a},unordered_list:function(a){for(var b=a,c=b.length,d=-1,e="";++d<c;)e+="<li>",e+=b[d],e+="</li>";return e},uppercase:function(a){return"string"==typeof a?String.prototype.toUpperCase.apply(a):void 0},yesno:function(a,b,c){return a?b:c}}}(window.Sparky||require("sparky")),function(a,b){function c(a){return"template"===a.tagName.toLowerCase()?!0:a===document.documentElement?!1:c(a.parentNode)}if(a){var d=a(document);d.ready(function(){var a;window.console&&(a=Date.now());for(var e,f,g=document.querySelectorAll("[data-ctrl], [data-scope]"),h=-1,i=g.length,j=[];++h<i;){for(e=g[h],j.push(e);++h<i&&e.contains(g[h]);)f=g[h].getAttribute("data-scope"),void 0!==f&&!/\{\{/.test(f);--h}if(!b.features.template)for(h=j.length;h--;)c(j[h])&&j.splice(h,1);b.debug&&console.log("Sparky: DOM nodes to initialise:",j),j.forEach(function(a){b(a)}),window.requestAnimationFrame(function(){d.trigger("sparkyready")}),window.console&&console.log("Sparky: DOM initialised in "+(Date.now()-a)+"ms")})}}(jQuery,Sparky),Sparky.debug=!1;