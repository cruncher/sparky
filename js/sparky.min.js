!function(a,b){a.CustomEvent&&"function"==typeof a.CustomEvent||(a.CustomEvent=function(a,c){c=c||{bubbles:!1,cancelable:!1,detail:b};var d=document.createEvent("CustomEvent");return d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),d},a.CustomEvent.prototype=a.Event.prototype)}(window),function(){for(var a=40,b=["ms","moz","webkit","o"],c=b.length;c--&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=a*(c%a),e=window.setTimeout(function(){b(d+a)},d+a-c);return e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){"use strict";var b=a.mixin||(a.mixin={});b.array={filter:Array.prototype.filter,map:Array.prototype.map,reduce:Array.prototype.reduce,pop:Array.prototype.pop,push:Array.prototype.push,concat:Array.prototype.concat,sort:Array.prototype.sort,slice:Array.prototype.slice,splice:Array.prototype.splice,some:Array.prototype.some,indexOf:Array.prototype.indexOf,forEach:Array.prototype.forEach,each:function(){return Array.prototype.forEach.apply(this,arguments),this}}}(this),function(a){"use strict";function b(a){return a.events||Object.defineProperty(a,"events",{value:{}}),a.events}function c(a){return a.dependents||Object.defineProperty(a,"dependents",{value:[]}),a.dependents}function d(a,b){var d=c(a);-1===d.indexOf(b)&&d.push(b)}function e(a,b){var d=c(a);if(void 0===b)return void(d.length=0);var e=d.indexOf(b);-1!==e&&d.splice(e,1)}var f=a.mixin||(a.mixin={}),g={},h=Function.prototype.call.bind(Array.prototype.slice);f.events={on:function(a,c){if(1===arguments.length&&a.trigger)return d(this,a),this;var e,f,g=b(this);if("string"!=typeof a)return this;for(a=a.split(/\s+/),f=[c,h(arguments,2)];e=a.shift();)g[e]||(g[e]=[]),g[e].push(f);return this},off:function(a,b){var c,d;if(0===arguments.length){if(e(this),this.events)for(c in this.events)this.events[c].length=0,delete this.events[c];return this}if(1===arguments.length&&a.trigger)return e(this,a),this;if(!this.events)return this;for("string"==typeof a?a=a.split(/\s+/):(b=a,a=Object.keys(this.events));c=a.shift();)d=this.events[c],d&&(b?d.forEach(function(a,c){a[0]===b&&d.splice(c,c+1)}):(this.events[c].length=0,delete this.events[c]));return this},trigger:function(a){var c,d,e,f,i,j,k;"string"==typeof a?(c=a,d=this):(c=a.type,d=a.target);var l=b(this);if(j=h(arguments),l[c])for(e=l[c].slice(),f=-1,i=e.length,j[0]=d;++f<i;)k=j.concat(e[f][1]),e[f][0].apply(this,k);var m=this.dependents;if(!m)return this;for(f=-1,i=m.length,"string"==typeof a&&(j[0]=g,g.type=c,g.target=d);++f<i;)m[f].trigger.apply(m[f],j);return this}}}(this),function(a){function b(a){a[0].apply(null,a[1])}function c(a,b,c,d,e){var f=a[b],g=[d],h={enumerable:c?c.enumerable:!0,configurable:!1,get:c&&c.get?c.get:function(){return f},set:c&&c.set?function(a){c.set.call(this,a),g.forEach(e)}:function(a){a!==f&&(f=a,g.forEach(e))}};h.set.observers=g,Object.defineProperty(a,b,h)}function d(a,d,e){var f=Object.getOwnPropertyDescriptor(a,d),h=g.call(arguments,0),i=[e,h];if(h.splice(1,2),f){if(f.set&&f.set.observers)return void f.set.observers.push(i);if(f.configurable===!1)return void console.warn('Property "'+d+'" is not observable: configurable === false. Ignoring.')}c(a,d,f,i,b)}function e(a,b,c){var e;if("[object Function]"!==h.call(b))d.apply(null,arguments);else{c=b,e=g.call(arguments,0),e.splice(1,0,null);for(b in a)e[1]=b,d.apply(null,e)}}function f(a,b,c){var d,e;if(b instanceof Function){c=b;for(b in a)f(data,key,c)}else d=Object.getOwnPropertyDescriptor(a,b),e=d.set&&d.set.observers,e&&(c?e.forEach(function(a,b,d){a[0]===c&&d.splice(b,1)}):d.set.observers.length=0)}var g=Array.prototype.slice,h=Object.prototype.toString;a.observe=e,a.unobserve=f}(window),function(a,b,c){"use strict";function d(a){return a!==c&&null!==a}function e(a){return a}function f(a,b){this[b]=a}function g(a){for(var b,c,d=0,e=arguments.length;++d<e;){b=arguments[d];for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}return a}function h(a,b){for(var c=a.index,d=a.length;d--;)if(a[d][c]===b)return a[d]}function i(a,b){var c=a.indexOf(b);if(-1!==c)return a[c]}function j(a,b){var c=a.index;if(!d(b[c]))return void a.push(b);for(var e=a.length;a[--e]&&(a[e][c]>b[c]||!d(a[e][c])););a.splice(e+1,0,b)}function k(a,b,d){for(d===c&&(d=-1);++d<a.length;)b===a[d]&&a.splice(d,1)}function l(){}function m(a){return function(){var b=-1,c=arguments.length;for(l(this);++b<c;)a.call(this,arguments[b]);return this}}function o(a,b){function d(a,c){return a[b]>c[b]?1:-1}var e=Object.create(q,r);b=b||"id",Object.defineProperties(e,{index:{value:b}}),a===c?a=[]:a instanceof Array||(p&&console.log("Scribe: data not an array. Scribe cant do that yet."),a=[]),a.forEach(f,e);var g=e.length=a.length;return e.sort(d),observe(e,"length",function(a){for(;g-->a.length;)a[g]=c;g=a.length}),e}var p=!1;b.collection={add:m(function(a){j(this,a),this.trigger("add",a)}),remove:m(function(a){a=this.find(a),k(this,a),this.trigger("remove",a)}),update:m(function(a){var b=this.find(a);return b?(g(b,a),this.trigger("update",b)):(this.add(a),this.trigger("add",a)),this}),find:function(a){var b=this.index;return"string"==typeof a||"number"==typeof a?h(this,a):d(a[b])?h(this,a[b]):i(this,a)},contains:function(a){return-1!==this.indexOf(a)},get:function(a){var b=this.length;if(0!==b){for(;--b;)if(this[b][a]!==this[b-1][a])return;return this[b][a]}},set:function(a,b){if(2!==arguments.length)return void(p&&console.warn("[tb-app] Can't set selection with [property, value]",arguments,". Don't be absurd."));for(var c=this.length;c--;)this[c][a]=b;return this},toJSON:function(){return this.map(e)},toObject:function(a){for(var b,c,d={};n--;)b=this[n][a],c=typeof b,"string"===c||"number"===c&&b>-1/0&&1/0>b?d[b]=this[n]:console.warn("Collection.toObject() "+b+" cannot be used as a key.");return d}};var q=g({},b.events,b.set,b.array,b.collection),r={length:{value:0,enumerable:!1,writable:!0,configurable:!0}};o.prototype=q,o.add=j,o.remove=k,a.Collection=o}(this,this.mixin),function(a){"use strict";function b(){}function c(a){return void 0!==a&&null!==a}function d(a){for(var b,c,d=0,e=arguments.length;++d<e;){b=arguments[d];for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}return a}function e(a,b){Array.prototype.push.apply(b,a)}function f(a,b){return a.appendChild(b),a}function g(a,b){for(;a.lastChild;)a.removeChild(a.lastChild);return a.appendChild(b),a}function h(a){var b=C.apply(a.childNodes),c=document.createDocumentFragment();return B.call(b,f,c)}function i(a){var b=document.getElementById(a);if(b)return b.content||h(b)}function j(a){var b=v[a]||(v[a]=i(a));return u.debug&&!b&&console.warn("[Sparky] template #"+a+" not found."),b&&b.cloneNode(!0)}function k(a){a.parentNode&&a.parentNode.removeChild(a)}function l(a,b){a.parentNode&&a.parentNode.insertBefore(b,a)}function m(a,b){return this.on("destroy",function(a,b){k(b)},a),b}function n(a,b){var d=b.shift(),e=a[d];return c(e)&&b.length?n(e,b):e}function o(a,b){return n(a,b.replace(y,"").split(z))}function p(a,b){return c(a)&&c(b)&&""!==b?"."===b?a:o(a,b):void 0}function q(a,b,c){function d(){var d,e,j=-1,m=i.length,n={};if(u.debug)var o=+new Date;for(;m--;)e=i[m],d=b.indexOf(e),-1===d?(k(g[m]),h[m].destroy()):g[m]&&h[m]&&(n[d]=[g[m],h[m]]);for(m=b.length,g.length=m,h.length=m,i.length=m;++j<m;)i[j]=b[j],n[j]?(g[j]=n[j][0],h[j]=n[j][1]):(g[j]=a.cloneNode(!0),h[j]=u(g[j],b[j],c,!1)),l(f,g[j]);u.debug&&console.log("[Sparky] collection rendered (length: "+b.length+" time: "+(+new Date-o)+"ms)")}var e=a.getAttribute("data-model"),f=document.createComment(' [Sparky] data-model="'+e+'" '),g=[],h=[],i=[];l(a,f),k(a),a.removeAttribute("data-model"),a.removeAttribute("data-ctrl");var j=u.Throttle(d);return u.observe(b,"length",j),{destroy:function(){for(var a=h.length,c=-1;++c<a;)h[c].destroy();j.cancel(),u.unobserve(b,"length",j)},trigger:function(){for(var a=h.length,b=-1;++b<a;)h[b].trigger.apply(h[b],arguments)}}}function r(a){return["<",a.tagName.toLowerCase(),a.className?' class="'+a.className+'"':"",a.getAttribute("href")?' href="'+a.getAttribute("href")+'"':"",a.getAttribute("data-ctrl")?' data-ctrl="'+a.getAttribute("data-ctrl")+'"':"",a.getAttribute("data-model")?' data-model="'+a.getAttribute("data-model")+'"':"",a.id?' id="'+a.id+'"':"",">"].join("")}function s(a,b){return a.on("ready",function(){a.on(b)}),b}function t(a,d,f,h){function i(a,b,c){requestAnimationFrame(function(){g(b,c),a.trigger("template",b)})}function k(){i(a,d,y),k=b}function l(a){return t[a]}function m(a,b){t[a]=b}function n(b){var d,e=b.getAttribute("data-model");if(!c(e))return s(a,u(b,t,void 0,!1));if("."===e)return s(a,u(b,f));if(A.test(e)){if(d=p(f,e.replace(A,"")),!d)throw new Error("[Sparky] No object at relative path '"+e+"' of model#"+f.id);return s(a,u(b,d))}if(x.lastIndex=0,x.test(e)){if(x.lastIndex=0,d=p(t,x.exec(e)[1]),!d)throw x.lastIndex=0,new Error("[Sparky] Property '"+x.exec(e)[1]+"' not in parent scope. "+r(b));return u(b,d)}return s(a,u(b,p(u.data,e)))}function o(a,b){u.observe(t,a,b),y&&u.observe(t,a,k)}function q(a,b){u.unobserve(t,a,b)}var t,v,w=d.getAttribute&&d.getAttribute("data-template"),y=w&&j(w);11===d.nodeType?e(d.childNodes,a):(a[0]=d,a.length=1),a.destroy=function(){return this.detach(),this.detach=b,this.trigger("destroy").off()},t=h&&h.call(a,d,f),t!==!1&&(t=t||f||{},u.debug&&w&&console.log("[Sparky] template:",w),a.detach=v=u.bind(y||d,o,q,l,m,n),a.trigger("ready"))}function u(a,b,d,e){"verbose"===u.debug&&console.log("Sparky","\n","node",a,"\n","model",b,"\n","ctrl",d&&d.name,"\n","loop",e);var f,g,h,i,j;if(e!==!1&&(e=!0),"string"==typeof a&&(j=a,a=u.template(j),a||(a=document.getElementById(j))),!c(b)&&a.getAttribute&&(g=a.getAttribute("data-model"),c(g)&&(b=p(u.data,g),void 0===b)))throw new Error("[Sparky] "+r(a)+" model not found in Sparky.data");return"string"==typeof d&&(d=u.ctrl[d]),!d&&a.getAttribute&&(h=a.getAttribute("data-ctrl"),i=a.tagName.toLowerCase(),d=c(h)?p(u.ctrl,h):m),e&&b&&void 0!==b.length&&"function"!=typeof b?q(a,b,d):("verbose"===u.debug&&console.groupCollapsed("[Sparky] Sparky(",a,",",b&&b.id&&"model#"+b.id||"model",",",d&&"ctrl",")"),f=Object.create(D),t(f,a,b,d),"verbose"===u.debug&&console.groupEnd(),f)}{var v={},w={template:"content"in document.createElement("template")},x=/\{\{\s*([\w\-\.\[\]]+)\s*\}\}/g,y=/\]$/,z=/\]?\.|\[/g,A=/^\.|^\[/,B=Array.prototype.reduce,C=Array.prototype.slice,D=d({get:function(){},set:function(){},create:function(){},destroy:function(){},observe:function(a,b,c){u.observe(a,b,c),this.on("destroy",function(){u.unobserve(a,b,c)})},appendTo:function(a){for(var b=-1;++b<this.length;)a.appendChild(this[b]);return this},removeFrom:function(a){for(var b=-1;++b<this.length;)a.removeChild(this[b]);return this}},a.mixin.events);new window.CustomEvent("change")}u.debug=!1,u.config={},u.settings={},u.data={},u.ctrl={},u.mixin=a.mixin||(a.mixin={}),u.Collection=a.Collection,u.templates=v,u.features=w,u.template=j,u.extend=d,u.prototype=D,a.Sparky=u}(window),function(a,b){function c(a){return"template"===a.tagName.toLowerCase()?!0:a===document.documentElement?!1:c(a.parentNode)}if(a){var d=a(document);d.ready(function(){var a;window.console&&(a=Date.now());for(var e,f,g=document.querySelectorAll("[data-ctrl], [data-model]"),h=-1,i=g.length,j=[];++h<i;){for(e=g[h],j.push(e);++h<i&&e.contains(g[h]);)f=g[h].getAttribute("data-model"),void 0!==f&&!/\{\{/.test(f);--h}if(!b.features.template)for(h=j.length;h--;)c(j[h])&&j.splice(h,1);b.debug&&console.log("[Sparky] DOM nodes to initialise:",j),j.forEach(function(a){b(a)}),window.requestAnimationFrame(function(){d.trigger("sparkyready")}),window.console&&console.log("[Sparky] DOM initialised in "+(Date.now()-a)+"ms")})}}(jQuery,Sparky),function(a){"use strict";function b(a){return window.AudioParam&&window.AudioParam.prototype.isPrototypeOf(a)}function c(a,b,c){function d(){var e=a[b];f!==e&&(f=e,c()),g&&window.requestAnimationFrame(d)}function e(){g=!1}var f=a[b],g=!0;return window.requestAnimationFrame(d),e}function d(a,b,d){return f.push([a,b,d,c(a,b,d)]),a}function e(a,b,c){for(var d,e=f.length;e--;)if(d=f[e],a===d[0]&&b===d[1]&&c===d[2])return d[3](),f.splice(e,1),a;return a}var f=[];!function(a){a.observe=function(a,c,e){if(b(a))return d(a,c,e);if("length"===c){var f=Object.getOwnPropertyDescriptor(a,c);if(!f.get&&!f.configurable)return console.warn("[Sparky] Are you trying to observe an array?. Sparky is going to observe it by polling. You may want to use a Sparky.Collection() to avoid this."),d(a,c,e)}return observe(a,c,e)},a.unobserve=function(a,c,d){if(b(a))return e(a,c,d);if("length"===c){var f=Object.getOwnPropertyDescriptor(a,c);if(!f.get&&!f.configurable)return e(a,c,d)}return unobserve(a,c,d)}}(a)}(Sparky),function(){"use strict";function a(){}function b(b){function c(){g=!1,b.apply(h,i)}function d(){e=a,g&&c(),b=a}function e(){h=this,i=arguments,g||(window.requestAnimationFrame(c),g=!0)}function f(){e.apply(this,arguments)}var g,h,i;return f.cancel=d,c(),f}Sparky.Throttle=b}(Sparky),function(a){"use strict";function b(a){a()}function c(a){return void 0!==a&&null!==a}function d(a){return""===a||isNaN(a)?a:parseFloat(a)}function e(b,c,d,e,f,g){var i=[],j=b.tagName.toLowerCase();return"verbose"===a.debug&&console.log("[Sparky] <"+j+">, children:",b.childNodes.length,Array.prototype.slice.apply(b.childNodes)),m(b,c,d,e,i),n(b,c,d,e,i,u),D[j]?D[j](b,b.name,c,d,e,f,g,i):h(b,c,d,e,f,g,i),i}function f(a,b,c,d){var e=s(a.nodeValue,b,c,d,function(b){a.nodeValue=b});return[e]}function g(a,b,c,d,e,f){var g=[];return h(a,b,c,d,e,f,g),g}function h(a,b,d,e,f,g,h){var i,j,k,l=[],m=-1;for(l.push.apply(l,a.childNodes),i=l.length;++m<i;)j=l[m],j.getAttribute&&(c(j.getAttribute("data-ctrl"))||c(j.getAttribute("data-model")))?(k=g(j),h.push(k.destroy.bind(k))):A[j.nodeType]&&h.push.apply(h,A[j.nodeType](j,b,d,e,f,g))}function i(a,b){a.setAttribute("class",b)}function j(a,b){a.className=b}function k(a,b,c){a.setAttributeNS(v,b,c)}function l(a,b,c){a.setAttribute(b,c)}function m(a,b,c,d,e){var f=a.getAttribute("class");if(f){var g=a instanceof SVGElement?i.bind(this,a):j.bind(this,a);e.push(s(f,b,c,d,g))}}function n(a,b,c,d,e,f){for(var g=f.length;g--;)o(a,f[g],b,c,d,e)}function o(a,b,d,e,f,g){var h,i=a instanceof SVGElement,j=i?a.getAttributeNS(v,b):a.getAttribute(b);c(j)&&""!==j&&(h=i?k.bind(this,a,b):l.bind(this,a,b),g.push(s(j,d,e,f,h)))}function p(b){var c=y.exec(b);return{name:c[1],fn:a.filters[c[1]],args:c[2]&&JSON.parse('["",'+c[2].replace(/\'/g,'"')+"]")}}function q(b,c){for(var d,e=z[c]||(z[c]=c.split("|").map(p)),f=e.length,g=-1;++g<f;){if(!e[g].fn)throw new Error("[Sparky] filter '"+e[g].name+"' is not a Sparky filter");"filter"===a.debug&&console.log("[Sparky] filter:",e[g].name,"value:",b,"args:",e[g].args),d=e[g].args,d[0]=b,b=e[g].fn.apply(a,d)}return b}function r(a){var b=[];return a.replace(x,function(a,c,d){2===c.length&&-1===b.indexOf(d)&&b.push(d)}),b}function s(b,d,e,f,g){function h(a,b,d,e){var g=f(d),h=c(g)?e?q(g,e):g:"";return h}function i(){g(b.replace(x,h))}var j=r(b),k=a.Throttle(i);return j.forEach(function(a){d(a,k)}),function(){j.forEach(function(a){e(a,k)}),k.cancel()}}function t(a,c,d,e,f,g){var h=A[a.nodeType](a,c,d,e,f,g);return function(){h.forEach(b)}}var u=["href","title","id","for","style","src","alt","min","max"],v="http://www.w3.org/1999/xlink",w="http://www.w3.org/2000/svg";window.xlink=v,window.xsvg=w;var x=/(\{\{\{?)\s*([\w\-\.\[\]]+)\s*(?:\|([^\}]+))?\s*\}\}\}?/g,y=/\s*([a-zA-Z0-9_\-]+)\s*(?:\:(.+))?/,z={},A={1:e,3:f,11:g},B=[],C=new CustomEvent("valuechange",{bubbles:!0}),D={input:function(b,e,f,g,h,i,j,k){var l=(x.exec(b.name)||B)[2];if(l){var m,n,o=h(l),p=d(b.getAttribute("value"));"checkbox"===b.type?(b.checked&&!c(o)&&i(l,p),m=a.Throttle(function(){b.checked=b.value===h(l)+"",b.dispatchEvent(C)}),f(l,m),n=function(){i(l,b.checked?d(b.value):void 0)},b.addEventListener("change",n)):"radio"===b.type?(!c(o)&&b.checked&&i(l,p),m=a.Throttle(function(){b.checked=b.value===h(l)+"",b.dispatchEvent(C)}),f(l,m),n=function(){b.checked&&i(l,d(b.value))},b.addEventListener("change",n)):(n=function(){i(l,d(b.value))},p&&!c(o)&&n(),m=a.Throttle(function(){var a=h(l),d=c(a)?a:"";b.value!==d+""&&(b.value=d,b.dispatchEvent(C))}),f(l,m),b.addEventListener("change",n),b.addEventListener("input",n)),k.push(function(){g(l,m),m.cancel(),b.removeEventListener("change",n),b.removeEventListener("input",n)})}},select:function(b,e,f,g,i,j,k,l){h(b,f,g,i,j,k,l);var m=(x.exec(b.name)||B)[2];if(m){var n=i(m),o=function(){j(m,d(b.value))};c(n)||o();var p=a.Throttle(function(){var a=i(m);b.value=c(a)?a:"",b.dispatchEvent(C)});f(m,p),b.addEventListener("change",o),l.push(function(){g(m,p),p.cancel(),b.removeEventListener("change",o)})}},option:function(a,b,c,d,e,f,g,i){n(a,c,d,e,i,["value"]),h(a,c,d,e,f,g,i)},textarea:function(b,d,e,f,g,h,i,j){var d=(x.exec(b.name)||B)[2];if(d){var k=g(d),l=b.value,m=function(){h(d,b.value)};!c(k)&&l&&m();var n=a.Throttle(function(){var a=g(d);b.value!==a+""&&(b.value=c(a)?a:"",b.dispatchEvent(C))});e(d,n),b.addEventListener("change",m),j.push(function(){f(d,n),n.cancel(),b.removeEventListener("change",m)})}}};a.bind=t,a.attributes=u}(window.Sparky||require("sparky")),function(){"use strict";function a(a){return a.name.replace("{{","").replace("}}","")}function b(a,b,c){return(a-b)/(c-b)}function c(a,b,c){return a*(c-b)+b}function d(d,e,f,g,h,i){function j(){var a;o||(a=c(i(b(g[l],m,n)),m,n),a!==f[l]&&(o=!0,f[l]=a,o=!1))}function k(){var a;o||(a=c(h(b(f[l],m,n)),m,n),a!==g[l]&&(o=!0,g[l]=a,o=!1))}var l=a(e),m=e.min?parseFloat(e.min):0,n=e.max?parseFloat(e.max):1,o=!1;Sparky.observe(g,l,j),Sparky.observe(f,l,k),j(),d.on("destroy",function(){Sparky.unobserve(g,l,j),Sparky.unobserve(f,l,k)})}function e(a,b){return function(c,e){var f=Sparky.extend({},e);return this.on("ready",d,c,f,e,a,b),f}}{var f=Math.pow,g=(Math.sqrt(2),f(2,.5)),h=f(2,1.5),i=f(2,2);f(2,2.5)}Sparky.ctrl["input-pow-1"]=e(function(a){return f(a,g)},function(a){return f(a,1/g)}),Sparky.ctrl["input-pow-3"]=e(function(a){return f(a,h)},function(a){return f(a,1/h)}),Sparky.ctrl["input-pow-4"]=e(function(a){return f(a,i)},function(a){return f(a,1/i)}),Sparky.ctrl["value-exp-10"]=e(function(a){return(Math.exp(a*Math.LN10)-1)/9},function(a){return Math.log(9*a+1)/Math.LN10}),Sparky.ctrl["value-pow-2"]=e(function(a){return f(a,2)},function(a){return f(a,.5)}),Sparky.ctrl["value-pow-3"]=e(function(a){return f(a,3)},function(a){return f(a,1/3)})}(),function(){"use strict";var a=0;Sparky.ctrl.debug=function(){console.log("Sparky DEBUG",a++)}}(),function(a,b){"use strict";function c(a){for(var b="";a--;)b+=" ";return b}function d(a){return a!==b&&null!==a}var e=a.settings=a.settings||{},f=[];e.months="January February March April May June July August September October November December".split(" "),e.days="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),e.ordinals=function(a){for(var b=[],c=0;c++<31;)b[c]=a[c]||"th";return b}({1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"});var g=Math.log10||function(a){return Math.log(a)/Math.LN10};a.filters={add:function(a,b){return parseFloat(a)+b},capfirst:function(a){return a.charAt(0).toUpperCase()+string.substring(1)},cut:function(a,b){return a.replace(RegExp(b,"g"),"")},date:function(){var a={a:function(a){return a.getHours()<12?"a.m.":"p.m."},A:function(a){return a.getHours()<12?"AM":"PM"},b:function(a){return e.months[a.getMonth()].toLowerCase().slice(0,3)},c:function(a){return a.toISOString()},d:function(a){return a.getDate()},D:function(a){return e.days[a.getDay()].slice(0,3)},F:function(a){return e.months[a.getMonth()]},g:function(a){return a.getHours()%12},G:function(a){return a.getHours()},h:function(a){return("0"+a.getHours()%12).slice(-2)},H:function(a){return("0"+a.getHours()).slice(-2)},i:function(a){return("0"+a.getMinutes()).slice(-2)},j:function(a){return a.getDate()},l:function(a){return e.days[a.getDay()]},m:function(a){return("0"+a.getMonth()).slice(-2)},M:function(a){return e.months[a.getMonth()].slice(0,3)},n:function(a){return a.getMonth()},O:function(a){return(a.getTimezoneOffset()<0?"+":"-")+("0"+Math.round(100*Math.abs(a.getTimezoneOffset())/60)).slice(-4)},r:function(a){return a.toISOString()},s:function(a){return("0"+a.getSeconds()).slice(-2)},S:function(a){return e.ordinals[a.getDate()]},U:function(a){return+a},w:function(a){return a.getDay()},y:function(a){return("0"+a.getFullYear()%100).slice(-2)},Y:function(a){return a.getFullYear()},Z:function(a){return 60*-a.getTimezoneOffset()}},b=/([a-zA-Z])/g;return function(c,d){var e=c instanceof Date?c:new Date(c);return d.replace(b,function(b,c){return a[c](e)})}}(e),decibels:function(a){return 20*g(a)},decimals:function(a){return Number.prototype.toFixed.call(a)},escape:function(){var a=document.createElement("pre"),b=document.createTextNode(this);return a.appendChild(b),function(c){return b.textContent=c,a.innerHTML}}(),equal:function(a,b,c,d){return(a===b?c:d)||""},first:function(a){return a[0]},floatformat:function(a){return Number.prototype.toFixed.call(a)},get:function(a,b){return a[b]},join:function(a){return Array.prototype.join.apply(a)},json:function(a){return JSON.stringify(a)},last:function(a){return a[a.length-1]},length:function(a){return a.length},linebreaksbr:function(){var a=/\n/;return function(b){return b.replace(a,"<br/>")}}(),lower:function(a){String.prototype.toLowerCase.apply(a)},lowercase:function(a){String.prototype.toLowerCase.apply(a)},multiply:function(a,b){return a*b},parseint:function(a){return parseInt(a,10)},percent:function(a){return 100*a},pluralize:function(a,b,c,d){return b=b||"",c=c||"s","fr"===d?2>a?b:c:1===a?b:c},prepad:function(a,b,c){var d=a.toString(),e=d.length;return 1>b-e?a:(f.length=0,f.length=b-e,f.push(d),f.join(c||" "))},postpad:function(a,b){var d=a.toString(),e=d.length,f=parseInt(b,10);return f===e?a:f>e?d+c(f-e):d.substring(0,f)},random:function(a){return a[Math.floor(Math.random()*a.length)]},replace:function(a,b,c){return a.replace(RegExp(b,"g"),c)},safe:function(){},slice:function(a){return Array.prototype.slice.apply(a)},slugify:function(a){return a.trim().toLowerCase().replace(/\W/g,"-").replace(/[_]/g,"-")},striptags:function(){var a=/<(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(b){return b.replace(a,"")}}(),striptagsexcept:function(){function a(a,c,d){return d&&-1!==b.indexOf(d)?"<"+(c||"")+d+">":""}var b,c,d=/<(\/)?(\w*)(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(e,f){return f?(b=f.split(" "),c=e.replace(d,a),b=!1,c):e.replace(d,"")}}(),symbolise:function(a){var b=a+"",c=1/0+"";return b===c?"∞":b==="-"+c?"-∞":a},time:function(){},truncatechars:function(a,b){return a.length>b?a.length.slice(0,b)+"&hellips;":a},unordered_list:function(a){for(var b=a,c=b.length,d=-1,e="";++d<c;)e+="<li>",e+=b[d],e+="</li>";return e},yesno:function(a,b,c){return a?b:d(c)?c:""}}}(window.Sparky||require("sparky"));