!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){"use strict";var b=a.mixin||(a.mixin={});b.array={filter:Array.prototype.filter,map:Array.prototype.map,reduce:Array.prototype.reduce,pop:Array.prototype.pop,push:Array.prototype.push,concat:Array.prototype.concat,sort:Array.prototype.sort,slice:Array.prototype.slice,splice:Array.prototype.splice,some:Array.prototype.some,indexOf:Array.prototype.indexOf,forEach:Array.prototype.forEach,each:function(){return Array.prototype.forEach.apply(this,arguments),this}}}(this),function(a){"use strict";function b(a){return a.events||Object.defineProperty(a,"events",{value:{}}),a.events}function c(a){return a.dependents||Object.defineProperty(a,"dependents",{value:[]}),a.dependents}function d(a,b){var d=c(a);-1===d.indexOf(b)&&d.push(b)}function e(a,b){var d=c(a);if(void 0===b)return void(d.length=0);var e=d.indexOf(b);-1!==e&&d.splice(e,1)}var f=a.mixin||(a.mixin={}),g={},h=Function.prototype.call.bind(Array.prototype.slice);f.events={on:function(a,c){if(1===arguments.length&&a.trigger)return d(this,a),this;var e,f,g=b(this);if("string"!=typeof a)return this;for(a=a.split(/\s+/),f=[c,h(arguments,2)];e=a.shift();)g[e]||(g[e]=[]),g[e].push(f);return this},off:function(a,b){var c,d;if(0===arguments.length){if(e(this),this.events)for(c in this.events)this.events[c].length=0,this.events[c]=void 0;return this}if(1===arguments.length&&a.trigger)return e(this,a),this;if(!this.events)return this;for("string"==typeof a?a=a.split(/\s+/):(b=a,a=Object.keys(this.events));c=a.shift();)d=this.events[c],d&&(b?d.forEach(function(a,c){a[0]===b&&d.splice(c,c+1)}):this.events[c]=void 0);return this},trigger:function(a){var c,d,e,f,i,j,k;"string"==typeof a?(c=a,d=this):(c=a.type,d=a.target);var l=b(this);if(j=h(arguments),l[c])for(e=l[c].slice(),f=-1,i=e.length,j[0]=d;++f<i;)k=j.concat(e[f][1]),e[f][0].apply(this,k);var m=this.dependents;if(!m)return this;for(f=-1,i=m.length,"string"==typeof a&&(j[0]=g,g.type=c,g.target=d);++f<i;)m[f].trigger.apply(m[f],j);return this}}}(this),function(a){function b(a){a[0].apply(null,a[1])}function c(a,b,c,d,e){var f=a[b],g=[d],h={enumerable:c?c.enumerable:!0,configurable:!1,get:function(){return f},set:function(a){a!==f&&(f=a,g.forEach(e))}};h.set.observers=g,Object.defineProperty(a,b,h)}function d(a,d,e){var f=Object.getOwnPropertyDescriptor(a,d),h=g.call(arguments,0),i=[e,h];return h.splice(1,2),f&&f.set&&f.set.observers?void f.set.observers.push(i):void c(a,d,f,i,b)}function e(a,b,c){var e;if("[object Function]"!==h.call(b))d.apply(null,arguments);else{c=b,e=g.call(arguments,0),e.splice(1,0,null);for(b in a)e[1]=b,d.apply(null,e)}}function f(a,b,c){var d,e;if(b instanceof Function){c=b;for(b in a)f(data,key,c)}else d=Object.getOwnPropertyDescriptor(a,b),e=d.set&&d.set.observers,e&&(c?e.forEach(function(a,b,d){a[0]===c&&d.splice(b,1)}):d.set.observers.length=0)}var g=Array.prototype.slice,h=Object.prototype.toString;a.observe=e,a.unobserve=f}(window.sparky||window),function(a,b,c){"use strict";function d(a){return a!==c&&null!==a}function e(a){return Array.prototype.slice.call(a,0)}function f(a,b){this[b]=a}function g(a){for(var b,c,d=0,e=arguments.length;++d<e;){b=arguments[d];for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}return a}function h(a,b){for(var c=a.index,d=a.length;d--;)if(a[d][c]===b)return a[d]}function i(a,b){var c=a.indexOf(b);if(-1!==c)return a[c]}function j(a,b){var c=a.index;if(!d(b[c]))return void a.push(b);for(var e=a.length;a[--e]&&(a[e][c]>b[c]||!d(a[e][c])););a.splice(e+1,0,b)}function k(a,b,d){for(d===c&&(d=-1);++d<a.length;)b===a[d]&&a.splice(d,1)}function l(){}function m(a){return a.map(e)}var n=!1;b.collection={add:function(a){return l(this),j(this,a),this.trigger("add",a),this},remove:function(a){return a=this.find(a),l(this),k(this,a),this.trigger("remove",a),this},update:function(a){if(d(a.length))return void Array.prototype.forEach.call(a,this.update,this);var b=h(this,a[this.index]);return b?g(b,a):this.add(a),this},find:function(a){var b=this.index;return"string"==typeof a||"number"==typeof a?h(this,a):d(a[b])?h(this,a[b]):i(this,a)},contains:function(a){return-1!==this.indexOf(a)},get:function(a){var b=this.length;if(0!==b){for(;--b;)if(this[b][a]!==this[b-1][a])return;return this[b][a]}},set:function(a,b){if(2!==arguments.length)return void(n&&console.warn("[tb-app] Can't set selection with [property, value]",arguments,". Don't be absurd."));for(var c=this.length;c--;)this[c][a]=b;return this},toJSON:function(){return m(this)}};var o=g({},b.events,b.set,b.array,b.collection),p={length:{value:0,enumerable:!1,writable:!0,configurable:!0}};a.Collection=function(a,b){function d(a,c){return a[b]>c[b]?1:-1}var e=Object.create(o,p);b=b||"id",Object.defineProperties(e,{index:{value:b}}),a===c?a=[]:a instanceof Array||(n&&console.log("Scribe: data not an array. Scribe cant do that yet."),a=[]),a.forEach(f,e);var g=e.length=a.length;return e.sort(d),observe(e,"length",function(a){for(;g-->a.length;)a[g]=c;g=a.length}),e}}(this,this.mixin),function(a){"use strict";function b(){}function c(a){return void 0!==a&&null!==a}function d(a){for(var b,c,d=0,e=arguments.length;++d<e;){b=arguments[d];for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}return a}function e(a,b){return a.appendChild(b),a}function f(a,b){for(;a.lastChild;)a.removeChild(a.lastChild);return a.appendChild(b),a}function g(a){var b=G.apply(a.childNodes),c=document.createDocumentFragment();return F.call(b,e,c)}function h(a){var b=document.getElementById(a);if(b)return b.content||g(b)}function i(a){var b=z[a]||(z[a]=h(a));return y.debug&&!b&&console.warn("[Sparky] template #"+a+" not found."),b&&b.cloneNode(!0)}function j(a){a.parentNode&&a.parentNode.removeChild(a)}function k(a,b){a.parentNode&&a.parentNode.insertBefore(b,a)}function l(a,b,c){return c.on("destroy",function(){j(a)},a),b}function m(a,b){var d=a.name;if(c(d)){var e=a.type;jQuery(a).on("change",function(a){var c="number"===e||"range"===e?parseFloat(a.target.value):"radio"===e||"checkox"===e?a.target.checked&&a.target.value:a.target.value;b[d]=c})}}function n(){}function o(){}function p(a,b){var d=b.shift(),e=a[d];return c(e)&&b.length?p(e,b):e}function q(a,b){return p(a,b.replace(C,"").split(D))}function r(a){function c(){g=!1,a.apply(h,i)}function d(){e=b,g&&c(),a=b}function e(){h=this,i=arguments,g||(window.requestAnimationFrame(c),g=!0)}function f(){e.apply(this,arguments)}var g,h,i;return f.cancel=d,c(),f}function s(a,b){return c(a)&&c(b)&&""!==b?"."===b?a:q(a,b):void 0}function t(a,b,c){var d=a.slice();setInterval(function(){a.length!==d.length&&(d=a.slice(),c(a))},16)}function u(a,b,d){function e(){var e,f,n=-1,o=m.length,p={};if(y.debug)var q=+new Date;for(;o--;)f=m[o],e=b.indexOf(f),-1===e?(j(h[o]),i[o].destroy()):h[o]&&i[o]&&(p[e]=[h[o],i[o]]);for(o=b.length,h.length=b.length,i.length=b.length,m.length=b.length;++n<o;)m[n]=b[n],p[n]?(h[n]=p[n][0],i[n]=p[n][1]):(h[n]=a.cloneNode(!0),i[n]=y(h[n],b[n],d),c(l)&&h[n].setAttribute("data-model",l+"["+n+"]")),k(g,h[n]);h.length&&"option"===a.tagName.toLowerCase()&&h[0].parentNode&&h[0].parentNode.dispatchEvent(I),y.debug&&console.log("[Sparky] collection rendered (length: "+b.length+" time: "+(+new Date-q)+"ms)")}var f=document.createComment(" [Sparky] collection start "),g=document.createComment(" [Sparky] collection end "),h=[],i=[],l=a.getAttribute("data-model"),m=[];k(a,f),k(a,g),j(a);var n=y.Throttle(e),o=Object.getOwnPropertyDescriptor(b,"length");return o.get||o.configurable?observe(b,"length",n):(y.debug&&console.warn("[Sparky] Are you trying to observe an array? You should set Sparky.config.dirtyObserveArrays = true;\n         Dirty observation is not particularly performant. Consider using a Sparky.Collection() in place of the array."),y.config.dirtyObserveArrays===!0&&t(b,"length",n)),{destroy:function(){for(var a=i.length,b=-1;++b<a;)i[b].destroy()},trigger:function(){for(var a=i.length,b=-1;++b<a;)i[b].trigger.apply(i[b],arguments)}}}function v(a){return["<",a.tagName.toLowerCase(),a.className?' class="'+a.className+'"':"",a.getAttribute("href")?' href="'+a.getAttribute("href")+'"':"",a.getAttribute("data-ctrl")?' data-ctrl="'+a.getAttribute("data-ctrl")+'"':"",a.getAttribute("data-model")?' data-model="'+a.getAttribute("data-model")+'"':"",a.id?' id="'+a.id+'"':"",">"].join("")}function w(a,b){return a.on("ready",function(){a.on(b)}),b}function x(a,d,e,g){function h(a,b,c){requestAnimationFrame(function(){f(b,c),a.trigger("template",b)})}function j(){h(a,d,t),j=b}function k(a,b){y.observe(p,a,b),t&&y.observe(p,a,j)}function l(a,b){y.unobserve(p,a,b)}function m(a){return p[a]}function n(a,b){p[a]=b}function o(b){var d,f=b.getAttribute("data-model");if(!c(f))return w(a,y(b,p));if("."===f)return w(a,y(b,e));if(E.test(f)){if(d=s(e,f.replace(E,"")),!d)throw new Error("[Sparky] No object at relative path '"+f+"' of model#"+e.id);return w(a,y(b,d))}if(B.lastIndex=0,B.test(f)){if(B.lastIndex=0,d=s(p,B.exec(f)[1]),!d)throw B.lastIndex=0,new Error("[Sparky] Property '"+B.exec(f)[1]+"' not in parent scope. "+v(b));return y(b,d)}return w(a,y(b,s(y.data,f)))}var p,q,r=d.getAttribute&&d.getAttribute("data-template"),t=r&&i(r);a.node=d,a.destroy=function(){return this.detach(),this.detach=b,this.trigger("destroy").off()},p=g&&g(d,e,a)||e||{},y.debug&&r&&console.log("[Sparky] template:",r),a.detach=q=y.bind(t||d,k,l,m,n,o),a.trigger("ready")}function y(a,b,d){var e,f,g,h;if("string"==typeof a&&(a=y.template(a)),!c(b)&&a.getAttribute&&(f=a.getAttribute("data-model"),c(f)&&(b=s(y.data,f),void 0===b)))throw new Error("[Sparky] '"+f+"' not found in Sparky.data");return"string"==typeof d&&(d=y.ctrl[d]),!d&&a.getAttribute&&(g=a.getAttribute("data-ctrl"),d=c(g)?s(y.ctrl,g):"input"===(h=a.tagName.toLowerCase())?m:"select"===h?n:"textarea"===h?o:l),b&&void 0!==b.length?u(a,b,d):("verbose"===y.debug&&console.groupCollapsed("[Sparky] Sparky(",a,",",b&&"model#"+b.id,",",d&&"ctrl",")"),e=Object.create(H),x(e,a,b,d),"verbose"===y.debug&&console.groupEnd(),e)}var z={},A={template:"content"in document.createElement("template")},B=/\{\{\s*([\w\-\.\[\]]+)\s*\}\}/g,C=/\]$/,D=/\]?\.|\[/g,E=/^\.|^\[/,F=Array.prototype.reduce,G=Array.prototype.slice,H=d({get:function(){},set:function(){},create:function(){},destroy:function(){}},a.mixin.events),I=new window.CustomEvent("change");y.debug=!1,y.config={},y.settings={},y.data={},y.ctrl={},y.mixin=a.mixin||(a.mixin={}),y.observe=a.observe,y.unobserve=a.unobserve,y.Throttle=r,y.Collection=a.Collection,y.templates=z,y.features=A,y.template=i,y.extend=d,y.prototype=H,a.Sparky=y}(window),function(a,b){function c(a){return"template"===a.tagName.toLowerCase()?!0:a===document.documentElement?!1:c(a.parentNode)}if(a){var d=a(document);d.ready(function(){var a;window.console&&(a=Date.now());for(var e,f,g=document.querySelectorAll("[data-ctrl], [data-model]"),h=-1,i=g.length,j=[];++h<i;){for(e=g[h],j.push(e);++h<i&&e.contains(g[h]);)f=g[h].getAttribute("data-model"),void 0!==f&&!/\{\{/.test(f);--h}if(!b.features.template)for(h=j.length;h--;)c(j[h])&&j.splice(h,1);b.debug&&console.log("[Sparky] DOM nodes to initialise:",j),j.forEach(function(a){b(a)}),window.requestAnimationFrame(function(){d.trigger("sparkyready")}),window.console&&console.log("[Sparky] DOM initialised in "+(Date.now()-a)+"ms")})}}(jQuery,Sparky),function(a){"use strict";function b(a){return""===a||isNaN(a)?a:parseFloat(a)}function c(a){a()}function d(a){return void 0!==a&&null!==a}function e(b,c,d,e,f,g){var i=[],j=b.tagName.toLowerCase();return"verbose"===a.debug&&console.log("[Sparky] <"+j+">, children:",b.childNodes.length,Array.prototype.slice.apply(b.childNodes)),m(b,c,d,e,i),n(b,c,d,e,i),h(b,c,d,e,f,g,i),C[j]&&C[j](b,b.name,c,d,e,f),i}function f(a,b,c,d){var e=s(a.nodeValue,b,c,d,function(b){a.nodeValue=b});return[e]}function g(a,b,c,d,e,f){var g=[];return h(a,b,c,d,e,f,g),g}function h(a,b,c,e,f,g,h){var i,j,k,l=[],m=-1;for(l.push.apply(l,a.childNodes),i=l.length;++m<i;)j=l[m],j.getAttribute&&(d(j.getAttribute("data-ctrl"))||d(j.getAttribute("data-model")))?(k=g(j),h.push(k.destroy.bind(k))):A[j.nodeType]&&h.push.apply(h,A[j.nodeType](j,b,c,e,f,g))}function i(a,b){a.setAttribute("class",b)}function j(a,b){a.className=b}function k(a,b,c){a.setAttributeNS(v,b,c)}function l(a,b,c){a.setAttribute(b,c)}function m(a,b,c,d,e){var f=a.getAttribute("class");if(f){var g=a instanceof SVGElement?i.bind(this,a):j.bind(this,a);e.push(s(f,b,c,d,g))}}function n(a,b,c,d,e){for(var f=u.length;f--;)o(a,u[f],b,c,d,e)}function o(a,b,c,e,f,g){var h,i=a instanceof SVGElement,j=i?a.getAttributeNS(v,b):a.getAttribute(b);d(j)&&""!==j&&(h=i?k.bind(this,a,b):l.bind(this,a,b),g.push(s(j,c,e,f,h)))}function p(a){var b={},c=[];return a.replace(x,function(a,d){b[d]||(b[d]=!0,c.push(d))}),c}function q(b){var c=y.exec(b);return{name:c[1],fn:a.filters[c[1]],args:c[2]&&JSON.parse("["+c[2].replace(/\'/g,'"')+"]")}}function r(b,c){for(var d=z[c]||(z[c]=c.split("|").map(q)),e=d.length,f=-1;++f<e;){if(!d[f].fn)throw new Error("[Sparky] filter '"+d[f].name+"' is not a Sparky filter");"filter"===a.debug&&console.log("[Sparky] filter:",d[f].name,"value:",b,"args:",d[f].args),b=d[f].fn.apply(b,d[f].args)}return b}function s(b,c,e,f,g){function h(a,b,c){var e=f(b);return d(e)?c?r(e,c):e:""}function i(){g(b.replace(x,h))}var j=p(b),k=a.Throttle(i);return j.forEach(function(a){c(a,k)}),function(){j.forEach(function(a){e(a,k)}),k.cancel()}}function t(a,b,d,e,f,g){var h=A[a.nodeType](a,b,d,e,f,g);return function(){h.forEach(c)}}var u=["href","title","id","for","style","value","src","alt"],v="http://www.w3.org/1999/xlink",w="http://www.w3.org/2000/svg";window.xlink=v,window.xsvg=w;var x=/\{\{\s*([\w\-]+)\s*(?:\|([^\}]+))?\s*\}\}/g,y=/\s*([a-zA-Z0-9_\-]+)\s*(?:\:(.+))?/,z={},A={1:e,3:f,11:g},B=[],C={input:function(a,c,e,f,g,h){var i=(x.exec(a.name)||B)[1];if(i){var j=g(i),k=b(a.value);"checkbox"===a.type?(!d(j)&&a.checked&&h(i,k),e(i,function(){a.checked=g(i)===k}),a.addEventListener("change",function(){h(i,a.checked?k:void 0)})):"radio"===a.type?(!d(j)&&a.checked&&h(i,k),e(i,function(){a.checked=g(i)===k}),a.addEventListener("change",function(){a.checked&&h(i,k)})):(!d(j)&&a.value&&h(i,a.value),e(i,function(){var b=g(i);a.value=d(b)?b:""}),a.addEventListener("change",function(){h(i,a.value)}))}},select:function(a,c,e,f,g,h){var i=(x.exec(a.name)||B)[1];if(i){var j=g(i);d(j)||h(i,b(a.value)),e(i,function(){var b=g(i);a.value=d(b)?b:""}),a.addEventListener("change",function(){h(i,b(a.value))})}},textarea:function(a,b,c,e,f,g){var b=(x.exec(a.name)||B)[1];if(b){var h=f(b),i=a.value;!d(h)&&i&&g(b,a.value),c(b,function(){var c=f(b);a.value=d(c)?c:""}),a.addEventListener("change",function(){console.log("TEXT CHANGE"),g(b,a.value)})}}};a.bind=t,a.attributes=u}(window.Sparky||require("sparky")),function(a){"use strict";function b(a){for(var b="";a--;)b+=" ";return b}var c=a.settings=a.settings||{},d=[];c.months="January February March April May June July August September October November December".split(" "),c.days="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),c.ordinals=function(a){for(var b=[],c=0;c++<31;)b[c]=a[c]||"th";return b}({1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"}),a.filters={add:function(a){return parseFloat(this)+a},capfirst:function(){return this.charAt(0).toUpperCase()+string.substring(1)},cut:function(a){return this.replace(RegExp(a,"g"),"")},prepad:function(a){var b=this.toString(),c=b.length;return d.length=0,d.length=a-c,d.push(b),a>c?d.join(" "):this},postpad:function(a){var c=this.toString(),d=c.length,e=parseInt(a,10);return e===d?this:e>d?c+b(e-d):c.substring(0,e)},date:function(){var a={a:function(a){return a.getHours()<12?"a.m.":"p.m."},A:function(a){return a.getHours()<12?"AM":"PM"},b:function(a){return c.months[a.getMonth()].toLowerCase().slice(0,3)},c:function(a){return a.toISOString()},d:function(a){return a.getDate()},D:function(a){return c.days[a.getDay()].slice(0,3)},F:function(a){return c.months[a.getMonth()]},g:function(a){return a.getHours()%12},G:function(a){return a.getHours()},h:function(a){return("0"+a.getHours()%12).slice(-2)},H:function(a){return("0"+a.getHours()).slice(-2)},i:function(a){return("0"+a.getMinutes()).slice(-2)},j:function(a){return a.getDate()},l:function(a){return c.days[a.getDay()]},m:function(a){return("0"+a.getMonth()).slice(-2)},M:function(a){return c.months[a.getMonth()].slice(0,3)},n:function(a){return a.getMonth()},O:function(a){return(a.getTimezoneOffset()<0?"+":"-")+("0"+Math.round(100*Math.abs(a.getTimezoneOffset())/60)).slice(-4)},r:function(a){return a.toISOString()},s:function(a){return("0"+a.getSeconds()).slice(-2)},S:function(a){return c.ordinals[a.getDate()]},U:function(a){return+a},w:function(a){return a.getDay()},y:function(a){return("0"+a.getFullYear()%100).slice(-2)},Y:function(a){return a.getFullYear()},Z:function(a){return 60*-a.getTimezoneOffset()}},b=/([a-zA-Z])/g;return function(c){var d=this instanceof Date?this:new Date(this);return c.replace(b,function(b,c){return a[c](d)})}}(c),decimals:Number.prototype.toFixed,escape:function(){var a=document.createElement("pre"),b=document.createTextNode(this);return a.appendChild(b),function(){return b.textContent=this,a.innerHTML}}(),first:function(){return this[0]},floatformat:Number.prototype.toFixed,join:Array.prototype.join,json:function(){return JSON.stringify(this)},last:function(){return this[this.length-1]},length:function(){return this.length},linebreaksbr:function(){var a=/\n/;return function(){return this.replace(a,"<br/>")}}(),lower:String.prototype.toLowerCase,lowercase:String.prototype.toLowerCase,multiply:function(a){return this*a},parseint:function(){return parseInt(this,10)},pluralize:function(a,b,c){return a=a||"",b=b||"s","fr"===c?2>this?a:b:1===this?a:b},random:function(){return this[Math.floor(Math.random()*this.length)]},replace:function(a,b){return this.replace(RegExp(a,"g"),b)},safe:function(){},slice:Array.prototype.slice,slugify:function(){return this.trim().toLowerCase().replace(/\W/g,"-").replace(/[_]/g,"-")},striptags:function(){var a=/<(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(){return this.replace(a,"")}}(),striptagsexcept:function(){function a(a,c,d){return d&&-1!==b.indexOf(d)?"<"+(c||"")+d+">":""}var b,c,d=/<(\/)?(\w*)(?:[^>'"]|"[^"]*"|'[^']*')*>/g;return function(e){return e?(b=e.split(" "),c=this.replace(d,a),b=!1,c):this.replace(d,"")}}(),time:function(){},truncatechars:function(a){return this.length>a?this.length.slice(0,a)+"&hellips;":this},unordered_list:function(){for(var a=this,b=a.length,c=-1,d="";++c<b;)d+="<li>",d+=a[c],d+="</li>";return d},yesno:function(a,b){return this?a:b}}}(window.Sparky||require("sparky"));