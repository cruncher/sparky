<!DOCTYPE html><html lang="en" is="sparky" class="js fullscreen-support"><head>
    <meta charset="utf-8">

    <meta name="author" content="@stephband">
    <meta name="description" content="Documentation for Sparky. Sparky is a live data-binding controller who wires up the custom sparky-template element with template tags, composeable includes, functional views and DOM renders batched to the browser frame rate.">
    <meta name="viewport" content="width=device-width">

    <title>Sparky</title>

    <script>
    document.documentElement.className = 'js';
    window.DEBUG = false;
    </script>

    <link rel="shortcut icon" href="images/logo-64x64.ico">
    <link rel="icon" type="image/png" href="images/logo-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="images/logo-64x64.png" sizes="64x64">
    <link rel="icon" type="image/png" href="images/logo-128x128.png" sizes="128x128">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:100,300,400,500,700">

    <link rel="stylesheet" href="../bolt/css/html.css">
    <link rel="stylesheet" href="../bolt/css/root.css">
    <link rel="stylesheet" href="../bolt/css/body.css">
    <link rel="stylesheet" href="../bolt/css/block.css">
    <link rel="stylesheet" href="../bolt/css/bubble.css">
    <link rel="stylesheet" href="../bolt/css/button.css">
    <link rel="stylesheet" href="../bolt/css/dialog.css">
    <link rel="stylesheet" href="../bolt/css/layer.css">
    <link rel="stylesheet" href="../bolt/css/type.css">
    <link rel="stylesheet" href="../bolt/css/text.css">
    <link rel="stylesheet" href="../bolt/css/color.css">

    <link rel="stylesheet" href="../dom/css/dom.css">
    <link rel="stylesheet" href="../fn/css/prism-cruncher.css">
    <link rel="stylesheet" href="../fn/css/tests.css">
    <link rel="stylesheet" href="../fn/css/docs.css">
    <link rel="stylesheet" href="../dom/css/theme.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="../fn/css/respond.css">
<template id="header-template" title="/fn/">
        <h1>{[title]} <span class="text-6">{[version]}</span></h1>

        <p class="text-8">
            {[description]}
        </p>

        <ul class="link-index index">
            <li><strong>repo:</strong> <a href="{[repository.url]}">{[repository.url]}</a></li>
            <li><strong>bugs:</strong> <a href="{[bugs.url]}">{[bugs.url]}</a></li>
        </ul>
</template><template id="title-template" title="/fn/">
    <h3 class="text-4" build-fn="after:body">{[name]}</h3>
</template><template id="attribute-template" title="/fn/">
    <article build-fn="append:body" class="attribute-toggle-block toggle-block block" toggleable="" id="{[id]}">
        <h3 class="text-5">
            <a href="#{[id]}">
                <code class="token language-js"><span>[</span><span build-fn="append:title"></span><span>]</span></code>
            </a>
        </h3>

        <pre><code class="language-js">import '/dom/js/{[name]}.js';</code></pre>
    </article>
</template><template id="method-template" title="/fn/">
    <article build-fn="append:body" class="toggle-block block" toggleable="" id="{[id]}">
        <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
            <a href="#{[id]}">
                <code build-fn="append:title" class="function language-js"></code>
            </a>
        </h3>
    </article>
</template><template id="property-template" title="/fn/">
    <article build-fn="append:body" class="toggle-block block" toggleable="" id="{[id]}">
        <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
            <a href="#{[id]}">
                <code build-fn="append:title" class="property language-js"></code>
            </a>
        </h3>
    </article>
</template><template id="function-template" title="/fn/">
    <article build-fn="append:body" class="toggle-block block" toggleable="" id="{[id]}">
        <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
            <a href="#{[id]}">
                <code build-fn="append:title" class="function language-js"></code>
            </a>
        </h3>
    </article>
</template><template id="fn-template" title="/fn/">
    <article build-fn="append:body" class="toggle-block block" toggleable="" id="{[id]}">
        <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
            <a href="#{[id]}">
                <code build-fn="append:title" class="language-js"></code>
            </a>
        </h3>
    </article>
</template><template id="section-template" title="/fn/">
    <article build-fn="append:body" class="toggle-block block active" id="{[id]}">
        <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
            <code build-fn="append:title" class="function language-js"></code>
        </h3>
    </article>
</template></head>

<body class="@3-grid-12 grid">
    <img class="x-1 xspan-3 @1-xspan-3 @3-x-2 @3-xspan-2" src="images/sparky-logo-dark.svg">

    <header class="x-1 xspan-3 @1-xspan-6 @2-xspan-9 @3-x-2 @3-xspan-4" id="header">
        
        <h1>Sparky <span class="text-6">3.1.2</span></h1>

        <p class="text-8">
            Sparky is a live data-binding controller who wires up the custom sparky-template element with template tags, composeable includes, functional views and DOM renders batched to the browser frame rate.
        </p>

        <ul class="link-index index">
            <li><strong>repo:</strong> <a href="https://github.com/cruncher/sparky.git">https://github.com/cruncher/sparky.git</a></li>
            <li><strong>bugs:</strong> <a href="https://github.com/cruncher/sparky/issues">https://github.com/cruncher/sparky/issues</a></li>
        </ul>

    </header>

    <section class="x-1 xspan-3 @1-xspan-6 @2-xspan-9 @3-x-2 grid" locateable="" id="functions">
        <header class="x-1 xspan-3 @1-xspan-4">
            <h2 class="text-2">HTML Templates</h2>
        </header>

        <div class="x-1 xspan-3 @1-xspan-4">
            
    <article class="toggle-block block active" id="template-is-sparky-template">
        <h3 class="text-5 ">
            <code class="function language-js"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sparky-template<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code>
        </h3>
    <p>First, import Sparky:</p>
<pre><code class="language-js"><span class="token keyword">import</span> <span class="token string">'/sparky/module.js'</span><span class="token punctuation">;</span></code></pre>
<p>Sparky registers the <code>is="sparky-template"</code> custom element. Sparky templates
in the DOM are automatically replaced with their own rendered content:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sparky-template<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    Hello!
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code class="language-html">Hello!</code></pre>
<p>Sparky templates extend HTML with 3 features: <strong>template tags</strong>, <strong>functions</strong>
and <strong>includes</strong>.</p>
</article>

        </div>

        <div class="x-1 xspan-3">
            
    <article class="toggle-block block active" id="tags">
        <h3 class="text-5 ">
            <code class="function language-js">tags</code>
        </h3>
    <p>Template tags are made of three parts:</p>
<pre><code class="language-html">{ [ path|pipe:params ] }</code></pre>
<p>Values are read from <code>path</code> in the rendered object, piped through any number of
<code>pipe</code> transforms and rendered into the DOM on animation frames.</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sparky-template<span class="token punctuation">"</span></span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fetch:package.json<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    { [ repository.url|prepend:'Repo: ' ] }
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code class="language-html">Repo: https://github.com/cruncher/sparky.git</code></pre>
</article>

        </div>

        <div class="x-1 xspan-3 @3-x-4">
            
    <article class="toggle-block block active" id="fn">
        <h3 class="text-5 ">
            <code class="function language-js">fn=""</code>
        </h3>
    <p>A <code>fn</code> attribute declares one or more functions to run on a template.
A <strong>function</strong> is expected to supply an object that Sparky uses to
render template <strong>tags</strong>:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sparky-template<span class="token punctuation">"</span></span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fetch:package.json<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    I am { [title] }.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code class="language-html">I am Sparky.</code></pre>
<p>The <code>fn</code> attribute may be declared on any element in a sparky template.
Here we use the built-in functions <code>fetch</code>, <code>get</code> and <code>each</code> to loop over an
array of keywords and generate a list:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sparky-template<span class="token punctuation">"</span></span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fetch:package.json<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get:keywords each<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{ [.] }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>javascript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>browser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span></code></pre>
</article>

        </div>

        <div class="x-1 xspan-3 @3-x-7">
            
    <article class="toggle-block block active" id="include">
        <h3 class="text-5 ">
            <code class="function language-js">include=""</code>
        </h3>
    <p>A template may include another template by referring to it via the <code>include</code>
attribute. The rendered content of the included template replaces the referring
template:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>my-template<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get:keywords each<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{ [.] }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sparky-template<span class="token punctuation">"</span></span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fetch:package.json<span class="token punctuation">"</span></span> <span class="token attr-name">include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#my-template<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>javascript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>browser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>Includes may be used inside templates, too:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sparky-template<span class="token punctuation">"</span></span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fetch:package.json<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#my-template<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>javascript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>browser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>The <code>include</code> attribute may contain template tags, making the included template
dependent on rendered data. This is how conditionals are written in Sparky.
Here, where there is no <code>keywords</code> property in <code>package.json</code> the template
with id <code>no-keywords</code> is rendered in place of <code>my-template</code>:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sparky-template<span class="token punctuation">"</span></span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fetch:package.json<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ [.keywords|yesno:#my-template,#no-keywords]}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></code></pre>
</article>

        </div>
    </section>

    <section class="x-1 xspan-3 @1-xspan-6 @2-xspan-9 @3-x-2 columns-grid grid" locateable="" id="attributes">
        <header class="x-1 xspan-3 @1-xspan-4 block">
            <h2 class="text-2">Built-ins</h2>
        </header>

        <div class="x-1 xspan-3 @1-x- @3-x-1">
            
    <h3 class="text-4">Pipes</h3><p>Pipes are transform functions applied to values at render time:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{[ date | dateformat:YYYY | prepend:'The year is ' ]}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>Many, but not all, pipes can be used in 2-way data binding tags - ie. those
declared in input or select <code>value</code> attributes.</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Date (earliest possible date is tomorrow)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{[ today|add-date:0000-00-01 ]}<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{[ date ]}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Percentage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{[ ratio|denormalise:linear,0,100 ]}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>


    <article class="toggle-block block" toggleable="" id="add">
        <h3 class="text-5 ">
            <a href="#add">
                <code class="language-js">add: n</code>
            </a>
        </h3>
    <p>Adds <code>n</code> to value. </p>
</article>

    <article class="toggle-block block" toggleable="" id="add-date">
        <h3 class="text-5 ">
            <a href="#add-date">
                <code class="language-js">add-date: yyyy-mm-dd</code>
            </a>
        </h3>
    <p>Adds ISO formatted <code>yyyy-mm-dd</code> to a date value, returning a new date. </p>
</article>

    <article class="toggle-block block" toggleable="" id="add-time">
        <h3 class="text-5 ">
            <a href="#add-time">
                <code class="language-js">add-time: 'hh:mm:ss'</code>
            </a>
        </h3>
    <p>Adds an ISO time in the form <code>'hh:mm:ss'</code> to a time value. (Note this
    string must be quoted because it contains ‘:’ characters.) </p>
</article>

    <article class="toggle-block block" toggleable="" id="to-db">
        <h3 class="text-5 ">
            <a href="#to-db">
                <code class="language-js">to-db</code>
            </a>
        </h3>
    <p>Converts value to dB scale. </p>
</article>

    <article class="toggle-block block" toggleable="" id="to-precision">
        <h3 class="text-5 ">
            <a href="#to-precision">
                <code class="language-js">to-precision: n</code>
            </a>
        </h3>
    <p>Converts number to string representing number to precision <code>n</code>. </p>
</article>

    <article class="toggle-block block" toggleable="" id="normalise">
        <h3 class="text-5 ">
            <a href="#normalise">
                <code class="language-js">normalise: curve, min, max</code>
            </a>
        </h3>
    <p>Return a value in the nominal range <code>0-1</code> from a value between <code>min</code> and
    <code>max</code> mapped to a <code>curve</code>, which is one of <code>linear</code>, <code>quadratic</code>, <code>exponential</code>. </p>
</article>

    <article class="toggle-block block" toggleable="" id="denormalise">
        <h3 class="text-5 ">
            <a href="#denormalise">
                <code class="language-js">denormalise: curve, min, max</code>
            </a>
        </h3>
    <p>Return a value in the range <code>min</code>-<code>max</code> of a value in the range <code>0</code>-<code>1</code>,
    reverse mapped to <code>curve</code>, which is one of <code>linear</code>, <code>quadratic</code>, <code>exponential</code>. </p>
</article>

    <article class="toggle-block block" toggleable="" id="floatformat">
        <h3 class="text-5 ">
            <a href="#floatformat">
                <code class="language-js">floatformat: n</code>
            </a>
        </h3>
    <p>Returns a number fixed to <code>n</code> decimal places from value. </p>
</article>

    <article class="toggle-block block" toggleable="" id="float-string">
        <h3 class="text-5 ">
            <a href="#float-string">
                <code class="language-js">float-string</code>
            </a>
        </h3>
    <p>Converts float values to strings. </p>
</article>

    <article class="toggle-block block" toggleable="" id="int-string">
        <h3 class="text-5 ">
            <a href="#int-string">
                <code class="language-js">int-string</code>
            </a>
        </h3>
    <p>Converts int values to strings. </p>
</article>

    <article class="toggle-block block" toggleable="" id="formatdate">
        <h3 class="text-5 ">
            <a href="#formatdate">
                <code class="language-js">formatdate: format</code>
            </a>
        </h3>
    <p>Converts a date object, ISO date string or UNIX time number (in seconds) to
    string in <code>format</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="formattime">
        <h3 class="text-5 ">
            <a href="#formattime">
                <code class="language-js">formattime: format</code>
            </a>
        </h3>
    <p>Converts ISO time string, a number (in seconds) or the UTC time values of
    a date object to a string formatted to <code>format</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="is">
        <h3 class="text-5 ">
            <a href="#is">
                <code class="language-js">is: a</code>
            </a>
        </h3>
    <p>Returns <code>true</code> where value is strictly equal to <code>a</code>, otherwise <code>false</code>. </p>
</article>

    <article class="toggle-block block" toggleable="" id="has">
        <h3 class="text-5 ">
            <a href="#has">
                <code class="language-js">has: property</code>
            </a>
        </h3>
    <p>Returns <code>true</code> where value is an object with the property <code>name</code>, otherwise <code>false</code>. </p>
</article>

    <article class="toggle-block block" toggleable="" id="append">
        <h3 class="text-5 ">
            <a href="#append">
                <code class="language-js">append: string</code>
            </a>
        </h3>
    <p>Returns value + <code>string</code>. </p>
</article>

    <article class="toggle-block block" toggleable="" id="prepend">
        <h3 class="text-5 ">
            <a href="#prepend">
                <code class="language-js">prepend: string</code>
            </a>
        </h3>
    <p>Returns <code>string</code> + value. </p>
</article>

    <article class="toggle-block block" toggleable="" id="slugify">
        <h3 class="text-5 ">
            <a href="#slugify">
                <code class="language-js">slugify</code>
            </a>
        </h3>
    <p>Returns the slug of value. </p>
</article>

    <article class="toggle-block block" toggleable="" id="root">
        <h3 class="text-5 ">
            <a href="#root">
                <code class="language-js">root: n</code>
            </a>
        </h3>
    <p>Returns the <code>n</code>th root of value. </p>
</article>

    <article class="toggle-block block" toggleable="" id="type">
        <h3 class="text-5 ">
            <a href="#type">
                <code class="language-js">type</code>
            </a>
        </h3>
    <p>Returns the <code>typeof</code> value. </p>
</article>

    <article class="toggle-block block" toggleable="" id="floor">
        <h3 class="text-5 ">
            <a href="#floor">
                <code class="language-js">floor</code>
            </a>
        </h3>
    <p>Floors a numeric value. </p>
</article>

    <article class="toggle-block block" toggleable="" id="localise">
        <h3 class="text-5 ">
            <a href="#localise">
                <code class="language-js">localise: n</code>
            </a>
        </h3>
    <p>Localises a number to <code>n</code> digits. </p>
</article>

    <article class="toggle-block block" toggleable="" id="lowercase">
        <h3 class="text-5 ">
            <a href="#lowercase">
                <code class="language-js">lowercase</code>
            </a>
        </h3>
    <p>Returns the lowercase string of value. </p>
</article>

    <article class="toggle-block block" toggleable="" id="pluralise">
        <h3 class="text-5 ">
            <a href="#pluralise">
                <code class="language-js">pluralise: str1, str2, lang</code>
            </a>
        </h3>
    <p>Where value is singular in a given <code>lang</code>, retuns <code>str1</code>, otherwise <code>str2</code>. </p>
</article>

    <article class="toggle-block block" toggleable="" id="yesno">
        <h3 class="text-5 ">
            <a href="#yesno">
                <code class="language-js">yesno: a, b</code>
            </a>
        </h3>
    <p>Where value is truthy returns <code>a</code>, otherwise <code>b</code>. </p>
</article>

        </div>

        <div class="x-1 xspan-3 @1-x-4 @3-x-4">
            
    <article class="toggle-block block" toggleable="" id="each">
        <h3 class="text-5 ">
            <a href="#each">
                <code class="language-js">each</code>
            </a>
        </h3>
    <pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get:keywords each<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{ [.] }<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span></code></pre>
<p>Where scope is an array or array-like, <code>each</code> clones the DOM node and
renders a clone for each value in the array. (Where there are functions
following <code>each</code> in the attribute, they are run on each clone.)</p>
</article>

    <article class="toggle-block block" toggleable="" id="entries">
        <h3 class="text-5 ">
            <a href="#entries">
                <code class="language-js">entries</code>
            </a>
        </h3>
    <p>Maps scope to an array of <code>[key, value]</code> arrays.</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get:repository entries each<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{ [0]}: { [1]}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>type: git<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>url: https://github.com/cruncher/sparky.git<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span></code></pre>
</article>

    <article class="toggle-block block" toggleable="" id="fetch">
        <h3 class="text-5 ">
            <a href="#fetch">
                <code class="language-js">fetch: url</code>
            </a>
        </h3>
    <p>Fetches and parses a JSON file and uses it as scope to render the node.</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fetch:package.json<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{ [title] }!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Sparky!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
</article>

    <article class="toggle-block block" toggleable="" id="get">
        <h3 class="text-5 ">
            <a href="#get">
                <code class="language-js">get: path</code>
            </a>
        </h3>
    <p>Maps scope to the value at <code>path</code> of the current scope:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">fn</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get:repository<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ [ url ]}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{ [type|capitalise]} repository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://github.com/cruncher/sparky.git<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Git repository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span></code></pre>
</article>

        </div>

        <div class="x-1 xspan-3 @1-x-4 @3-x-7">
            
    <h3 class="text-4">register</h3><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> register <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./sparky/module.js'</span><span class="token punctuation">;</span>

<span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'my-function'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// `this` is a stream of scope objects</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>scope<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Map scope...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

        </div>
    </section>

    <section class="x-1 xspan-3 @1-xspan-6 @2-xspan-9 @3-x-2 columns-grid grid" locateable="" id="attributes">
        <header class="x-1 xspan-3 @1-xspan-4 block">
            <h2 class="text-2">API</h2>
        </header>

        <div class="x-1 xspan-3">
            
    <article class="toggle-block block" toggleable="" id="sparky-nodeorselector">
        <h3 class="text-5 ">
            <a href="#sparky-nodeorselector">
                <code class="function language-js"><span class="token function">Sparky</span><span class="token punctuation">(</span>nodeOrSelector<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Mounts any element as a template and returns a pushable stream. Push an object
to the stream to have it rendered by the template:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title-div<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    I am { [title] }.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
<pre><code><span class="token keyword">import</span> Sparky <span class="token keyword">from</span> <span class="token string">'/sparky/module.js'</span><span class="token punctuation">;</span>

<span class="token comment">// Mount the &lt;div&gt;</span>
<span class="token keyword">const</span> sparky <span class="token operator">=</span> <span class="token function">Sparky</span><span class="token punctuation">(</span><span class="token string">'#title-div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Render it by pushing in an object</span>
sparky<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'rendered'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Results in:</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title-div<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    I am rendered.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
</article>

        </div>
    </section>

    <aside class="x-1 xspan-3 text-9">
        <h4 class="text-4">A note to the Django enthusiast</h4>
        <p>By now, you'll have noticed some similarities between Django and Sparky: template-led views, tags with filters and so on. Yes, Sparky was influenced by Django at <a href="https://cruncher.ch">Cruncher</a>, where we frequently write hybrid back-end/front-end templates, hence the similar syntax. They play quite nice together!</p>
    </aside>

    <!-- Build document -->
    

    <!-- Document interactivity -->
    <script type="module">
        import '../dom/js/device.js';
        import '../dom/js/popable.js';
        import '../dom/js/toggleable.js';
        import '../dom/js/locateable.js';
        import '../dom/js/switchable.js';
        import '../dom/js/fullscreenable.js';
        import * as sparky from './module.js';
        window.$ = sparky;
    </script>

</body></html>