!function(t){t.console&&t.console.log&&console.log("Fn          - https://github.com/stephband/fn")}(this),function(t){"use strict"
function e(t,e,n,r){return r.toString=function(){return/function\s*[\w\d]*\s*\([,\w\d\s]*\)/.exec(n.toString())+" { ["+t+"] }"},Dt&&Object.defineProperty(r,"length",{value:e}),r}function n(t,e){return function(){return console.warn("Deprecation warning: "+e),t.apply(this,arguments)}}function r(){if(!t.console)return e
var e=arguments[arguments.length-1],n=Ft.slice.call(arguments,0,arguments.length-1)
return n.push((e.name||"function")+"("),function(){n.push.apply(n,arguments),n.push(")"),console.group.apply(console,n)
var t=e.apply(this,arguments)
return console.groupEnd(),console.log("⬅",t),t}}function o(){}function i(t){return t}function u(){return this}function a(t,e){return e(t)}function c(t,e){return function(){e.apply(this,C(arguments,t))}}function s(t,e){return function(n){return t(e(n))}}function f(){var t=arguments
return function(e){return Ft.reduce.call(t,a,e)}}function l(t){var e=new Map
return function(n){if(arguments.length>1)throw new Error("Fn: Cached function called with "+arguments.length+" arguments. Accepts exactly 1.")
if(e.has(n))return e.get(n)
var r=t(n)
return e.set(n,r),r}}function d(t,e){return"function"==typeof t?t.apply(null,e):t}function p(t,e,n){n=n||t.length
var r=1===n?e?t:l(t):l(function(r){return p(function(){var e=[r]
return e.push.apply(e,arguments),t.apply(null,e)},e,n-1)})
return function(e){return 1===arguments.length?r(e):arguments.length===n?t.apply(null,arguments):arguments.length>n?d(t.apply(null,Ft.splice.call(arguments,0,n)),arguments):d(r(e),Ft.slice.call(arguments,1))}}function h(t){return function(){var e=t.apply(this,arguments)
return t=o,e}}function m(t){return function(e,n){return t(n,e)}}function v(t,e){return"function"==typeof e.get?function(){var n=t.apply(null,arguments)
return e.get(n).apply(this,arguments)}:function(){var n=t.apply(null,arguments)
return(e[n]||e.default).apply(this,arguments)}}function g(t){return function(e){var n=t[e]||t.default
return n&&n.apply(this,_(1,arguments))}}function y(t,e){if(t===e)return!0
if("object"!=typeof t||"object"!=typeof e)return!1
var n=Object.keys(t),r=Object.keys(e)
if(n.length!==r.length)return!1
for(var o=n.length;o--;)if(!y(t[n[o]],e[n[o]]))return!1
return!0}function b(t){return!!t||void 0!==t&&null!==t&&!Number.isNaN(t)}function w(t,e){return t!==e}function F(t){return typeof t}function x(t){return Et.toString.apply(t).slice(8,-1)}function E(t){if(t.toArray)return t.toArray()
var e,n=[],r=t.length
if("number"!=typeof t.length)return n
for(n.length=r,e=0;e<r;e++)n[e]=t[e]
return n}function S(t){return parseInt(t,10)}function T(t){return t.toString()}function k(t,e,n){var r=M(t,function(t){return e(n,t)})
t.splice(r,0,n)}function M(t,e){for(var n=t.length,r=n+n%2,o=0;(r=Math.floor(r/2))&&o+r<=n;)e(t[o+r-1])>=0&&(o+=r,r+=r%2)
return o}function D(t,e){return t.indexOf(e)===-1&&t.push(e),t}function L(t,e){return t.push(e),t}function O(t,e){return t===e?0:t>e?1:-1}function C(t,e){return Array.isArray(e)?e.concat(Array.isArray(t)?t:E(t)):e.concat?e.concat(t):E(e).concat(Array.isArray(t)?t:E(t))}function A(t,e){return e.includes?e.includes(t):e.contains?e.contains(t):Ft.includes?Ft.includes.call(e,t):Ft.indexOf.call(e,t)!==-1}function N(t,e){return e&&e.map?e.map(t):Ft.map.call(e,t)}function P(t,e){var n,r
if("function"==typeof e.each)e.each(t)
else for(n=e.length,r=-1;++r<n;)t(e[r])
return e}function j(t,e){return e.filter?e.filter(t):Ft.filter.call(e,t)}function q(t){if("number"==typeof t.length)return t[t.length-1]}function I(t,e,n){return n.reduce?n.reduce(t,e):Ft.reduce.call(n,t,e)}function _(t,e){if(e.slice)return e.slice(t)
if(e.rest)return e.rest(t)
for(var n=[],r=e.length-t;r--;)n[r]=e[r+t]
return n}function B(t,e){if(e.slice)return e.slice(0,t)
if(e.take)return e.take(t)
for(var n=[],r=t;r--;)n[r]=e[r]
return n}function H(t,e){return Ft.find.call(e,t)}function z(t,e,n){for(var r=-1,o=e.length,i=t(n);++r<o&&t(e[r])<=i;);e.splice(r,0,n)}function R(t,e){t.remove&&t.remove(e)
var n=t.indexOf(e)
n!==-1&&t.splice(n,1)}function Y(t,e){if(e.split&&"string"!=typeof e)return e.split(t)
for(var n,r=[],o=-1;void 0!==(n=e[++o]);)t(n)||0===o?r.push([n]):r[r.length].push(n)
return r}function $(t,e){var n=E(t)
return j(function(t){var e=n.indexOf(t)
return e===-1||(n.splice(e,1),!1)},e).concat(n)}function W(t,e){var n=E(t)
return j(function(t){var e=n.indexOf(t)
return e!==-1&&(n.splice(e,1),!0)},e)}function X(t,e){var n=E(t)
return N(function(t){var e=n.indexOf(t)
return e>-1&&n.splice(e,1),t},e).concat(n)}function J(t){return t.unique?t.unique():I(D,[],t)}function U(t,e){return e.sort?e.sort(t):Ft.sort.call(e,t)}function K(t,e){return null===e[t]?void 0:e[t]}function G(t,e,n){return"function"==typeof e.set?e.set(t,n):e[t]=n}function Q(t,e,n){for(var r=n.length,o=-1;++o<r;)if(n[o][t]===e)return n[o]}function V(t,e,n,r){var o=t.exec(e)
if(!o)throw new Error('Fn.getPath(path, object): invalid path "'+e+'"')
var i=o[1],u=o[3]?Q(i,o[2]?o[3]:parseFloat(o[3]),n):n[i]
return r(t,e,u)}function Z(t,e,n){return t.lastIndex===e.length?n:n&&"object"==typeof n?V(t,e,n,Z):void 0}function tt(t,e,n,r){var o=t.exec(e)
if(!o)throw new Error('Fn.getPath(path, object): invalid path "'+e+'"')
var i=o[1]
if(t.lastIndex===e.length){if(o[3])throw new Error('Fn.setPath(path, object): invalid path "'+e+'"')
return n[i]=r}var u=o[3]?Q(i,o[2]?o[3]:parseFloat(o[3]),n):n[i]
if(!u||"object"!=typeof u){if(u={},o[3]){if(!n.push)throw new Error("Not supported")
u[i]=o[2]?o[3]:parseFloat(o[3]),n.push(u)}G(i,n,u)}return tt(t,e,u,r)}function et(t,e){return Pt.lastIndex=0,Z(Pt,t,e)}function nt(t,e,n){return Pt.lastIndex=0,tt(Pt,t,e,n)}function rt(t,e){return t+e}function ot(t,e){return e+t}function it(t,e,n){for(var r=-1,o="";o.length<e-n.length;)o+=t[++r%t.length]
return n=o+n,n.slice(n.length-e)}function ut(t,e,n){for(;n.length<e;)n+=t
return n.slice(0,e)}function at(t,e){return e?at(e,t%e):t}function ct(t,e){return t*e/at(t,e)}function st(t,e,n,r){return((t*r+e)*r+n)*r}function ft(t,e,n,r){return(3*t*r+2*e)*r+n}function lt(t,e,n,r,o){var i,u,a,c=r
for(a=0;a<8;a++){if(i=st(t,e,n,c)-r,Math.abs(i)<o)return c
if(u=ft(t,e,n,c),Math.abs(u)<1e-6)break
c-=i/u}var s=0,f=1
if(c=r,c<s)return s
if(c>f)return f
for(;s<f;){if(i=st(t,e,n,c),Math.abs(i-r)<o)return c
r>i?s=c:f=c,c=.5*(f-s)+s}return c}function dt(t){return It.then(t),!0}function pt(t,e){function n(){var t=o.length
for(r=void 0,i=e();t--;)o.shift()(i)}if("number"!=typeof t)throw new Error("Timer(duration) requires a duration in seconds ("+t+")")
e=e||jt
var r,o=[],i=-(1/0)
return{now:e,request:function(u){if("function"!=typeof u)throw new Error("fn is not a function.")
if(o.push(u),!r){var a=e()
return i+t>a?r=setTimeout(n,1e3*(i+t-a)):dt(n),u}},cancel:function(t){var e=o.indexOf(t)
e!==-1&&(o.splice(e,1),o.length||(clearTimeout(r),r=void 0))}}}function ht(e,n,r){function i(){d=o,l=n(u)}function u(){d=i,e.apply(s,f)}function a(t){d===o&&void 0!==l&&r(l),d=o}function c(){s=this,f=arguments,d()}n=n||t.requestAnimationFrame,r=r||t.cancelAnimationFrame
var s,f,l,d=i
return c.cancel=a,c}function mt(t,e){function n(){u=!1,t.apply(a,c)}function r(){s=o,u&&clearTimeout(u)}function i(){a=this,c=arguments,s()}var u,a,c,s=function(){u&&clearTimeout(u),u=setTimeout(n,1e3*(e||0))}
return i.cancel=r,i}function vt(t){return 0===t.length||"done"===t.status}function gt(t){var e=t.shift()
return void 0===e?arguments[1]:gt(t,e)}function yt(t,e){var n=Object.create(t)
return n.shift=e,n}function bt(t){if(!this||!bt.prototype.isPrototypeOf(this))return new bt(t)
var e=this
if(!t)return void(e.status="done")
var n=t()
return void 0===n?void(e.status="done"):void(this.shift=function(){if("done"!==e.status){var r=n
return n=t(),void 0===n&&(e.status="done"),r}})}var wt=t.DEBUG===!0,Ft=Array.prototype,xt=Number.prototype,Et=Object.prototype,St=String.prototype,Tt=Object.assign,kt=Object.freeze(Object.defineProperties([],{shift:{value:o}})),Mt=180/Math.PI,Dt=function(){var t=function(){}
try{Object.defineProperty(t,"length",{value:2})}catch(t){return!1}return 2===t.length}()
if(wt){var Lt=p
p=function(t,n){var r=arguments[2]||t.length
return e("curried",r,t,Lt(t,n,r))}}var Ot={url:/^(?:(?:(?:(?:[fht]{1,2}tps?:)?\/\/)?[-\w]+\.[-\w]+|\/[-\w.]+)(?:\/?[-\w.]+)*\/?|(?:[-\w.]+\/)+[-\w.]*)(?:[#?][#?!\[\]$\,;&=-\w.]*)?$/,email:/^((([a-z]|\d|[!#$%&'*+\-\/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#$%&'*+\-\/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,date:/^\d{4}-(?:0[1-9]|1[012])-(?:0[1-9]|[12][0-9]|3[01])$/,hexColor:/^(#)?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,hslColor:/^(?:(hsl)(\())?\s?(\d{1,3}(?:\.\d+)?)\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?(\))?$/,rgbColor:/^(?:(rgb)(\())?\s?(\d{1,3})\s?,\s?(\d{1,3})\s?,\s?(\d{1,3})\s?(\))?$/,hslaColor:/^(?:(hsla)(\())?\s?(\d{1,3}(?:\.\d+)?)\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?,\s?(\d{1,3}(?:\.\d+)?)%\s?,\s?([01](?:\.\d+)?)\s?(\))?$/,rgbaColor:/^(?:(rgba)(\())?\s?(\d{1,3})\s?,\s?(\d{1,3})\s?,\s?(\d{1,3})\s?,\s?([01](?:\.\d+)?)\s?(\))?$/,cssValue:/^(-?\d+(?:\.\d+)?)(px|%|em|ex|pt|in|cm|mm|pt|pc)?$/,cssAngle:/^(-?\d+(?:\.\d+)?)(deg)?$/,image:/(?:\.png|\.gif|\.jpeg|\.jpg)$/,float:/^[+-]?(?:\d*\.)?\d+$/,int:/^(-?\d+)$/},Ct=Object.is||function(t,e){return t===e},At=m(A),Nt=p(function(t,e){return void 0===e?void 0:(t(e),e)},!0),Pt=/\[?([-\w]+)(?:=(['"])?([-\w]+)\2)?\]?\.?/g,jt=t.performance&&t.performance.now?function(){return t.performance.now()/1e3}:function(){return+new Date/1e3},qt=t.requestAnimationFrame,It=Promise.resolve()
Tt(bt.prototype,{shift:o,of:function(){return this.constructor.of.apply(this.constructor,arguments)},ap:function(t){var e=this.shift
return yt(this,function(){var n=e()
return void 0===n?void 0:t.map(n)})},unshift:function(){var t=this,e=E(arguments)
return yt(this,function(){return(e.length?e:t).shift()})},catch:function(t){var e=this
return yt(this,function(){try{return e.shift()}catch(e){return t(e)}})},chain:function(t){return this.map(t).join()},clone:function(){var t=this,e=this.shift,n=[],r=[],o=!1
this.shift=function(){var i
return n.length?(i=n.shift(),!n.length&&o&&(t.status="done"),i):o?void 0:(i=e(),"done"===t.status&&(o=!0),void 0!==i&&r.push(i),i)}
var i=new bt(function(){var i
return r.length?r.shift():o?void 0:(i=e(),"done"===t.status&&(o=!0,t.status=void 0),void 0!==i&&n.push(i),i)})
return i},concat:function(){var t=E(arguments),e=this,n=yt(this,function r(){if(void 0===e)return void(n.status="done")
if(vt(e))return e=t.shift(),r()
var o=e.shift()
return n.status=0===t.length&&vt(e)?"done":void 0,o})
return n},dedup:function(){var t
return this.filter(function(e){var n=t
return t=e,n!==e})},filter:function(t){var e=this
return yt(this,function(){for(var n;void 0!==(n=e.shift())&&!t(n););return n})},first:function(){var t=this
return yt(this,h(function(){return t.status="done",t.shift()}))},join:function(){var t=this,e=kt
return yt(this,function n(){var r=e.shift()
return void 0!==r?r:(e=t.shift(),void 0!==e?n():void(e=kt))})},latest:function(){var t=this
return yt(this,function(){return gt(t)})},map:function(t){return yt(this,s(function(e){return void 0===e?void 0:t(e)},this.shift))},chunk:function(t){var e=this,n=[]
return yt(this,t?function(){for(var r,o;n.length<t;){if(r=e.shift(),void 0===r)return
n.push(r)}if(n.length>=t)return o=n,n=[],bt.of.apply(bt,o)}:function(){return n=e.toArray(),n.length?n:void 0})},fold:function(t,e){var n=0
return this.map(function(r){return e=t(e,r,n++)}).unshift(e)},partition:function(t){function e(t,e){var r=Stream.of().on("pull",n)
return r.key=t,i.set(t,r),r}function n(u,a){var c=r.shift()
if(void 0!==c){var s=t(c),f=i.get(s)
return f===a?c:(void 0===f&&(f=e(s,c),o.push(f)),f.push(c),n(u,a))}}var r=this,o=[],i=new Map
return t=t||bt.id,yt(this,function n(){if(o.length)return o.shift()
var u=r.shift()
if(void 0!==u){var a=t(u),c=i.get(a)
return void 0===c?(c=e(a,u),c.push(u),c):(c.push(u),n())}})},reduce:function(t,e){return this.fold(t,e).latest().shift()},take:function(t){var e=this,n=0
return yt(this,function(){var r
if(n<t){if(r=e.shift(),void 0===r)return
return++n===t&&(e.status="done"),r}})},sort:function(t){t=t||bt.byGreater
var e=this,n=[]
return yt(this,function(){for(var r;void 0!==(r=e.shift());)k(n,t,r)
return n.shift()})},split:function(t){var e=this,n=[]
return yt(this,function r(){var o,i=e.shift()
return void 0!==i?t(i)?(o=n,n=[i],o.length?o:r()):(n.push(i),r()):n.length?(o=n,n=[],o):void 0})},syphon:function(t){var e=this.shift,n=[],r=[]
return this.shift=function(){if(n.length)return n.shift()
for(var o;void 0!==(o=e())&&t(o);)r.push(o)
return o},yt(this,function(){if(r.length)return r.shift()
for(var o;void 0!==(o=e())&&!t(o);)n.push(o)
return o})},rest:function(t){var e=this
return yt(this,function(){for(;t-- >0;)e.shift()
return e.shift()})},unique:function(){var t=this,e=[]
return yt(this,function n(){var r=t.shift()
return void 0===r?void 0:e.indexOf(r)===-1?(e.push(r),r):n()})},each:function(t){for(var e;void 0!==(e=this.shift());)t.call(this,e)
return this},find:function(t){return this.filter(t).first().shift()},next:function(){return{value:this.shift(),done:this.status}},pipe:function(t){if(!t||!t.on)throw new Error("Fn: Fn.pipe(object) object must be a stream. ("+t+")")
return t.on("pull",this.shift)},tap:function(t){return this.shift=bt.compose(Nt(t),this.shift),this},toJSON:function(){return this.reduce(L,[])},toString:function(){return this.reduce(rt,"")},process:n(function(t){return t(this)},".process() is deprecated"),last:n(function(){var t=this
return yt(this,function(){return gt(t)})},".last() is now .latest()")}),bt.prototype.toArray=bt.prototype.toJSON,t.Symbol&&(bt.prototype[Symbol.iterator]=function(){return this}),t.Fn=Tt(bt,{of:function(){return bt.from(arguments)},from:function(t){var e
if("number"==typeof t.length)return e=-1,new bt(function n(){return++e>=t.length?void 0:void 0===t[e]?n():t[e]})
if("function"==typeof t.shift&&void 0===t.length)return new bt(function(){return t.shift()})
if("function"==typeof t.next)return new bt(function e(){var n=t.next()
return n.done?n.value:void 0===n.value?e():n.value})
throw new Error("Fn: from(object) object is not a list of a known kind (array, functor, stream, iterator).")},Timer:pt,nothing:kt,id:i,noop:o,self:u,cache:l,compose:s,curry:p,choose:g,flip:m,once:h,overload:p(v),pipe:f,throttle:ht,wait:mt,equals:p(y),is:p(Ct),isDefined:b,isIn:p(At,!0),isNot:p(w),and:p(function(t,e){return!(!t||!e)}),not:function(t){return!t},or:p(function(t,e){return t||e}),xor:p(function(t,e){return(t||e)&&!!t!=!!e}),isGreater:p(function(t,e){return e>t}),by:p(function(t,e,n){return O(e[t],n[t])},!0),byGreater:p(O),byAlphabet:p(function(t,e){return St.localeCompare.call(t,e)}),toType:F,toClass:x,toArray:E,toString:T,toInt:S,toFloat:parseFloat,toPlainText:function(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},toStringType:function(t,e){return function(n){for(var r=e.length;r--;)if(t[e[r]].test(n))return e[r]
try{return JSON.parse(n),"json"}catch(t){}return"string"}}(Ot,["url","date","email","float","int"]),concat:p(C,!0),contains:p(A,!0),diff:p($,!0),each:p(P,!0),filter:p(j,!0),find:p(H,!0),insert:p(z,!0),intersect:p(W,!0),last:q,latest:gt,map:p(N,!0),tap:p(Nt),reduce:p(I,!0),remove:p(R,!0),rest:p(_,!0),sort:p(U,!0),split:p(Y,!0),take:p(B,!0),unite:p(X,!0),unique:J,assign:p(Tt,!0,2),get:p(K,!0),set:p(G,!0),getPath:p(et,!0),setPath:p(nt,!0),invoke:p(function(t,e,n){return n[t].apply(n,e)},!0),add:p(function(t,e){return e+t}),multiply:p(function(t,e){return e*t}),mod:p(function(t,e){return e%t}),min:p(function(t,e){return t>e?e:t}),max:p(function(t,e){return t<e?e:t}),pow:p(function(t,e){return Math.pow(e,t)}),exp:p(function(t,e){return Math.pow(t,e)}),log:p(function(t,e){return Math.log(e)/Math.log(t)}),root:p(function(t,e){return Math.pow(e,1/t)}),gcd:p(at),lcm:p(ct),todB:function(t){return 20*Math.log10(t)},toLevel:function(t){return Math.pow(2,t/6)},toRad:function(t){return t/Mt},toDeg:function(t){return t*Mt},factorise:function(t,e){var n=at(t,e)
return[t/n,e/n]},gaussian:function(){return Math.random()+Math.random()-1},toPolar:function(t){var e=t[0],n=t[1]
return[0===e?Math.abs(n):0===n?Math.abs(e):Math.sqrt(e*e+n*n),Math.atan2(e,n)]},toCartesian:function(t){var e=t[0],n=t[1]
return[Math.sin(n)*e,Math.cos(n)*e]},toFixed:p(function(t,e){return xt.toFixed.call(e,t)}),limit:p(function(t,e,n){return n>e?e:n<t?t:n}),wrap:p(function(t,e,n){return(n<t?e:t)+(n-t)%(e-t)}),normalise:p(function(t,e,n){return(n-t)/(e-t)}),denormalise:p(function(t,e,n){return n*(e-t)+t}),rangeLog:p(function(t,e,n){return bt.denormalise(t,e,Math.log(n/t)/Math.log(e/t))}),rangeLogInv:p(function(t,e,n){return t*Math.pow(e/t,bt.normalise(t,e,n))}),cubicBezier:p(function(t,e,n,r){var o=1/(200*n),i=3*t[0],u=3*(e[0]-t[0])-i,a=1-i-u,c=3*t[1],s=3*(e[1]-t[1])-c,f=1-c-s,l=lt(a,u,i,r,o)
return st(f,s,c,l)}),exponentialOut:p(function(t,e){return 1-Math.pow(1-e,t)}),append:p(ot),prepend:p(rt),postpad:p(ut),prepad:p(it),match:p(function(t,e){return t.test(e)}),exec:p(function(t,e){return t.exec(e)||void 0}),replace:p(function(t,e,n){return n.replace(t,e)}),slugify:function(t){if("string"==typeof t)return t.trim().toLowerCase().replace(/[\W_]/g,"-")},rspaces:/\s+/,now:jt,requestTick:dt,requestFrame:qt,debug:r,deprecate:n,bind:n(c,"Review bind: it doesnt do what you think"),dB:n(o,"dB() is now todB()"),degToRad:n(o,"degToRad() is now toRad()"),radToDeg:n(o,"radToDeg() is now toDeg()"),nthRoot:p(n(function(t,e){return Math.pow(e,1/t)},"nthRoot(n, x) is now simply root(n, x)"),!1,2),Throttle:n(ht,"Throttle(fn, time) removed, is now throttle(fn, time)"),Wait:n(mt,"Wait(fn, time) removed, is now wait(fn, time)"),slice:p(n(function(t,e,n){return n.slice?n.slice(t,e):Ft.slice.call(n,t,e)},"slice(n, m, object) is removed in favour of take(n) or rest(n)"),!0,3),returnThis:n(u,"returnThis() is now self()"),run:p(n(function(t,e){return e.apply(null,t)},"run() is now apply()"),!0,2),overloadLength:p(n(v,"overloadLength(map) is now overload(fn, map)"),!0,2)(function(){return arguments.length}),overloadTypes:p(n(v,"overloadTypes(map) is now overload(fn, map)"),!0,2)(function(){return Ft.map.call(arguments,F).join(" ")})}),Object.defineProperties(bt,{empty:{get:n(function(){return kt},"Fn.empty is now Fn.nothing")}})}(this),function(t){"use strict"
function e(t,e){return e(t)}function n(t){return void 0!==t}function r(t){return"done"===t.status}function o(t){if(!t.shift)throw new Error("Stream: Source must create an object with .shift() "+Source)}function i(t,e){var n=e[M]
if(n&&n[t])for(var r,o=-1,i=n[t].length;++o<i;)if(r=n[t][o](t,e),void 0!==r)return r}function u(t){var e=i
return function(n){var r=e
e=E
var o=r(n,t)
return e=r,o}}function a(t,e,n){this.source=t,this.n=e,this.done=n}function c(t,e){if(!c.prototype.isPrototypeOf(this))return new c(t,e)
var n,r=this,i=new Promise(function(i,c){function s(){r.status="done",l=D}function f(t,e){delete r[M],t?l=new a(l,t,s):s(),i(e)}var l
n=function(){var i=u(r)
return l=new t(i,f,e),g&&o(l),l.stop||(l.stop=E),n=function(){return l},l}})
this[M]={},this.push=function(){var t=n()
return t.push.apply(t,arguments),r},this.shift=function(){return n().shift()},this.start=function(){var t=n()
return t.start.apply(t,arguments),r},this.stop=function(){var t=n()
return t.stop.apply(t,arguments),r},this.then=i.then.bind(i)}function s(t,e,n){this._buffer=n,this._notify=t,this._stop=e}function f(t){var e=t.source,n=t.value
return t.value=void 0===n?x(e):n}function l(t,e,n,r){var o=this
this._notify=t,this._stop=e,this._fn=n,this._sources=r,this._hot=!0,this._store=r.map(function(e){function n(){r.value=void 0,o._hot=!0}var r={source:e,listen:n}
return e.on("push",n),e.on("push",t),r})}function d(t,e,n){function r(t,e){i.push(e)}var o=[],i=[]
this._notify=t,this._stop=e,this._sources=n,this._values=o,this._buffer=i,this._i=0,this._update=r,F(function(e){o.push.apply(o,k(e)),e.on("push",r),e.on("push",t)},n)}function p(t){var n=this,r=[],o=[]
this.fns=r,t.each(function(){n.fns=o,r.reduce(e,void 0),r.length=0,o=r,r=n.fns})}function h(){var t=this.timer
this.queue=E,this.ref=t.request(this.update)}function m(t,e,n){var r=this
this._stop=e,this.timer=n,this.queue=h,this.update=function(){r.queue=h,t("push")}}function v(t,e,n){function r(e){o.value=e,t("push"),o.value=void 0,o.id=i(r)}var o=this,i=n.request
this.cancel=n.cancel||E,this.end=e,this.id=i(r)}var g=!1,y=t.Fn,b=Array.prototype,w=Object.assign,F=(y.curry,y.each),x=y.latest,E=y.noop,S=y.now,T=(y.nothing,y.rest,y.throttle,y.Timer),k=y.toArray,M=Symbol("events"),D={shift:E,push:E,start:E,stop:E}
w(a.prototype,D,{shift:function(){return--this.n<1&&this.done(),this.source.shift()}}),w(s.prototype,{shift:function(){var t=this._buffer,e=this._notify
return t.length?t.shift():e("pull")},push:function(){var t=this._buffer,e=this._notify
t.push.apply(t,arguments),e("push")},stop:function(){var t=this._buffer
this._stop(t.length)}}),c.from=function(t){return new c(function(e,r){var o=void 0===t?[]:y.prototype.isPrototypeOf(t)?t:Array.from(t).filter(n)
return new s(e,r,o)})},c.of=function(){return c.from(arguments)},w(l.prototype,{shift:function(){if(this._hot){this._hot=!1
var t=this._sources,e=this._store.map(f)
return t.every(r)&&this._stop(0),e.every(n)&&this._fn.apply(null,e)}},stop:function(){var t=this._notify
F(function(e){var n=e.source,r=e.listen
n.off("push",r),n.off("push",t)},this._store),this._stop(this._hot?1:0)}}),c.Combine=function(t){var e=b.slice.call(arguments,1)
if(e.length<2)throw new Error("Stream: Combine requires more than "+e.length+" source streams")
return new c(function(n,r){return new l(n,r,t,e)})},w(d.prototype,{shift:function(){var t=this._sources,e=this._values,n=this._buffer,r=this._stop
if(e.length)return e.shift()
var o=n.shift()
if(o){var i=o.shift()
return"done"===o.status&&++this._i>=t.length&&r(0),i}},stop:function(){var t=this._notify,e=this._sources,n=this._stop,r=this._update
F(function(e){e.off("push",r),e.off("push",t)},e),n(values.length+buffer.length)}}),c.Merge=function(t,e){var n=arguments
return new c(function(t,e){return new d(t,e,Array.from(n))})},c.Events=function(t,e){return new c(function(n,r){function o(t){i.push(t),n("push")}var i=[]
return e.addEventListener(t,o),{shift:function(){return i.shift()},stop:function n(){e.removeEventListener(t,o),n(i.length)}}})},c.Choke=function(t){return new c(function(e,n){var r=[],o=Wait(function(){r[0]=arguments[arguments.length-1],e("push")},t)
return{shift:function(){return r.shift()},push:o,stop:function(){o.cancel(!1),n()}}})}
var L={now:S,request:requestAnimationFrame.bind(t),cancel:cancelAnimationFrame.bind(t)}
w(p.prototype,{request:function(t){return this.fns.push(t),t},cancel:function(t){remove(this.fns,t)}}),w(m.prototype,{shift:function(){var t=this.value
return this.value=void 0,t},stop:function(t){var e=this.timer
this.queue===E&&(e.cancel&&e.cancel(this.ref),this.ref=void 0),this.queue=E,this._stop(void 0!==this.value&&t?1:0)},push:function(){this.value=arguments[arguments.length-1],this.queue()}}),c.throttle=function(t){if("function"==typeof t)throw new Error("Dont accept request and cancel functions anymore")
return t="number"==typeof t?new T(t):t instanceof c?new p(t):t?t:L,new c(function(e,n){return new m(e,n,t)})},w(v.prototype,{shift:function(){var t=this.value
return this.value=void 0,t},stop:function(){var t=this.cancel
t(this.id),this.end()}}),c.clock=function(t){var e="number"==typeof t?new T(t):t||L
return new c(v,e)},c.prototype=w(Object.create(y.prototype),{clone:function(){var t=this,e=this.shift,n=[],r=[],o=new c(function(o,i){var u=r
return t.on("push",o),{shift:function(){if(u.length)return u.shift()
var r=e()
return void 0!==r?n.push(r):"done"===t.status&&(i(0),t.off("push",o)),r},stop:function(){for(var r;void 0!==(r=e());)u.push(r),n.push(r)
i(u.length),t.off("push",o)}}})
return this.then(o.stop),this.shift=function(){if(n.length)return n.shift()
var t=e()
return void 0!==t&&"done"!==o.status&&r.push(t),t},o},combine:function(t,e){return c.Combine(t,this,e)},merge:function(){var t=k(arguments)
return t.unshift(this),c.Merge.apply(null,t)},choke:function(t){return this.pipe(c.Choke(t))},throttle:function(t){return this.pipe(c.throttle(t))},clock:function(t){return this.pipe(c.clock(t))},each:function(t){var e=arguments,n=this
return y.prototype.each.apply(n,e),this.on("push",function(){y.prototype.each.apply(n,e)})},pipe:function(t){return this.each(t.push),y.prototype.pipe.apply(this,arguments)},on:function(t,e){var n=this[M]
if(!n)return this
var r=n[t]||(n[t]=[])
return r.push(e),this},off:function(t,e){var n=this[M]
if(!n)return this
if(0===arguments.length)return Object.keys(n).forEach(off,this),this
var r=n[t]
if(r){if(!e)return delete n[t],this
for(var o=r.length;o--;)r[o]===e&&r.splice(o,1)
return this}}}),t.Stream=c}(this),function(t){"use strict"
function e(){}function n(t){return t.hasOwnProperty("length")&&"number"==typeof t.length}function r(t,e,n){var r=t[e]
return"symbol"==typeof e?r:u(r)||r}function o(t,e,n){if(t)for(var r=-1;t[++r];)t[r](e,n)}function i(t){return t&&"object"==typeof t&&g(t)&&!(t instanceof Date)}function u(t){if(i(t)){if(t[y])return t[y]
var e=new Proxy(t,n(t)?E:S)
return t[b]={},t[y]=e,e}}function a(t,e){return t[b][e]||(t[b][e]=[])}function c(t,e){var n=t.indexOf(e)
t.splice(n,1)}function s(t,n){return t!==n.value&&(n.value=t,n(t)),e}function f(t,e){var n=a(t,w),r=e.value
return n.push(e),t!==e.value&&(e.value=t,e(t,{index:0,removed:r?r:F,added:t})),function(){c(n,e)}}function l(t,n,r,o,i){function u(t){return t[n]===r}function a(t){var e=t&&m.find.call(t,u)
c(),c=p(e,o,i)}var c=e,s=f(t,a)
return function(){c(),s()}}function d(t,n,r,o){function i(t){s(),s=p(t,r,o)}var u=a(t,n),s=e
return u.push(i),i(t[n]),function(){s(),c(u,i)}}function p(t,e,n){if(!e.length)return i(t)?f(t,n):s(t,n)
if(!t||"object"!=typeof t)return s(void 0,n)
x.lastIndex=0
var r=x.exec(e)
if(!r)throw new Error('Observable: invalid path "'+e+'"')
var o=r[1],u=r[3]&&(r[2]?r[3]:parseFloat(r[3]))
return e=e.slice(x.lastIndex),u?l(t,o,u,e,n):d(t,o,e,n)}function h(t,e){var n=t[b]
o(n[e],t[y]),o(n[w],t)}if(!t.Proxy)return void console.warn("Proxy constructor not found. This version of Observable cannot be used.")
var m=Array.prototype,v=Object.assign,g=Object.isExtensible,y=Symbol("observable"),b=Symbol("observers"),w=Symbol("update"),F=Object.freeze([]),x=/\[?([-\w]+)(?:=(['"])?([-\w]+)\2)?\]?\.?/g,E={get:r,set:function(t,e,n,r){if("symbol"==typeof e)return t[e]=n,!0
var i=t[e]
if(i===n)return!0
var a,c=t[b]
if("length"===e){if(n>=t.length)return!0
for(a={index:n,removed:m.splice.call(t,n),added:F};--i>=n;)o(c[i],void 0)}else if(+e%1===0)if(e=+e,void 0===n){if(!(e<t.length))return!0
a={index:e,removed:m.splice.call(t,e,1),added:F},n=t[e]}else a={index:e,removed:m.splice.call(t,e,1,n),added:[n]}
else t[e]=n
return o(c[e],u(n)||n),o(c[w],r,a),!0}},S={get:r,set:function(t,e,n,r){var i=t[e]
if(i===n)return!0
t[e]=n
var a=t[b]
return o(a[e],u(n)||n),o(a[w],r),!0}}
u.isObservable=i,u.notify=h,u.observe=function(t,n,r){return n+="",t=u(t),t?p(t,n,r):e},u.filter=function(t,e){var n=u([])
return u.observe(e,"",function(){var r=e.filter(t)
v(n,r),n.length=r.length}),n},u.map=function(t,e){var n=u([])
return u.observe(e,"",function(r){var o=e.map(t)
v(n,o),n.length=o.length}),n},t.Observable=u}(this),function(t){"use strict"
function e(t,e,n){this.observable=o(e),this.path=n,this.end=t}var n=t.Fn,r=t.Stream,o=t.Observable,i=n.curry,u=n.noop,a=n.setPath
e.prototype={shift:function(){var t=this.value
return this.value=void 0,t},push:function(){a(this.path,this.observable,arguments[arguments.length-1])},stop:function(){this.unobserve(),this.end()},unobserve:u},r.observe=i(function(t,n){return new r(function(r,i){function u(t){a.value=void 0===t?null:t,r("push")}var a=new e(i,n,t)
return a.unobserve=o.observe(n,t,u),a})})}(this),function(t){t.console&&t.console.log&&console.log("dom         – https://github.com/stephband/dom")}(this),function(t){"use strict"
function e(t){var e=qt.slice.call(arguments,1)
return function(){qt.push.apply(arguments,e),t.apply(null,arguments)}}function n(t){return(/^\//.test(t)?"":"/")+t}function r(t){var e,n=[],r=n.length=t.length
for(e=0;e<r;e++)n[e]=t[e]
return n}function o(t,e,n){this.node=t,this.get=e,this.set=n}function i(t,e){for(var n=Object.keys(e),r=n.length;r--;)n[r]in t?t[n[r]]=e[n[r]]:t.setAttribute(n[r],e[n[r]])}function u(t,e){for(var n=Object.keys(e),r=n.length;r--;)t.setAttributeNS(null,n[r],e[n[r]])}function a(t){if($t[t])return $t[t](arguments[1])
var e,n=document.createElement(t)
return"string"==typeof arguments[1]?(n.innerHTML=arguments[1],e=arguments[2]):e=arguments[1],e&&i(n,e),n}function c(t){return Rt[t.nodeType]}function s(t){return 1===t.nodeType}function f(t){return 3===t.nodeType}function l(t){return 8===t.nodeType}function d(t){return 11===t.nodeType}function p(e){var r=t.location
return e.hostname&&r.hostname===e.hostname&&r.pathname===n(e.pathname)}function h(t){var e=t.id
if(!e){do e=Math.ceil(1e5*Math.random())
while(document.getElementById(e))
t.id=e}return e}function m(t){return t.tagName&&t.tagName.toLowerCase()}function v(t,e){return e.getAttribute&&e.getAttribute(t)||void 0}function g(t,e){t instanceof bt?t.setAttribute("class",e):t.className=e}function y(t){return t.classList||new o(t,vt.attribute("class"),g)}function b(t,e){y(e).add(t)}function w(t,e){y(e).remove(t)}function F(t,e){var n=y(e)
n.add(t),requestAnimationFrame(function(){n.remove(t)})}function x(t){return r(t.children||t.querySelectorAll("*"))}function E(t,e){return e=e||document,r(e.querySelectorAll(t))}function S(t,e){return e.contains?e.contains(t):!!t.parentNode&&(t.parentNode===e||S(t.parentNode,e))}function T(t,e){return e.matches?e.matches(t):e.matchesSelector?e.matchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.mozMatchesSelector?e.mozMatchesSelector(t):e.msMatchesSelector?e.msMatchesSelector(t):e.oMatchesSelector?e.oMatchesSelector(t):m(e)===t}function k(t,e){var n=arguments[2]
if(e&&e!==document&&e!==n&&11!==e.nodeType)return e=e.correspondingUseElement||e,T(t,e)?e:k(t,e.parentNode,n)}function M(t){return t.nextElementSibling||void 0}function D(t){return t.previousElementSibling||void 0}function L(t,e){return t.appendChild(e),t}function O(t,e){if(e instanceof yt||e instanceof bt)return L(t,e),e
if(e.length){var n=e.reduce?e:qt.slice.call(e)
return n.reduce(L,t),e}}function C(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function N(t){t instanceof yt||t instanceof bt?A(t):qt.forEach.call(t,A)}function P(t,e){t.parentNode&&t.parentNode.insertBefore(e,t)}function j(t,e){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function q(t,e){return P(t,e),N(t),t}function I(t){return t.split("(")[1].split(")")[0].split(/\s*,\s*/)}function _(e,n){return t.getComputedStyle?t.getComputedStyle(n,null).getPropertyValue(e):0}function B(e){var n=document.body,r=document.documentElement,o=e.getBoundingClientRect(),i=t.pageXOffset||r.scrollLeft||n.scrollLeft,u=r.clientLeft||n.clientLeft||0
return o.left+i-u}function H(e){var n=document.body,r=document.documentElement,o=e.getBoundingClientRect(),i=t.pageYOffset||r.scrollTop||n.scrollTop,u=r.clientTop||n.clientTop||0
return o.top+i-u}function z(){return{left:0,top:0,width:t.innerWidth,height:t.innerHeight}}function R(e){return e===t?z():e.getClientRects()[0]}function Y(t){return t.getBoundingClientRect()}function $(t){var e=R(t)
return[e.left,e.top]}function W(t,e){var n=R(t),r=R(e)
return[r.left-n.left,r.top-n.top]}function X(t,e){var n=xt({},Kt,e),r=new wt(t,n)
return e&&(delete e.detail,xt(r,e)),r}function J(t){t.preventDefault()}function U(t){return 1===t.which&&!t.ctrlKey&&!t.altKey&&!t.shiftKey}function K(t){return Qt[t.keyCode]}function G(t,n,r,o){n=n.split(_t)
for(var i,u,a=t[Gt]||(t[Gt]={}),c=e(r,o),s=-1;s++<n.length;)u=n[s],i=a[u]||(a[u]=[]),i.push([r,c]),t.addEventListener(u,c)
return t}function Q(t,e,n){e=e.split(_t)
var r,o,i,u=t[Gt]
if(!u)return t
for(var a=-1;a++<e.length;)if(r=e[a],o=u[r])for(i=o.length;i--;)o[i][0]===n&&(t.removeEventListener(r,o[i][1]),o.splice(i,1))
return t}function V(t,e,n){var r=X(e,n)
t.dispatchEvent(r)}function Z(t,e){Q(t.currentTarget,Ht.transitionend,Z),e(t.timeStamp)}function tt(t,e,n){if("transitionend"===t){if(!Ht.transition)return void e(performance.now())
t=Ht.transitionend}G(n,t,Z,e)}function et(t,e){return function(n){var r=k(t,n.target,n.currentTarget)
r&&(n.delegateTarget=r,e(n,r),n.delegateTarget=void 0)}}function nt(t,e){return t=t.split(_t),new Ft(function(n,r){function o(t){i.push(t),n("push")}var i=[]
return t.forEach(function(t){e.addEventListener(t,o)}),{shift:function(){return i.shift()},stop:function n(){t.forEach(function(t){e.removeEventListener(t,o)}),n(i.length)}}})}function rt(t){function e(){var e=vt.query("[tabindex], a, input, textarea, button",t)[0]
e&&e.focus()}function n(n){t.contains(n.target)||(e(),n.preventDefault(),n.stopPropagation())}Vt()
var r=document.activeElement||document.body
return document.addEventListener("focus",n,!0),Pt(e),Vt=function(){Vt=Lt,document.removeEventListener("focus",n,!0),Pt(function(){r.focus()})}}function ot(t){if(t.domFragmentFromChildren)return t.domFragmentFromChildren
var e=a("fragment")
return t.domFragmentFromChildren=e,O(e,t.childNodes),e}function it(t,e){var n=document.createElement(e||"div")
return n.innerHTML=t,ot(n)}function ut(t){return t.content||ot(t)}function at(t){var e=document.getElementById(t)
if(!e)throw new Error('DOM: element id="'+t+'" is not in the DOM.')
var n=m(e)
return"template"!==n||Ht.template||N(e),"template"===n?ut(e):"script"===n?it(e.innerHTML,v("data-parent-tag",e)):ot(e)}function ct(e,n){if(n){var r,o=Zt[e]
try{r=(new t.DOMParser).parseFromString(n,o)}catch(t){r=void 0}if(!r||r.getElementsByTagName("parsererror").length)throw new Error("dom: Invalid XML: "+n)
return r}}function st(){return Wt||(Wt=parseFloat(_("font-size",document.documentElement),10))}function ft(t,e){function n(i){var u=(i-r)/(1e3*t)
u<1?(u>0&&e(u),o=requestAnimationFrame(n)):e(1)}var r=performance.now(),o=requestAnimationFrame(n)
return function(){cancelAnimationFrame(o)}}function lt(t,e,n,r,o){return ft(t,Ct(e,kt(r[n],o),Nt(n,r)))}function dt(t){return lt(.6,At(2),"scrollTop",vt.view,ne(t))}function pt(t){return t.scrollTop/(t.scrollHeight-t.clientHeight)}function ht(t){t=t||document.documentElement
var e=t.scrollLeft,n=t.scrollTop
t.style.overflow="hidden",n&&(t.scrollTop=n),e&&(t.scrollLeft=e)}function mt(t){t=t||document.documentElement
var e=t.scrollLeft,n=t.scrollTop
t.style.overflow="",n&&(t.scrollTop=n),e&&(t.scrollLeft=e)}function vt(t){return E(t,document)}var gt=t.Fn,yt=t.Node,bt=t.SVGElement,wt=t.CustomEvent,Ft=t.Stream,xt=Object.assign,Et=Object.defineProperties,St=gt.cache,Tt=(gt.compose,gt.curry),kt=gt.denormalise,Mt=gt.deprecate,Dt=gt.id,Lt=gt.noop,Ot=gt.overload,Ct=gt.pipe,At=gt.pow,Nt=gt.set,Pt=gt.requestTick,jt=gt.toType,qt=Array.prototype,It="http://www.w3.org/2000/svg",_t=/\s+/,Bt=/px$/,Ht=Et({},{inputEventsWhileDisabled:{get:St(function(){var t=document.createElement("input"),e=X("featuretest"),n=!1
return L(document.body,t),t.disabled=!0,t.addEventListener("featuretest",function(t){n=!0}),t.dispatchEvent(e),A(t),n}),enumerable:!0},template:{get:St(function(){return"content"in document.createElement("template")}),enumerable:!0},textareaPlaceholderSet:{get:St(function(){var t=document.createElement("textarea")
return t.setAttribute("placeholder","---"),""===t.innerHTML}),enumerable:!0},transition:{get:St(function(){var t=Ut("transition")
return t||!1}),enumerable:!0},transitionend:{get:St(function(){var t={KhtmlTransition:!1,OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},e=Ut("transition")
return e&&t[e]}),enumerable:!0}})
o.prototype={add:function(){for(var t=arguments.length,e=this.get(this.node),n=e?e.trim().split(_t):[];t--;)n.indexOf(arguments[t])===-1&&n.push(arguments[t])
this.set(this.node,n.join(" "))},remove:function(){for(var t,e=arguments.length,n=this.get(this.node),r=n?n.trim().split(_t):[];e--;)t=r.indexOf(arguments[e]),t!==-1&&r.splice(t,1)
this.set(this.node,r.join(" "))},contains:function(t){var e=this.get(this.node),n=e?e.trim().split(_t):[]
return n.indexOf(t)!==-1}}
var zt=document.createElement("div"),Rt={1:"element",3:"text",8:"comment",9:"document",10:"doctype",11:"fragment"},Yt=["circle","ellipse","g","line","rect","use","path","polygon","polyline","svg"],$t={text:function(t){return document.createTextNode(t||"")},comment:function(t){return document.createComment(t||"")},fragment:function(t){var e=document.createDocumentFragment()
return t&&(zt.innerHTML=t,O(e,zt.childNodes),zt.innerHTML=""),e}}
Yt.forEach(function(t){$t[t]=function(e){var n=document.createElementNS(It,t)
return e&&u(n,e),n}})
var Wt,Xt=Ht.textareaPlaceholderSet?function(t){return t.cloneNode(!0)}:function(t){var e,n=t.cloneNode(!0),r=vt.query("textarea",t),o=r.length
if(o)for(e=vt.query("textarea",n);o--;)e[o].value=r[o].value
return n},Jt={"transform:translateX":function(t){var e=_("transform",t)
if(!e||"none"===e)return 0
var n=I(e)
return parseFloat(n[4])},"transform:translateY":function(t){var e=_("transform",t)
if(!e||"none"===e)return 0
var n=I(e)
return parseFloat(n[5])},"transform:scale":function(t){var e=_("transform",t)
if(!e||"none"===e)return 0
var n=I(e),r=parseFloat(n[0]),o=parseFloat(n[1])
return Math.sqrt(r*r+o*o)},"transform:rotate":function(t){var e=_("transform",t)
if(!e||"none"===e)return 0
var n=I(e),r=parseFloat(n[0]),o=parseFloat(n[1])
return Math.atan2(o,r)}},Ut=function(t){function e(e){if(e in n.style)return e
for(var r,o=e.charAt(0).toUpperCase()+e.slice(1),i=t.length;i--;)if(r=t[i]+o,r in n.style)return r
return!1}var n=document.createElement("div"),r={}
return function(t){return r[t]||(r[t]=e(t))}}(["Khtml","O","Moz","Webkit","ms"]),Kt={bubbles:!0},Gt=Symbol("events"),Qt={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"pageright",36:"pageleft",37:"left",38:"up",39:"right",40:"down",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",93:"cmd",186:";",187:"=",188:",",189:"-",190:".",191:"/",219:"[",220:"\\",221:"]",222:"'",224:"cmd"},Vt=Lt,Zt={xml:"application/xml",html:"text/html",svg:"image/svg+xml"},te=function(){var t=document.createElement("pre"),e=document.createTextNode("")
return t.appendChild(e),function(n){return e.textContent=n,t.innerHTML}}(),ee=/(\d*\.?\d+)r?em/,ne=Ot(jt,{number:Dt,string:function(t){var e,n
if(e=ee.exec(t))return n=parseFloat(e[1]),st()*n
throw new Error("dom: "+t+"' cannot be parsed as rem, em or %.")}}),re=Ot(jt,{number:function(t){return t/st()}}),oe=new Promise(function(e,n){function r(){document.removeEventListener("DOMContentLoaded",r),t.removeEventListener("load",r),e()}document.addEventListener("DOMContentLoaded",r),t.addEventListener("load",r)})
xt(vt,{ready:oe.then.bind(oe),get:function(t){return document.getElementById(t)||void 0},find:gt.deprecate(function(t){return document.getElementById(t)||void 0},"dom.find(id) is now dom.get(id)"),query:Tt(E,!0),closest:Tt(k,!0),contains:Tt(S,!0),matches:Tt(T,!0),children:x,next:M,previous:D,assign:Tt(i,!0),create:a,clone:Xt,identify:h,append:Tt(O,!0),before:Tt(P,!0),after:Tt(j,!0),replace:Tt(q,!0),empty:C,remove:N,isElementNode:s,isTextNode:f,isCommentNode:l,isFragmentNode:d,isInternalLink:p,type:c,tag:m,attribute:Tt(v,!0),classes:y,addClass:Tt(b,!0),removeClass:Tt(w,!0),flashClass:Tt(F,!0),box:R,bounds:Y,rectangle:Mt(R,"dom.rectangle(node) now dom.box(node)"),offset:Tt(W,!0),position:$,prefix:Ut,style:Tt(function(t,e){if(Jt[t])return Jt[t](e)
var n=_(t,e)
return"string"==typeof n&&Bt.test(n)?parseFloat(n):n},!0),toPx:ne,toRem:re,viewportLeft:B,viewportTop:H,fragmentFromTemplate:ut,fragmentFromChildren:ot,fragmentFromHTML:it,fragmentFromId:at,escape:te,parse:Tt(ct),Event:X,delegate:et,isPrimaryButton:U,preventDefault:J,toKey:K,trapFocus:rt,trap:gt.deprecate(rt,"dom.trap() is now dom.trapFocus()"),events:{on:G,off:Q,trigger:V},on:gt.deprecate(Tt(nt,!0),"dom.on() is now dom.event()"),trigger:Tt(function(t,e){return V(e,t),e},!0),event:Tt(nt,!0),transition:Tt(ft,!0),schedule:Mt(ft,"dom: .schedule() is now .transition()"),animate:Tt(lt,!0),animateScroll:dt,scrollTo:Mt(dt,"scrollTo(px, node) renamed to animateScroll(px)"),scrollRatio:pt,disableScroll:ht,enableScroll:mt,requestEvent:tt,requestFrame:requestAnimationFrame.bind(null),requestFrameN:Tt(Mt(function(t,e){!function n(){return requestAnimationFrame(--t?n:e)}()},"requestFrameN() will be removed soon"),!0),features:Ht,safe:Et({left:0},{right:{get:function(){return t.innerWidth},enumerable:!0,configurable:!0},top:{get:function(){return _("padding-top",document.body)},enumerable:!0,configurable:!0},bottom:{get:function(){return t.innerHeight},enumerable:!0,configurable:!0}})}),Et(vt,{root:{value:document.documentElement,enumerable:!0},head:{value:document.head,enumerable:!0},body:{get:function(){return document.body},enumerable:!0},view:{get:function(){return document.scrollingElement},enumerable:!0},viewport:{get:function(){return console.warn("Deprecated: dom.viewport is now dom.view"),document.scrollingElement},enumerable:!0}}),t.dom=vt}(this),function(t){function e(t,e){e=e||r
var n=document.createEvent("CustomEvent")
return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}if(!t.CustomEvent||"function"!=typeof t.CustomEvent){t.console&&console.log("Polyfill: CustomEvent")
var n=t.Event,r={bubbles:!1,cancelable:!1,detail:void 0}
e.prototype=n.prototype,t.CustomEvent=e}}(window),"scrollingElement"in document||function(){function t(){var t=/^CSS1/.test(document.compatMode)
if(!t)return!1
if(void 0===n){var e=document.createElement("iframe")
e.style.height="1px",(document.body||document.documentElement||document).appendChild(e)
var r=e.contentWindow.document
r.write('<!DOCTYPE html><div style="height:9999em">x</div>'),r.close(),n=r.documentElement.scrollHeight>r.body.scrollHeight,e.parentNode.removeChild(e)}return n}function e(){return t()?document.documentElement:document.body}var n
Object.defineProperty?Object.defineProperty(document,"scrollingElement",{get:e}):document.scrollingElement=e()}(),function(t){t.console&&t.console.log&&console.log("dom         – https://github.com/stephband/dom")}(this),function(t){"use strict"
function e(t){var e=qt.slice.call(arguments,1)
return function(){qt.push.apply(arguments,e),t.apply(null,arguments)}}function n(t){return(/^\//.test(t)?"":"/")+t}function r(t){var e,n=[],r=n.length=t.length
for(e=0;e<r;e++)n[e]=t[e]
return n}function o(t,e,n){this.node=t,this.get=e,this.set=n}function i(t,e){for(var n=Object.keys(e),r=n.length;r--;)n[r]in t?t[n[r]]=e[n[r]]:t.setAttribute(n[r],e[n[r]])}function u(t,e){for(var n=Object.keys(e),r=n.length;r--;)t.setAttributeNS(null,n[r],e[n[r]])}function a(t){if($t[t])return $t[t](arguments[1])
var e,n=document.createElement(t)
return"string"==typeof arguments[1]?(n.innerHTML=arguments[1],e=arguments[2]):e=arguments[1],e&&i(n,e),n}function c(t){return Rt[t.nodeType]}function s(t){return 1===t.nodeType}function f(t){return 3===t.nodeType}function l(t){return 8===t.nodeType}function d(t){return 11===t.nodeType}function p(e){var r=t.location
return e.hostname&&r.hostname===e.hostname&&r.pathname===n(e.pathname)}function h(t){var e=t.id
if(!e){do e=Math.ceil(1e5*Math.random())
while(document.getElementById(e))
t.id=e}return e}function m(t){return t.tagName&&t.tagName.toLowerCase()}function v(t,e){return e.getAttribute&&e.getAttribute(t)||void 0}function g(t,e){t instanceof bt?t.setAttribute("class",e):t.className=e}function y(t){return t.classList||new o(t,vt.attribute("class"),g)}function b(t,e){y(e).add(t)}function w(t,e){y(e).remove(t)}function F(t,e){var n=y(e)
n.add(t),requestAnimationFrame(function(){n.remove(t)})}function x(t){return r(t.children||t.querySelectorAll("*"))}function E(t,e){return e=e||document,r(e.querySelectorAll(t))}function S(t,e){return e.contains?e.contains(t):!!t.parentNode&&(t.parentNode===e||S(t.parentNode,e))}function T(t,e){return e.matches?e.matches(t):e.matchesSelector?e.matchesSelector(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.mozMatchesSelector?e.mozMatchesSelector(t):e.msMatchesSelector?e.msMatchesSelector(t):e.oMatchesSelector?e.oMatchesSelector(t):m(e)===t}function k(t,e){var n=arguments[2]
if(e&&e!==document&&e!==n&&11!==e.nodeType)return e=e.correspondingUseElement||e,T(t,e)?e:k(t,e.parentNode,n)}function M(t){return t.nextElementSibling||void 0}function D(t){return t.previousElementSibling||void 0}function L(t,e){return t.appendChild(e),t}function O(t,e){if(e instanceof yt||e instanceof bt)return L(t,e),e
if(e.length){var n=e.reduce?e:qt.slice.call(e)
return n.reduce(L,t),e}}function C(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function N(t){t instanceof yt||t instanceof bt?A(t):qt.forEach.call(t,A)}function P(t,e){t.parentNode&&t.parentNode.insertBefore(e,t)}function j(t,e){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function q(t,e){return P(t,e),N(t),t}function I(t){return t.split("(")[1].split(")")[0].split(/\s*,\s*/)}function _(e,n){return t.getComputedStyle?t.getComputedStyle(n,null).getPropertyValue(e):0}function B(e){var n=document.body,r=document.documentElement,o=e.getBoundingClientRect(),i=t.pageXOffset||r.scrollLeft||n.scrollLeft,u=r.clientLeft||n.clientLeft||0
return o.left+i-u}function H(e){var n=document.body,r=document.documentElement,o=e.getBoundingClientRect(),i=t.pageYOffset||r.scrollTop||n.scrollTop,u=r.clientTop||n.clientTop||0
return o.top+i-u}function z(){return{left:0,top:0,width:t.innerWidth,height:t.innerHeight}}function R(e){return e===t?z():e.getClientRects()[0]}function Y(t){return t.getBoundingClientRect()}function $(t){var e=R(t)
return[e.left,e.top]}function W(t,e){var n=R(t),r=R(e)
return[r.left-n.left,r.top-n.top]}function X(t,e){var n=xt({},Kt,e),r=new wt(t,n)
return e&&(delete e.detail,xt(r,e)),r}function J(t){t.preventDefault()}function U(t){return 1===t.which&&!t.ctrlKey&&!t.altKey&&!t.shiftKey}function K(t){return Qt[t.keyCode]}function G(t,n,r,o){n=n.split(_t)
for(var i,u,a=t[Gt]||(t[Gt]={}),c=e(r,o),s=-1;s++<n.length;)u=n[s],i=a[u]||(a[u]=[]),i.push([r,c]),t.addEventListener(u,c)
return t}function Q(t,e,n){e=e.split(_t)
var r,o,i,u=t[Gt]
if(!u)return t
for(var a=-1;a++<e.length;)if(r=e[a],o=u[r])for(i=o.length;i--;)o[i][0]===n&&(t.removeEventListener(r,o[i][1]),o.splice(i,1))
return t}function V(t,e,n){var r=X(e,n)
t.dispatchEvent(r)}function Z(t,e){Q(t.currentTarget,Ht.transitionend,Z),e(t.timeStamp)}function tt(t,e,n){if("transitionend"===t){if(!Ht.transition)return void e(performance.now())
t=Ht.transitionend}G(n,t,Z,e)}function et(t,e){return function(n){var r=k(t,n.target,n.currentTarget)
r&&(n.delegateTarget=r,e(n,r),n.delegateTarget=void 0)}}function nt(t,e){return t=t.split(_t),new Ft(function(n,r){function o(t){i.push(t),n("push")}var i=[]
return t.forEach(function(t){e.addEventListener(t,o)}),{shift:function(){return i.shift()},stop:function n(){t.forEach(function(t){e.removeEventListener(t,o)}),n(i.length)}}})}function rt(t){function e(){var e=vt.query("[tabindex], a, input, textarea, button",t)[0]
e&&e.focus()}function n(n){t.contains(n.target)||(e(),n.preventDefault(),n.stopPropagation())}Vt()
var r=document.activeElement||document.body
return document.addEventListener("focus",n,!0),Pt(e),Vt=function(){Vt=Lt,document.removeEventListener("focus",n,!0),Pt(function(){r.focus()})}}function ot(t){if(t.domFragmentFromChildren)return t.domFragmentFromChildren
var e=a("fragment")
return t.domFragmentFromChildren=e,O(e,t.childNodes),e}function it(t,e){var n=document.createElement(e||"div")
return n.innerHTML=t,ot(n)}function ut(t){return t.content||ot(t)}function at(t){var e=document.getElementById(t)
if(!e)throw new Error('DOM: element id="'+t+'" is not in the DOM.')
var n=m(e)
return"template"!==n||Ht.template||N(e),"template"===n?ut(e):"script"===n?it(e.innerHTML,v("data-parent-tag",e)):ot(e)}function ct(e,n){var r,o=Zt[e]
try{r=(new t.DOMParser).parseFromString(n,o)}catch(t){r=void 0}if(!r||r.getElementsByTagName("parsererror").length)throw new Error("dom: Invalid XML: "+n)
return r}function st(){return Wt||(Wt=parseFloat(_("font-size",document.documentElement),10))}function ft(t,e){function n(i){var u=(i-r)/(1e3*t)
u<1?(u>0&&e(u),o=requestAnimationFrame(n)):e(1)}var r=performance.now(),o=requestAnimationFrame(n)
return function(){cancelAnimationFrame(o)}}function lt(t,e,n,r,o){return ft(t,Ct(e,kt(r[n],o),Nt(n,r)))}function dt(t){return lt(.6,At(2),"scrollTop",vt.view,ne(t))}function pt(t){return t.scrollTop/(t.scrollHeight-t.clientHeight)}function ht(t){t=t||document.documentElement
var e=t.scrollLeft,n=t.scrollTop
t.style.overflow="hidden",n&&(t.scrollTop=n),e&&(t.scrollLeft=e)}function mt(t){t=t||document.documentElement
var e=t.scrollLeft,n=t.scrollTop
t.style.overflow="",n&&(t.scrollTop=n),e&&(t.scrollLeft=e)}function vt(t){return E(t,document)}var gt=t.Fn,yt=t.Node,bt=t.SVGElement,wt=t.CustomEvent,Ft=t.Stream,xt=Object.assign,Et=Object.defineProperties,St=gt.cache,Tt=(gt.compose,gt.curry),kt=gt.denormalise,Mt=gt.deprecate,Dt=gt.id,Lt=gt.noop,Ot=gt.overload,Ct=gt.pipe,At=gt.pow,Nt=gt.set,Pt=gt.requestTick,jt=gt.toType,qt=Array.prototype,It="http://www.w3.org/2000/svg",_t=/\s+/,Bt=/px$/,Ht=Et({},{inputEventsWhileDisabled:{get:St(function(){var t=document.createElement("input"),e=X("featuretest"),n=!1
return L(document.body,t),t.disabled=!0,t.addEventListener("featuretest",function(t){n=!0}),t.dispatchEvent(e),A(t),n}),enumerable:!0},template:{get:St(function(){return"content"in document.createElement("template")}),enumerable:!0},textareaPlaceholderSet:{get:St(function(){var t=document.createElement("textarea")
return t.setAttribute("placeholder","---"),""===t.innerHTML}),enumerable:!0},transition:{get:St(function(){var t=Ut("transition")
return t||!1}),enumerable:!0},transitionend:{get:St(function(){var t={KhtmlTransition:!1,OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},e=Ut("transition")
return e&&t[e]}),enumerable:!0}})
o.prototype={add:function(){for(var t=arguments.length,e=this.get(this.node),n=e?e.trim().split(_t):[];t--;)n.indexOf(arguments[t])===-1&&n.push(arguments[t])
this.set(this.node,n.join(" "))},remove:function(){for(var t,e=arguments.length,n=this.get(this.node),r=n?n.trim().split(_t):[];e--;)t=r.indexOf(arguments[e]),t!==-1&&r.splice(t,1)
this.set(this.node,r.join(" "))},contains:function(t){var e=this.get(this.node),n=e?e.trim().split(_t):[]
return n.indexOf(t)!==-1}}
var zt=document.createElement("div"),Rt={1:"element",3:"text",8:"comment",9:"document",10:"doctype",11:"fragment"},Yt=["circle","ellipse","g","line","rect","use","path","polygon","polyline","svg"],$t={text:function(t){return document.createTextNode(t||"")},comment:function(t){return document.createComment(t||"")},fragment:function(t){var e=document.createDocumentFragment()
return t&&(zt.innerHTML=t,O(e,zt.childNodes),zt.innerHTML=""),e}}
Yt.forEach(function(t){$t[t]=function(e){var n=document.createElementNS(It,t)
return e&&u(n,e),n}})
var Wt,Xt=Ht.textareaPlaceholderSet?function(t){return t.cloneNode(!0)}:function(t){var e,n=t.cloneNode(!0),r=vt.query("textarea",t),o=r.length
if(o)for(e=vt.query("textarea",n);o--;)e[o].value=r[o].value
return n},Jt={"transform:translateX":function(t){var e=_("transform",t)
if(!e||"none"===e)return 0
var n=I(e)
return parseFloat(n[4])},"transform:translateY":function(t){var e=_("transform",t)
if(!e||"none"===e)return 0
var n=I(e)
return parseFloat(n[5])},"transform:scale":function(t){var e=_("transform",t)
if(!e||"none"===e)return 0
var n=I(e),r=parseFloat(n[0]),o=parseFloat(n[1])
return Math.sqrt(r*r+o*o)},"transform:rotate":function(t){var e=_("transform",t)
if(!e||"none"===e)return 0
var n=I(e),r=parseFloat(n[0]),o=parseFloat(n[1])
return Math.atan2(o,r)}},Ut=function(t){function e(e){if(e in n.style)return e
for(var r,o=e.charAt(0).toUpperCase()+e.slice(1),i=t.length;i--;)if(r=t[i]+o,r in n.style)return r
return!1}var n=document.createElement("div"),r={}
return function(t){return r[t]||(r[t]=e(t))}}(["Khtml","O","Moz","Webkit","ms"]),Kt={bubbles:!0},Gt=Symbol("events"),Qt={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"pageright",36:"pageleft",37:"left",38:"up",39:"right",40:"down",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",93:"cmd",186:";",187:"=",188:",",189:"-",190:".",191:"/",219:"[",220:"\\",221:"]",222:"'",224:"cmd"},Vt=Lt,Zt={xml:"application/xml",html:"text/html",svg:"image/svg+xml"},te=function(){var t=document.createElement("pre"),e=document.createTextNode("")
return t.appendChild(e),function(n){return e.textContent=n,t.innerHTML}}(),ee=/(\d*\.?\d+)r?em/,ne=Ot(jt,{number:Dt,string:function(t){var e,n
if(e=ee.exec(t))return n=parseFloat(e[1]),st()*n
throw new Error("dom: "+t+"' cannot be parsed as rem, em or %.")}}),re=Ot(jt,{number:function(t){return t/st()}}),oe=new Promise(function(e,n){function r(){document.removeEventListener("DOMContentLoaded",r),t.removeEventListener("load",r),e()}document.addEventListener("DOMContentLoaded",r),t.addEventListener("load",r)})
xt(vt,{ready:oe.then.bind(oe),get:function(t){return document.getElementById(t)||void 0},find:gt.deprecate(function(t){return document.getElementById(t)||void 0},"dom.find(id) is now dom.get(id)"),query:Tt(E,!0),closest:Tt(k,!0),contains:Tt(S,!0),matches:Tt(T,!0),children:x,next:M,previous:D,assign:Tt(i,!0),create:a,clone:Xt,identify:h,append:Tt(O,!0),before:Tt(P,!0),after:Tt(j,!0),replace:Tt(q,!0),empty:C,remove:N,isElementNode:s,isTextNode:f,isCommentNode:l,isFragmentNode:d,isInternalLink:p,type:c,tag:m,attribute:Tt(v,!0),classes:y,addClass:Tt(b,!0),removeClass:Tt(w,!0),flashClass:Tt(F,!0),box:R,bounds:Y,rectangle:Mt(R,"dom.rectangle(node) now dom.box(node)"),offset:Tt(W,!0),position:$,prefix:Ut,style:Tt(function(t,e){if(Jt[t])return Jt[t](e)
var n=_(t,e)
return"string"==typeof n&&Bt.test(n)?parseFloat(n):n},!0),toPx:ne,toRem:re,viewportLeft:B,viewportTop:H,fragmentFromTemplate:ut,fragmentFromChildren:ot,fragmentFromHTML:it,fragmentFromId:at,escape:te,parse:Tt(ct),Event:X,delegate:et,isPrimaryButton:U,preventDefault:J,toKey:K,trapFocus:rt,trap:gt.deprecate(rt,"dom.trap() is now dom.trapFocus()"),events:{on:G,off:Q,trigger:V},on:gt.deprecate(Tt(nt,!0),"dom.on() is now dom.event()"),trigger:Tt(function(t,e){return V(e,t),e},!0),event:Tt(nt,!0),transition:Tt(ft,!0),schedule:Mt(ft,"dom: .schedule() is now .transition()"),animate:Tt(lt,!0),animateScroll:dt,scrollTo:Mt(dt,"scrollTo(px, node) renamed to animateScroll(px)"),scrollRatio:pt,disableScroll:ht,enableScroll:mt,requestEvent:tt,requestFrame:requestAnimationFrame.bind(null),requestFrameN:Tt(Mt(function(t,e){!function n(){return requestAnimationFrame(--t?n:e)}()},"requestFrameN() will be removed soon"),!0),features:Ht,safe:Et({left:0},{right:{get:function(){return t.innerWidth},enumerable:!0,configurable:!0},top:{get:function(){return _("padding-top",document.body)},enumerable:!0,configurable:!0},bottom:{get:function(){return t.innerHeight},enumerable:!0,configurable:!0}})}),Et(vt,{root:{value:document.documentElement,enumerable:!0},head:{value:document.head,enumerable:!0},body:{get:function(){return document.body},enumerable:!0},view:{get:function(){return document.scrollingElement},enumerable:!0},viewport:{get:function(){return console.warn("Deprecated: dom.viewport is now dom.view"),document.scrollingElement},enumerable:!0}}),t.dom=vt}(this),function(t){"use strict"
function e(t){return g.query('[href$="#'+t+'"]',g.body).filter(T(b,{a:g.isInternalLink,default:function(){return!0}})).concat(g.query('[data-href="#'+t+'"]',document))}function n(t){var e=C.get(t)
return e||(e={},C.set(t,e)),e}function r(t){var r=n(t),o=t.id
return r.node||(r.node=t),r.buttons||(r.buttons=O.cache&&o&&e(o)),r}function o(t){return O.cache&&t.buttons||t.node.id&&e(t.node.id)}function i(){var t,e=this.data||r(this.target)
e.active||(e.active=!0,this.preventDefault(),m&&console.log("[activate] default | target:",this.target.id,"data:",e),y(e.node).add(k),t=o(e),t&&t.forEach(function(t){g.classes(t).add(M)}))}function u(){var t,e=this.data||r(this.target)
e.active&&(e.active=!1,this.preventDefault(),m&&console.log("[deactivate] default | target:",this.target.id,"data:",e),y(e.node).remove(k),t=o(e),t&&t.forEach(function(t){g.classes(t).remove(M)}))}function a(t){var e=g.create("div",{class:"dialog-layer layer"}),n=g.create("div",{class:"dialog popable"}),r=g.create("button",{class:"close-thumb thumb"})
return g.append(n,t),g.append(e,n),g.append(e,r),g.append(document.body,e),n}function c(t){"mousedown"===t.type&&w(t.currentTarget,"click",function t(e){F(e.currentTarget,"click",t),e.preventDefault()})}function s(t){return!!t.defaultPrevented||(!g.isPrimaryButton(t)||(("keydown"===t.type||"keyup"===t.type)&&13!==t.keyCode||void 0))}function f(t,e){t.preventDefault(),"mousedown"===t.type&&c(t),x(e,"dom-activate",{relatedTarget:t.currentTarget})}function l(t){return(S(t.hash)?t.hash:t.getAttribute("href")).substring(1)}function d(t,e){var n=document.getElementById(e)
if(n){g.classes(n)
g.activeMatchers.find(A(n))?f(t,n):g.activateOther&&g.activateOther(n)}}function p(t){if(!s(t)&&(!t.delegateTarget.hostname||g.isInternalLink(t.delegateTarget))){var e=l(t.delegateTarget)
e&&d(t,e)}}function h(t){var e=t.delegateTarget.target
if(!s(t)&&q[e])return q[e](t)}var m=!1,v=t.Fn,g=t.dom,y=g.classes,b=g.tag,w=g.events.on,F=g.events.off,x=g.events.trigger,E=v.curry,S=v.isDefined,T=v.overload,k="active",M="on",D=t.location,L=D.hash,O={cache:!0},C=new WeakMap,A=E(function(t,e){return e(t)})
Object.defineProperties(g,{activeMatchers:{value:[]}}),w(document,"dom-activate",function(t){if(!t.defaultPrevented){var e=r(t.target)
if(e.active)return void t.preventDefault()
t.data=e,t.default=i}}),w(document,"dom-deactivate",function(t){if(!t.defaultPrevented){var e=r(t.target)
if(!e.active)return void t.preventDefault()
t.data=e,t.default=u}})
var N=g.trigger("dom-activate"),P={},j={},q={dialog:function(t){var e,n=t.delegateTarget.getAttribute("data-href")||t.delegateTarget.hash||t.delegateTarget.href,r=n.substring(1),o=P[r]||(P[r]=document.getElementById(r))
t.preventDefault(),o.getAttribute&&"text/html"===o.getAttribute("type")&&(e=g.create("fragment",o.innerHTML)),o.tagName&&"template"===o.tagName.toLowerCase()&&(o.content||g.remove(o),e=g.fragmentFromContent(o))
var i=j[r]||(j[r]=a(e))
x(i,"dom-activate")}}
w(document,"click",g.delegate("a[href]",p)),w(document,"click",g.delegate("a[target]",h)),g.ready(function(){if(g("."+k).forEach(N),L&&/^#\S+$/.test(L))try{g(L).forEach(N)}catch(t){}})}(this),function(t){"use strict"
function e(t){var e=t.target.tagName
return e&&!!S[e.toLowerCase()]}function n(t,e){var n,r
if(t.identifiedTouch)return t.identifiedTouch(e)
for(n=-1,r=t.length;++n<r;)if(t[n].identifier===e)return t[n]}function r(t,e){var r=n(t.changedTouches,e.identifier)
if(r&&(r.pageX!==e.pageX||r.pageY!==e.pageY))return r}function o(t){O(t)&&(e(t)||(M(document,T.move,i,[t]),M(document,T.cancel,u,[t])))}function i(t,e){e.push(t),d(t,e,t,a)}function u(t,e){a()}function a(){D(document,T.move,i),D(document,T.cancel,u)}function c(t){if(!S[t.target.tagName.toLowerCase()]){var e=t.changedTouches[0],n={target:e.target,pageX:e.pageX,pageY:e.pageY,identifier:e.identifier,touchmove:function(){s.apply(this,arguments)},touchend:function(){f.apply(this,arguments)}}
M(document,k.move,n.touchmove,[n]),M(document,k.cancel,n.touchend,[n])}}function s(t,e){var n=r(t,e[0])
n&&d(t,e,n,l)}function f(t,e){var r=n(t.changedTouches,e[0].identifier)
r&&l(e)}function l(t){D(document,k.move,t[0].touchmove),D(document,k.cancel,t[0].touchend)}function d(t,e,n,r){var o=n.pageX-e[0].pageX,i=n.pageY-e[0].pageY
if(!(o*o+i*i<E*E)){var u,a=e[0],c=e[0].target
r(e),L(e[0].target,"dom-touch",{pageX:a.pageX,pageY:a.pageY,detail:function(){return u||(u=b(c,e)),u}})}}function p(t,e){e.touch=t,e.timeStamp=t.timeStamp,e.stream.push(t)}function h(t,e){e.target
m(),e.stream.stop()}function m(){D(document,T.move,p),D(document,T.end,h)}function v(t,e){var n=r(t,e)
n&&(t.preventDefault(),e.touch=n,e.timeStamp=t.timeStamp,e.stream.push(n))}function g(t,e){var r=n(t.changedTouches,e.identifier)
r&&(y(e),e.stream.stop())}function y(t){D(document,k.move,t.activeTouchmove),D(document,k.end,t.activeTouchend)}function b(t,e){var n=F.from(e).map(function(t){return{x:t.pageX-e[0].pageX,y:t.pageY-e[0].pageY,time:(t.timeStamp-e[0].timeStamp)/1e3}}),r={stream:n,target:t,touch:void 0,identifier:e[0].identifier}
return void 0===r.identifier?(M(t,"click",C),M(document,T.move,p,r),M(document,T.cancel,h,r)):(r.activeTouchmove=function(t,e){v(t,e)},r.activeTouchend=function(t,e){g(t,e)},M(document,k.move,r.activeTouchmove,r),M(document,k.end,r.activeTouchend,r)),n.then(function(){setTimeout(function(){D(t,"click",C)},200)}),n}var w=t.Fn,F=t.Stream,x=t.dom,E=8,S={textarea:!0,input:!0,select:!0,button:!0},T={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},k={move:"touchmove",cancel:"touchend",end:"touchend"},M=(w.requestTick,x.events.on),D=x.events.off,L=x.events.trigger,O=x.isPrimaryButton,C=x.preventDefault
M(document,"mousedown",o),M(document,"touchstart",c)}(this),function(t){"use strict"
function e(t,e){e=e.shift()
var r=n.toPolar([e.x,e.y])
i(t,"dom-swipe",{detail:e,angle:r[1],velocity:r[0]/e.time})}var n=t.Fn,r=t.dom,o=r.events.on,i=r.events.trigger,u=r.closest
o(document,"dom-touch",function(t){if(!t.defaultPrevented){var n=u(".swipeable",t.target)
if(n){var r=t.detail(),o=r.clone().latest()
o.then(function(){e(n,o)})}}})}(this),function(t){function e(t){if(t.default){var e=t.target
i(e)&&(requestAnimationFrame(function(){function t(t){e.contains(t.target)||e===t.target||o(e,"dom-deactivate")}function n(r){e===r.target&&(r.defaultPrevented||(document.removeEventListener("click",t),document.removeEventListener("dom-deactivate",n)))}document.addEventListener("click",t),document.addEventListener("dom-deactivate",n)}),t.default())}}function n(t){if(t.default){var e=t.target
i(e)&&t.default()}}var r=t.dom,o=r.events.trigger,i=r.matches(".popable, [popable]")
document.addEventListener("dom-activate",e),document.addEventListener("dom-deactivate",n),r.activeMatchers.push(i)}(this),function(t){"use strict"
function e(t,e){if(!t.defaultPrevented&&o.isPrimaryButton(t)){var n=t.currentTarget
n&&(c(e,"dom-deactivate",{relatedTarget:t.target}),t.preventDefault())}}function n(t){if(t.default){var n=t.target
if(i(n)){var r=o.identify(n)
o('a[href$="#'+r+'"]').forEach(function(n){u(n,"click",e,t.target)}),t.default()}}}function r(t,n,r){if(t.default){var u=t.target
if(i(u)){var c=t.target.id
o('a[href$="#'+c+'"]').forEach(function(t){a(t,"click",e)}),t.default()}}}var o=t.dom,i=o.matches(".toggleable, [toggleable]"),u=o.events.on,a=o.events.off,c=o.events.trigger
u(document,"dom-activate",n),u(document,"dom-deactivate",r),o.activeMatchers.push(i)}(this),function(t){"use strict"
function e(t){if(t.default){var e=t.target
if(i(e)){var n=o.query(".switchable",e.parentNode),u=n.indexOf(e)
n.splice(u,1)
var c=n.filter(o.matches(".active"))
t.default(),r.from(c).each(a)}}}function n(t){if(t.default){var e=t.target
i(e)&&t.default()}}var r=t.Fn,o=t.dom,i=o.matches(".switchable, [switchable]"),u=o.events.on,a=o.trigger("dom-deactivate")
u(document,"dom-activate",e),u(document,"dom-deactivate",n),o.activeMatchers.push(i)}(this),function(t){"use strict"
function e(t){return Math.atan(t)/Math.PI}function n(t){var e=i(a(t).filter(u.matches(".switchable"))),n=e.offsetLeft+e.clientWidth,r=t.parentNode.clientWidth
return r-n}function r(t,e){var n=u.box(t).left,r=u.box(e).left,o=Math.round(n-r-u.style("margin-left",e))
t.style.transform="translate("+o+"px, 0px)"}var o=t.Fn,i=o.last,u=t.dom,a=u.children,c=u.events.on,s=u.events.trigger,f=u.closest,l=2*Math.PI,d=800,p=/\s+/
c(document,"dom-touch",function(t){if(!t.defaultPrevented){var r=f(".swipeable",t.target)
if(r){var o=u.classes(r),i=u.style("transform",r)
i=i&&"none"!==i?i:""
var a=u.style("transform:translateX",r),c=!1,s=!1,l=u.attribute("data-slide-min",r),h=u.attribute("data-slide-max",r)
l||h?(c=/elastic/.test(l),s=/elastic/.test(h),l=parseFloat(l)||0,h=parseFloat(h)||0):(c=!0,s=!0,l=n(r),h=0),o.add("notransition")
var m=a
t.detail().map(function(t){m=a+t.x
var n=m>0?s?e(m/d)*d-a:h:m<l?c?e((m-l)/d)*d+l-a:l:t.x
return i+" translate("+n+"px, 0px)"}).each(function(t){r.style.transform=t}).then(function(){o.remove("notransition")
var t=u.attribute("data-slide-snap",r)
if(t){t=t.split(p).map(parseFloat)
var e=t.reduce(function(t,e){return Math.abs(e-m)<Math.abs(t-m)?e:t})
r.style.transform=i+" translate("+e+"px, 0px)"}})}}}),c(document,"dom-swipe",function(t){if(!t.defaultPrevented){var e=f(".swipeable",t.target)
if(e){var n=o.wrap(0,l,t.angle||0),i=n>1*l/8&&n<3*l/8?"previousElementSibling":n>5*l/8&&n<7*l/8&&"nextElementSibling"
if(i){var c=a(e).filter(u.matches(".active")).shift()
c[i]?s(c[i],"dom-activate"):r(e,c)}}}}),c(document,"dom-activate",function(t){if(t.default){var e=t.target,n=e.parentNode
if(u.matches(".swipeable",n)){var r=u.classes(n)
r.remove("notransition"),document.documentElement.clientWidth
var o=u.box(e).left,i=u.box(n).left,a=o-i-u.style("margin-left",e)
n.style.transform="translate("+-a+"px, 0px)",t.preventDefault()}}})}(this),function(t){"use strict"
var e=t.Fn,n=t.dom,r=e.noop,o=n.events.on,i=n.events.off,u=n.events.trigger,a=n.disableScroll,c=n.enableScroll,s=n.trapFocus,f=r,l=n.matches(".focusable, [focusable]"),d=600
o(document,"dom-activate",function(t){if(!t.defaultPrevented&&l(t.target)){var e=t.target,r=function t(e){clearTimeout(c),i(e.target,"transitionend",t),f=s(e.target)},c=setTimeout(r,d,t)
o(t.target,"transitionend",r),a(n.root),requestAnimationFrame(function(){function t(t){27===t.keyCode&&(u(e,"dom-deactivate"),t.preventDefault())}function n(r){e===r.target&&(r.defaultPrevented||(document.removeEventListener("keydown",t),document.removeEventListener("dom-deactivate",n)))}document.addEventListener("keydown",t),document.addEventListener("dom-deactivate",n)})}}),o(document,"dom-deactivate",function(t){if(!t.defaultPrevented&&l(t.target)){var e=function t(e){clearTimeout(u),i(e.target,"transitionend",t),f(),f=r},u=setTimeout(e,d,t)
o(t.target,"transitionend",e),c(n.root)}}),n.activeMatchers.push(l)}(this),function(t){"use strict"
function e(t,e,n){function c(){clearTimeout(f),u(s,"transitionend",c),a(s)}if(t.default){var s=t.target
if(r(s)){var f=setTimeout(c,1e3*o)
i(s,"transitionend",c),t.default()}}}var n=t.dom,r=n.matches(".removeable, [removeable]"),o=1,i=n.events.on,u=n.events.off,a=n.remove
i(document,"dom-deactivate",e)}(this),function(t){function e(t){if(t.default){var e=t.target
if(v(e)&&e!==u){if(u){if(e===u)return
F(),c.trigger("dom-deactivate",u)}var n,r,o=t.timeStamp;(w>o||o>w+g)&&(n=h(c.view,e),r=c.safe.top,w=o+1e3*y,F=d(y,b,"scrollTop",c.view,n[1]-r)),t.default(),u=e}}}function n(t){if(t.default){var e=t.target
v(e)&&(t.default(),e===u&&(u=void 0))}}function r(){return{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}function o(){for(var t=c(".locateable"),e=t.map(p).sort(s("top")),n=r(),o=-1;e[++o]&&!(e[o].top>n.height/2););if(--o,!(o<0||o>=e.length)){var i=t[o]
if(u){if(i===u)return
c.trigger("dom-deactivate",u)}c.trigger("dom-activate",i)}}function i(t){w>=t.timeStamp||(w=t.timeStamp,o())}var u,a=t.Fn,c=t.dom,s=a.by,f=a.noop,l=a.exponentialOut,d=c.animate,p=c.box,h=c.offset,m=c.events.on,v=c.matches(".locateable, [locateable]"),g=90,y=.8,b=l(6),w=0,F=f
m(document,"dom-activate",e),m(document,"dom-deactivate",n),m(t,"scroll",i),o(),c.activeMatchers.push(v)}(this),function(t){"use strict"
function e(t){return function(){return!t.apply(this,arguments)}}function n(t){return!t.validity||t.validity.valid}function r(t){return t.nextElementSibling&&w(t.nextElementSibling)}function o(t){var e,n,r=t,o=r.validity
for(e in o)if("valid"!==e&&o[e])return n=f.validation[x[e]],n&&t.setCustomValidity(n),{type:e,attr:x[e],name:t.name,text:r.validationMessage,node:t}}function i(t){for(var e=t.node,n=e;n.nextElementSibling&&w(n.nextElementSibling);)n=n.nextElementSibling
var r=f.create("label")
f.assign(r,{textContent:t.text,for:e.id,class:"error-label"}),h(n,r)}function u(t){m(t).add(F)}function a(t){for(var e=t;(e=g(e))&&w(e);)y(e)}var c=(Object.assign,t.Fn),s=t.Stream,f=t.dom,l=c.get,d=c.invoke,p=c.nothing,h=(c.once,f.after),m=(f.attribute,f.classes),v=f.matches,g=f.next,y=f.remove,b=v(".validateable, .validateable input, .validateable textarea, .validateable select"),w=v(".error-label"),F="validated",x={patternMismatch:"pattern",rangeOverflow:"max",rangeUnderflow:"min",stepMismatch:"step",tooLong:"maxlength",typeMismatch:"type",valueMissing:"required"}
f.event("input",document).map(l("target")).filter(b).tap(d("setCustomValidity",[""])).filter(n).each(a),f.event("focusout",document).map(l("target")).filter(b).each(d("checkValidity",p)),f.event("submit",document).map(l("target")).filter(b).each(u),document.addEventListener("invalid",s.of().map(l("target")).filter(b).tap(u).filter(e(r)).map(o).each(i).push,!0),f.validation=f.validation||{}}(this),function(t){"use strict"
function e(t,e){var n=z(e).trim().split(j)
t.add.apply(t,n)}function n(t,e){var n=z(e).trim().split(j)
t.remove.apply(t,n)}function r(t,e,n){if(!n)return T
var r,o,i,u,a=[]
for(B.lastIndex=0;B.lastIndex<n.length&&(r=B.exec(n));){if(o=r[1],i=e[o]?e[o].transform:t[o],!i)throw new Error('mount: transform "'+o+'" not found')
if(r[2]?(u=JSON.parse("["+r[2].replace(/'/g,'"')+"]"),a.push(i.apply(null,u))):a.push(i),"function"!=typeof a[a.length-1])throw new Error('mount: transform "'+o+'" not resulting in fn')}return C.apply(null,a)}function o(t,e){if(!e)return T
var n,r,o,i,u=[]
for(B.lastIndex=0;B.lastIndex<e.length&&(n=B.exec(e));){if(r=n[1],o=t[r].invert,!o)throw new Error('mount: transformers "'+r+'" not found')
n[2]?(i=JSON.parse("["+n[2].replace(/'/g,'"')+"]"),u.unshift(o.apply(null,i))):u.unshift(o)}return C.apply(null,u)}function i(t,e,n,r){var o=e.length
e.push(""),n.push({token:r[0],path:r[2],pipe:r[3],render:function(n){e[o]=z(n),t(e)}})}function u(t,e,n,r){var o=n.rtoken,u=o.lastIndex=0,a=o.exec(t)
if(!a)return D
for(var c=[],s=function(t){e(t.join(""))};a;)a.index>u&&c.push(t.slice(u,a.index)),i(s,c,r,a),u=o.lastIndex,a=o.exec(t)
t.length>u&&c.push(t.slice(u))}function a(t,e,n,r){for(var o;o=t.shift();)c(o,e,n,r)}function c(t,e,n,r){var o=b.attribute(t,e)
return o?u(o,function(n){e.setAttribute(t,n)},n,r):D}function s(t,e,n,r){var o=n.rtoken,i=e.getAttribute(n.attributePrefix+t)||e.getAttribute(t)
if(i){o.lastIndex=0
var u=o.exec(i.trim())
u&&r.push({token:i.trim(),path:u[2],pipe:u[3],render:t in e?function(n){e[t]=!!n}:function(n){n?e.setAttribute(t,t):e.removeAttribute(t)}})}}function f(t,r,o){var i=r.rtoken,u=b.attribute("class",t)
if(u){var a=b.classes(t),c=u.replace(i,function(t,r,i,u,c){var s=""
return o.push({token:t,path:i,pipe:u,render:function(t){s&&q.test(s)&&n(a,s),t&&q.test(t)&&e(a,t),s=t}}),""})
t.setAttribute("class",c)}}function l(t,e,n){var r=F(e.attributePrefix+"value",t)||F("value",t),o=e.rtoken
o.lastIndex=0
var i=o.exec(r)
if(i)return K(t,e,i,n)}function d(t,e){var n=r(e.transforms,e.transformers,t.pipe),o=x(t.render,n),i=v.throttle(o,requestAnimationFrame,cancelAnimationFrame)
t.update=o,t.push=i}function p(t,e,n){var r
return{shift:L,stop:function(){t.forEach(function(t){t.unbind&&t.unbind(),t.stop&&t.stop()})},push:function(i){if(r!==i){r=i,m&&console.group("update:",n)
var u,a=g(i)
return t.forEach(function(t){t.unbind&&t.unbind(),t.push||d(t,e),t.unbind=t.unbind||function(e){t.push.cancel&&t.push.cancel(),t.input.stop(),t.listen&&u()}
var n=t.input=y.observe(t.path,a),r=n.latest().shift()
void 0!==r&&(t.update||t.push)(r),n.each(t.push)
var i,c,s
t.listen&&(i=N(t.path,a),c=o(e.transformers,t.pipe),s=C(function(){return t.read()},c,i),u=t.listen(s),void 0===r&&s())}),m&&console.groupEnd(),i}}}}function h(t,e){e=w({},_,e),m&&console.group("mount:",t)
var n=[]
return X(t,e,n),m&&(console.table(n,["token","path","pipe"]),console.groupEnd()),p(n,e,t)}var m=t.DEBUG,v=t.Fn,g=t.Observable,y=t.Stream,b=t.dom,w=Object.assign,F=b.attribute,x=v.compose,E=v.curry,S=v.get,T=v.id,k=v.isDefined,M=Number.isNaN,D=v.nothing,L=v.noop,O=v.overload,C=v.pipe,A=v.set,N=v.setPath,P=v.toType,j=/\s+/,q=/\S/,I=/function(?:\s+\w+)?\s*(\([\w,\s]*\))/,_={attributePrefix:"data-",mount:L,transforms:{},transformers:{},rtoken:/(\{\[)\s*(.*?)(?:\s*(\|.*?))?\s*(\]\})/g},B=/\|\s*([\w\-]+)\s*(?::([^|]+))?/g,H=E(function(t,e,n){return t.addEventListener(e,n),function(){t.removeEventListener("input",n)}},!0),z=O(P,{boolean:function(t){return t+""},function:function(t){return(t.name||"function")+(I.exec(t.toString())||[])[1]},number:function(t){return Number.isNaN(t)?"":t+""},string:T,symbol:function(t){return t.toString()},undefined:function(){return""},object:function(t){return null===t?"":JSON.stringify(t)},default:JSON.stringify}),R={1:function(t,e,n){for(var r,o,i=t.childNodes,u=-1;r=i[++u];)o=e.mount(r),o?n.push(o):X(r,e,n)
f(t,e,n),a(["id","title","style"],t,e,n),J(t,e,n)},3:function(t,e,n){u(t.nodeValue,A("nodeValue",t),e,n)},8:L,11:function(t,e,n){for(var r,o,i=t.childNodes,u=-1;r=i[++u];)o=e.mount(r),o?n.push(o):X(r,e,n)}},Y={a:function(t,e,n){c("href",t,e,n)},button:function(t,e,n){s("disabled",t,e,n)},input:function(t,e,n){s("disabled",t,e,n),s("required",t,e,n),c("name",t,e,n),U(t,e,n),l(t,e,n)},img:function(t,e,n){c("alt",t,e,n)},label:function(t,e,n){c("for",t,e,n)},option:function(t,e,n){s("disabled",t,e,n),c("value",t,e,n)},select:function(t,e,n){s("disabled",t,e,n),s("required",t,e,n),c("name",t,e,n),l(t,e,n)},textarea:function(t,e,n){s("disabled",t,e,n),s("required",t,e,n),c("name",t,e,n),l(t,e,n)},time:function(t,e,n){a(["datetime"],t,e,n)},svg:function(t,e,n){a(["viewbox"],t,e,n)},g:function(t,e,n){a(["transform"],t,e,n)},path:function(t,e,n){a(["d","transform"],t,e,n)},line:function(t,e,n){a(["x1","x2","y1","y2","transform"],t,e,n)},rect:function(t,e,n){a(["x","y","width","height","rx","ry","transform"],t,e,n)},text:function(t,e,n){a(["x","y","dx","dy","text-anchor"],t,e,n)},use:function(t,e,n){a(["href","transform"],t,e,n)},default:L},$={date:function(t,e,n){a(["min","max","step"],t,e,n)},number:function(t,e,n){a(["min","max","step"],t,e,n)},range:function(t,e,n){a(["min","max","step"],t,e,n)},time:function(t,e,n){a(["min","max","step"],t,e,n)},checkbox:function(){},radio:function(){},default:L},W={checkbox:function(t,e,n,r){r.push({node:t,token:n[0],path:n[2],pipe:n[3],read:function(){return k(t.getAttribute("value"))?t.checked?t.value:void 0:t.checked},render:function(e){t.checked=k(t.getAttribute("value"))?e===t.value:e===!0},listen:H(t,"change")})},radio:function(t,e,n,r){r.push({node:t,token:n[0],path:n[2],pipe:n[3],read:function(){if(t.checked)return!k(t.getAttribute("value"))||t.value},render:function(e){t.checked=k(t.getAttribute("value"))?e===t.value:e===!0},listen:H(t,"change")})},number:function(t,e,n,r){r.push({node:t,token:n[0],path:n[2],pipe:n[3],read:function(){return t.value?parseFloat(t.value):void 0},render:function(e){e!==parseFloat(t.value)&&(t.value="number"!=typeof e||M(e)?"":e)},listen:H(t,"input")})},range:function(t,e,n,r){r.push({node:t,token:n[0],path:n[2],pipe:n[3],read:function(){return t.value?parseFloat(t.value):void 0},render:function(e){e!==parseFloat(t.value)&&(t.value="number"!=typeof e||M(e)?"":e)},listen:H(t,"input")})},default:function(t,e,n,r){r.push({node:t,token:n[0],path:n[2],pipe:n[3],read:function(){return t.value},render:function(e){e!==t.value&&(t.value="string"==typeof e?e:"")},listen:H(t,"input")})}},X=O(S("nodeType"),R),J=O(b.tag,Y),U=O(S("type"),$),K=O(S("type"),W)
h.types=R,h.tags=Y,h.inputs=$,h.mountAttribute=c,h.mountBoolean=s,h.mountInput=U,h.mountValue=l,h.mountName=function(t,e,n){var r=t.name,o=e.rtoken
o.lastIndex=0
var i=o.exec(r)
if(i)return K(t,e,i,n)},t.mount=h}(this),function(t){t.console&&t.console.log&&console.log("Sparky      - https://github.com/cruncher/sparky")}(this),function(t){"use strict"
function e(t,e){for(var n=[],r=-1;t[++r];)n.push(s(t[r],e))
return{stop:function(){return n.forEach(p("stop",arguments))},push:function(){return n.forEach(p("push",arguments))}}}function n(t){return t.replace(/\//g,"\\/")}function r(t,i,s){function f(){return w=!1,{fn:g}}function l(){b.attributePrefix=r.attributePrefix,b.transforms=r.transforms,b.transformers=r.transformers,!o||s&&s.suppressLogs||console.groupCollapsed("Sparky:",t),E=e(F,b),x.each(E.push),!o||s&&s.suppressLogs||console.groupEnd()}function d(){var t=g.match(y)
if(!t)return F.continue=h,l(),F
var e=r.fn[t[1]]
if(!e)throw new Error('Sparky: fn "'+t[1]+'" not found in Sparky.fn')
var n=t[2]&&JSON.parse("["+t[2].replace(/'/g,'"')+"]")
return g=g.slice(t[0].length),x=e.call(F,v,x,n)||x,w&&d()}function p(t,e){this.shift=function(){var t
if(void 0!==i)return t=u(i),i=void 0,t},this.push=function(){i=arguments[arguments.length-1],t("push")},this.stop=function(){x.stop&&x.stop!==F.stop&&x.stop(),E.stop&&E.stop(),e(i?1:0)}}if(!r.prototype.isPrototypeOf(this))return new r(t,i,s)
var v="string"==typeof t?document.querySelector(n(t)):t,g=s&&s.fn||c.attribute(r.attributePrefix+"fn",v)||"",w=!0,F=this,x=this,E=m
this[0]=v,this.length=1,a.call(this,p),this.interrupt=f,this.continue=d,d()}var o=t.DEBUG,i=t.Fn,u=t.Observable,a=t.Stream,c=t.dom,s=t.mount,f=Object.assign,l=i.deprecate,d=i.getPath,p=i.invoke,h=i.noop,m=i.nothing,v=c.tag,g=c.preventDefault,y=/\s*([-\w]+)(?:\s*:\s*((?:"[^"]*"|'[^']*'|[\w-\[\]]*)(?:\s*,\s*(?:"[^"]*"|'[^']*'|[\w-\[\]]*))*))?/,b={mount:function(t){var e=c.attribute(r.attributePrefix+"fn",t)
if(e){var n=new r(t,void 0,{fn:e,suppressLogs:!0})
return n.token=e,n.path="",n}}}
r.prototype=a.prototype,f(r,{attributePrefix:"sparky-",fn:{find:function(e,n,r){var o=d(r[0],t)
return o?i.of(d(r[0],t)):(console.warn("Sparky: scope:path – no object at path "+r[0]),i.of())},scope:i.deprecate(function(t,e,n){return r.fn.find.apply(this,arguments)},"Deprecated Sparky fn scope:path renamed find:path"),get:function(t,e,n){return e.map(d(n[0]))},stop:function(t,e){console.log(this.interrupt(),t,e)},ignore:l(function(t,e){console.log(this.interrupt(),t,e)},'Sparky: fn "ignore" renamed "stop".'),prevent:function(t,e,n){t.addEventListener(n[0],g),this.then(function(){t.removeEventListener(n[0],g)})},log:function(t,e){function n(e){console.group("Sparky: scope",t),console.log("data ",r.data),console.log("scope",e),console.log("fn   ",r.fn),console.groupEnd("---")}var r=this
return console.group("Sparky: run  ",t),console.log("data ",r.data),console.groupEnd("---"),e.tap(n)}},transforms:{},MarkerNode:function(t){if(!o)return c.create("text","")
var e=t&&t.getAttribute(r.attributePrefix+"fn")
return c.create("comment",v(t)+(e?" "+r.attributePrefix+'-fn="'+e+'"':""))}}),Object.defineProperties(r,{rtoken:{get:function(){return b.rtoken},set:function(t){b.rtoken=t},enumerable:!0,configurable:!0}}),t.Sparky=r}(this),Sparky.nodeToString=Fn.id,function(t){var e=t.Sparky
!!(document.all&&document.compatMode||t.navigator.msPointerEnabled)
e.fn.log=function(t,e){function n(e){console.log("Sparky node:",t,"scope:",e)}return e.tap(n)}}(this),function(t){"use strict"
var e=Object.assign,n=t.dom,r=t.Sparky
e(r.fn,{"show-on-scope":function(e,r){r.tap(function(){t.requestAnimationFrame(function(){n.classes(e).remove("sparky-hidden")})})}})}(this),function(t){"use strict"
var e=Object.assign,n=t.Sparky
e(n.fn,{html:function(t,e){e.tap(function(e){t.innerHTML=e})}})}(this),function(t){"use strict"
function e(t){t.preventDefault()}var n=t.Fn
Sparky.scope=function(t){return console.warn("Sparky: Sparky.scope() deprecated in favour of Sparky.getScope()"),Sparky.getScope(t)},Sparky.setScope=function(e,n){if(!t.jQuery)throw new Error(Sparky.attributePrefix+'fn="store-scope" requires jQuery.')
t.jQuery&&jQuery.data(e,"scope",n)},Sparky.getScope=function(e){if(!t.jQuery)throw new Error(Sparky.attributePrefix+'fn="store-scope" requires jQuery.')
return jQuery.data(e,"scope")},Object.assign(Sparky.fn,{prevent:function(t,n,r){t.addEventListener(r[0],e)},"ajax-on-submit":function(t,r,o){var i=(t.getAttribute("method")||"POST",t.getAttribute("action"))
if(!n.isDefined(i))throw new Error('Sparky: fn ajax-on-submit requires an action="url" attribute.')
var u
t.addEventListener("submit",e),r.tap(function(e){u&&t.removeEventListener(u),u=function(t){axios.post(i,e,{headers:{"X-CSRFToken":getCookie("csrftoken")}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},t.addEventListener("submit",u)})},"expose-scope":function(t,e){e.tap(function(e){Sparky.setScope(t,e)})}})}(this),function(){"use strict"
Sparky.fn["x-scroll-slave"]=function(t){function e(){t.scrollLeft=n.scrollLeft}var n,r=t.getAttribute(Sparky.attributePrefix+"x-scroll-master")
this.on("dom-add",function(){if(n=document.getElementById(r),!n)throw console.error(t),new Error('Sparky scroll-x-slave: id="'+r+'" not in the DOM.')
n.addEventListener("scroll",e),e()}).on("destroy",function(){n&&n.removeEventListener("scroll",e)})},Sparky.fn["y-scroll-slave"]=function(t){function e(){t.scrollTop=r.scrollTop}var n=t.getAttribute(Sparky.attributePrefix+"y-scroll-master"),r=document.getElementById(n)
if(!r)throw console.error(t),new Error('Sparky scroll-x-slave: id="'+n+'" not in the DOM.')
r.addEventListener("scroll",e),e(),this.on("destroy",function(){r.removeEventListener("scroll",e)})}}(),function(t){var e=t.DEBUG,n=t.axios,r=t.jQuery,o=t.Fn,i=t.Sparky,u=t.Stream,a=Object.assign,c=t.fetch,s=o.get,f=s("data"),l={},d=n?function(t){return n.get(t).then(f)}:r?function(t){return r.get(t).then(f)}:c?function(t){return c(t).then(f)}:function(t){throw new Error('Sparky: no axios, jQuery or fetch found for request "'+t+'"')}
a(i.fn,{load:function(t,n,r){var o=r[0]
if(e&&!o)throw new Error("Sparky: "+i.attributePrefix+'fn="load:url" requires a url.')
var a=u.of()
return d(o).then(a.push).catch(function(t){console.warn(t)}),a},import:function(t,n,r){var o=r[0]
if(e&&!o)throw new Error("Sparky: "+i.attributePrefix+'fn="import:url" requires a url.')
if(l[o])return u.of(l[o])
var a=u.of()
return d(o).then(function(t){t&&(l[o]=t,a.push(t))}).catch(function(t){console.warn(t)}),a}})}(this),function(t){"use strict"
function e(t,e,n,r,o){if(!o)throw new Error("Sparky: template "+r+" not found.")
n.clone().take(1).each(function(n){var r=c.clone(o)
c.empty(e),c.append(e,r),t.continue()})}function n(t,n,r,o,i,u){var a,s
u||(a=m[o][""],s=a.getElementById(i),u=m[o][i]=a===document?c.fragmentFromId(i):s&&c.fragmentFromHTML(s.innerHTML)),e(t,n,r,i,u)}function r(t,n,r,o,i,u){var a,s
if(m[o]={"":u},!i)throw new Error("Sparky: template url has no hash id "+o)
s=u.getElementById(i),a=m[o][i]=s&&c.fragmentFromHTML(s.innerHTML),e(t,n,r,i,a)}var o=t.DEBUG,i=t.axios,u=t.jQuery,a=t.Fn,c=t.dom,s=t.Sparky,f=Object.assign,l=t.fetch,d=a.get,p=d("data"),h=c.parse("html"),m={"":{"":document}},v=i?function(t,e){return i.get(t).then(p).then(h)}:u?function(t,e){return u.get(t).then(p).then(h)}:l?function(t,e){return l(t).then(p).then(h).then(function(){})}:function(t,e){throw new Error('Sparky: no axios, jQuery or fetch found for request "'+t+'"')}
f(s.fn,{template:function(t,e,i){var u,a,c,f=i[0]
if(/#/.test(f)?(u=f.split("#"),a=u[0]||"",c=u[1]||""):(console.warn('Deprecated: Sparky template:url url should be a url or hash ref, actually an id: "'+f+'"'),a="",c=f),o&&!c)throw new Error("Sparky: "+s.attributePrefix+'fn="template:url" requires a url with a hash ref. "'+f+'"')
var l=this
return l.interrupt(),m[a]?n(l,t,e,a,c,m[a][c]):v(a).then(function(n){n&&r(l,t,e,a,c,n)}).catch(function(t){console.warn(t)}),e}})}(this),function(t){"use strict"
function e(t,e,n){var r=new a(t,e,n)
return r[h]=e,r}function n(t,n,r,o){for(var i,u,a,c=-1;++c<r.length;)if(u=r[c],i=o[c],!i||u!==i[h]){for(a=-1;o[++a]&&o[a][h]!==u;);i=a===o.length?e(f(t),u,n):o.splice(a,1)[0],o.splice(c,0,i)}}function r(t,e,n){for(;n.length>e.length;)c.forEach.call(n.pop().stop(),i.remove)
for(var r=n.length,o=-1,u=t.parentNode;o<r;)for(t=t?t.nextSibling:null;++o<r&&n[o][0]!==t;)u.insertBefore(n[o][0],t)}var o=t.Fn,i=t.dom,u=t.Observable,a=t.Sparky,c=Array.prototype,s=o.noop,f=i.clone,l=i.tag,d=u.observe,p=a.MarkerNode,h=Symbol("object")
a.fn.each=function(t,e,u){function c(t){var e=g?v.parentNode.value:void 0
n(h,m,t,f),r(v,t,f),g&&void 0!==e&&(v.parentNode.value=e)}var f=[],h=t.cloneNode(!0),m=this.interrupt(),v=p(t),g="option"===l(t),y=o.throttle(c,requestAnimationFrame,s)
h.removeAttribute(a.attributePrefix+"fn"),i.before(t,v),i.remove(t)
var b=s,w=e.latest().shift()
w&&d(w,"",c),e.each(function(t){b(),b=d(t,"",y)}),this.then(function(){y.cancel(),b()})}}(this),function(t){"use strict"
function e(t){for(var e=[],n=0;n++<31;)e[n]=t[n]||t.n
return e}function n(t){for(var e="";t--;)e+=" "
return e}function r(t){var e=new Date(t),n=e.toJSON(),r=n.slice(0,t.length)===t&&!n.slice(t.length).match(p)
return"string"!=typeof t?new Date(t):r?new Date(+e+6e4*e.getTimezoneOffset()):e}var o=t.Fn,i=t.dom,u=t.Sparky,a=Object.assign,c=o.curry,s=o.isDefined,f=u.settings=u.settings||{}
f.en={days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),months:"January February March April May June July August September October November December".split(" "),ordinals:e({n:"th",1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"})},f.fr={days:"dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),months:"janvier février mars avril mai juin juillet août septembre octobre novembre décembre".split(" "),ordinals:e({n:"ième",1:"er"})},f.de={days:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),months:"Januar Februar März April Mai Juni Juli Oktober September Oktober November Dezember".split(" "),ordinals:e({n:"er"})},f.it={days:"domenica lunedì martedì mercoledì giovedì venerdì sabato".split(" "),months:"gennaio febbraio marzo aprile maggio giugno luglio agosto settembre ottobre novembre dicembre".split(" "),ordinals:e({n:"o"})}
var l=document.documentElement.lang
f.lang=l&&f[l]?l:"en"
var d=/([YMDdHhms]{2,4}|[a-zA-Z])/g,p=/[1-9]/
a(u.transformers={},{add:{transform:o.add,invert:c(function(t,e){return e-t})},decibels:{transform:o.todB,invert:o.toLevel},multiply:{transform:o.multiply,invert:c(function(t,e){return e/t})},degrees:{transform:o.toDeg,invert:o.toRad},radians:{transform:o.toRad,invert:o.toDeg},pow:{transform:o.pow,invert:c(function(t,e){return o.pow(1/t,e)})},exp:{transform:o.exp,invert:o.log},log:{transform:o.log,invert:o.exp},int:{transform:o.toFixed(0),invert:o.toInt},float:{transform:o.toString,invert:o.toFloat},normalise:{transform:o.normalise,invert:o.denormalise},denormalise:{transform:o.denormalise,invert:o.normalise},floatformat:{transform:o.toFixed,invert:c(function(t,e){return parseFloat(e)})}}),a(u.transformers,{decimals:u.transformers.floatformat}),a(u.transforms,{add:o.add,append:o.append,contains:o.contains,diff:o.diff,equals:o.equals,factorise:o.factorise,gcd:o.gcd,get:o.get,getPath:o.getPath,intersect:o.intersect,invoke:o.invoke,is:o.is,lcm:o.lcm,limit:o.limit,max:o.max,min:o.min,mod:o.mod,not:o.not,percent:o.multiply(100),prepend:o.prepend,rest:o.rest,root:o.nthRoot,slugify:o.slugify,sort:o.sort,take:o.take,toCartesian:o.toCartesian,todB:o.todB,toDeg:o.toDeg,toLevel:o.toLevel,toFixed:o.toFixed,toFloat:o.toFloat,toPolar:o.toPolar,toRad:o.toRad,toStringType:o.toStringType,toType:o.toType,unique:o.unique,unite:o.unite,escape:i.escape,toPx:i.toPx,toRem:i.toRem,capfirst:function(t){return t.charAt(0).toUpperCase()+t.substring(1)},cut:function(t,e){return u.filter.replace(t,e,"")},formatdate:function(t){var e={YYYY:function(t){return("000"+t.getFullYear()).slice(-4)},YY:function(t){return("0"+t.getFullYear()%100).slice(-2)},MM:function(t){return("0"+(t.getMonth()+1)).slice(-2)},MMM:function(t){return this.MMMM(t).slice(0,3)},MMMM:function(e){return t[l].months[e.getMonth()]},DD:function(t){return("0"+t.getDate()).slice(-2)},d:function(t){return""+t.getDay()},dd:function(t){return("0"+t.getDay()).slice(-2)},ddd:function(t){return this.dddd(t).slice(0,3)},dddd:function(e){return t[l].days[e.getDay()]},HH:function(t){return("0"+t.getHours()).slice(-2)},mm:function(t){return("0"+t.getMinutes()).slice(-2)},ss:function(t){return("0"+t.getSeconds()).slice(-2)},sss:function(t){return(t.getSeconds()+t.getMilliseconds()/1e3+"").replace(/^\d\.|^\d$/,function(t){return"0"+t})}}
return function(n,o,i){if(n){var u=n instanceof Date?n:r(n)
return i=i||t.lang,o.replace(d,function(t,n){return e[n]?e[n](u,i):n})}}}(f),formattime:function(t,e,n){return Time(t).render(e,n)},date:function(t){var e={a:function(t){return t.getHours()<12?"a.m.":"p.m."},A:function(t){return t.getHours()<12?"AM":"PM"},b:function(e,n){return t[n].months[e.getMonth()].toLowerCase().slice(0,3)},c:function(t){return t.toISOString()},d:function(t){return t.getDate()},D:function(e,n){return t[n].days[e.getDay()].slice(0,3)},F:function(e,n){return t[n].months[e.getMonth()]},g:function(t){return t.getHours()%12},G:function(t){return t.getHours()},h:function(t){return("0"+t.getHours()%12).slice(-2)},H:function(t){return("0"+t.getHours()).slice(-2)},i:function(t){return("0"+t.getMinutes()).slice(-2)},j:function(t){return t.getDate()},l:function(e,n){return t[n].days[e.getDay()]},m:function(t){return("0"+t.getMonth()).slice(-2)},M:function(e,n){return t[n].months[e.getMonth()].slice(0,3)},n:function(t){return t.getMonth()},O:function(t){return(t.getTimezoneOffset()<0?"+":"-")+("0"+Math.round(100*Math.abs(t.getTimezoneOffset())/60)).slice(-4)},r:function(t){return t.toISOString()},s:function(t){return("0"+t.getSeconds()).slice(-2)},S:function(e){return t.ordinals[e.getDate()]},U:function(t){return+t},w:function(t){return t.getDay()},y:function(t){return("0"+t.getFullYear()%100).slice(-2)},Y:function(t){return t.getFullYear()},Z:function(t){return 60*-t.getTimezoneOffset()}}
return c(function(n,o){if(o){var i=o instanceof Date?o:r(o)
return l=t.lang,n.replace(d,function(t,n){return e[n]?e[n](i,l):n})}})}(f),decibels:o.todB,decimals:o.toFixed,divide:c(function(t,e){if("number"==typeof e)return e/t}),"find-in":c(function(t,e){if(s(e)){var n=o.getPath(t,u.data)
return n&&n.find(e)}}),first:o.get(0),floatformat:c(function(t,e){return"number"==typeof e?Number.prototype.toFixed.call(e,t):s(e)?u.debug&&console.warn("Sparky: filter floatformat: "+t+" called on non-number "+e):""}),floor:function(t){return Math.floor(t)},"greater-than":c(function(t,e){return e>t}),invert:function(t){return"number"==typeof t?1/t:!t},join:c(function(t,e){return Array.prototype.join.call(e,t)}),json:function(t){return JSON.stringify(t)},last:function(t){return t[t.length-1]},length:function(t){return t.length},"less-than":c(function(t,e,n,r){return r<t?e:n}),localise:c(function(t,e){var n=document.documentElement.lang,r={}
return s(t)&&(r.minimumFractionDigits=t,r.maximumFractionDigits=t),e.toLocaleString?e.toLocaleString(n,r):e}),lowercase:function(t){if("string"==typeof t)return String.prototype.toLowerCase.apply(t)},map:c(function(t,e,n){return n&&n.map(u.transforms[t](e))}),pluralise:c(function(t,e,n,r){if("number"==typeof r)return t=t||"",e=e||"s","fr"===n?r<2&&r>=0?t:e:1===r?t:e}),postpad:c(function(t,e){var r=s(e)?e.toString():"",o=r.length,i=parseInt(t,10)
return i===o?e:i>o?r+n(i-o):r.substring(0,i)}),prepad:c(function(t,e,n){var r=s(n)?n.toString():"",o=r.length,i=[]
return t-o<1?n:(i.length=0,i.length=t-o,i.push(r),i.join(e||" "))}),random:function(t){return t[Math.floor(Math.random()*t.length)]},reduce:c(function(t,e,n){return n&&n.reduce(o[t],e||0)}),replace:c(function(t,e,n){if("string"==typeof n)return n.replace(RegExp(t,"g"),e)}),round:Math.round,slice:c(function(t,e,n){return"string"==typeof n?n.slice(t,e):Array.prototype.slice.call(n,t,e)}),striptags:function(){var t=/<(?:[^>'"]|"[^"]*"|'[^']*')*>/g
return function(e){return e.replace(t,"")}}(),switch:function(t){if("string"==typeof t&&(t=parseInt(t,10)),"number"==typeof t&&!Number.isNaN(t))return arguments[t+1]},symbolise:function(t){var e=t+"",n=1/0+""
return e===n?"∞":e==="-"+n?"-∞":t},time:function(){},trans:function(){var t={}
return function(e){var n=u.data.translations
if(!n)return t.missingTranslations||(console.warn("Sparky: Missing lookup object Sparky.data.translations"),t.missingTranslations=!0),e
var r=n[e]
return r?r:(t[e]||(console.warn('Sparky: Sparky.data.translations contains no translation for "'+e+'"'),t[e]=!0),e)}}(),truncatechars:c(function(t,e){return e.length>t?e.slice(0,t)+"…":e}),type:function(t){return typeof t},uppercase:function(t){if("string"==typeof t)return String.prototype.toUpperCase.apply(t)},yesno:c(function(t,e,n){return n?t:e})})}(this)
