!function(t){"use strict"
function n(t){c=!0,a.forEach(u("call",[null,t])),a.clear(),c=void 0}function e(t){if(!a.has(t)){if(c===!0)return void t()
a.add(t),void 0===c&&(c=requestAnimationFrame(n))}}function r(t){a.delete(t),void 0!==c&&c!==!0&&0===a.size&&(cancelAnimationFrame(c),c=void 0)}const o=t.Fn,i=t.dom,u=o.invoke,a=(i.now,new Set),s=[]
var c
t.frame={cue:e,uncue:r,data:s}}(window),function(t){"use strict"
function n(t,n,e){if(!e)return y
var r,o,i,u,a=[]
for(L.lastIndex=0;L.lastIndex<e.length&&(r=L.exec(e));){if(o=r[1],i=n[o]?n[o].tx:t[o],!i)throw new Error('mount:  transform "'+o+'" not found')
if(r[2]?(u=A(r[2]),a.push(i.apply(null,u))):a.push(i),"function"!=typeof a[a.length-1])throw new Error('mount:  transform "'+o+'" not resulting in fn')}return x.apply(null,a)}function e(t,n){if(!n)return y
var e,r,o,i,u=[]
for(L.lastIndex=0;L.lastIndex<n.length&&(e=L.exec(n));){if(r=e[1],o=t[r].ix,!o)throw new Error('mount:  transformers "'+r+'" not found')
e[2]?(i=JSON.parse("["+e[2].replace(/'/g,'"')+"]"),u.unshift(o.apply(null,i))):u.unshift(o)}return x.apply(null,u)}function r(t){N.push(t)}function o(t,n,e,o,i){r(this),this.node=t,this.token=n,this.path=e,this.render=o,this.pipe=i}function i(t,n,e,r,i,u,a){o.call(this,t,n,e,r,a),this.type=i,this.read=u}function u(t,e){t.transform=n(e.transforms,e.transformers,t.pipe),t.originalValue=t.read?t.read():""}function a(t,n){function e(e){function o(t){n(i)}var i=t.shift()
void 0!==i&&(r(),r=P(i,"",function(){E(o)}))}var r=b
E(e),t.on&&t.on("push",function(){E(e)})}function s(t,n,e){var r=t.input=d.observe(t.path,n).latest()
t.scope=n
var o,i=!1
return t.render?void(t.listen?(o=c(t,n,e),t.cuer=function e(){if(t.update(),!i){i=!0,r.on("push",function(){E(e)})
var u=k(t.path,n)
void 0===u&&o()}},E(t.cuer),t.listen(o)):(t.cuer=function n(){t.update(),i||(i=!0,r.on("push",function(){E(n)}))},E(t.cuer))):void a(r,t.push)}function c(t,n,r){var o,i
return""===t.path&&console.warn('mount: Cannot listen to path ""'),o=S(t.path,n),i=e(r.transformers,t.pipe),x(function(){return t.read()},i,o)}function f(t){t.input&&t.input.stop(),t.unlisten&&t.unlisten(),t.scope=void 0}function l(t){f(t),t.stop()}const p=t.Fn,d=t.Stream,h=t.frame,m=t.Observable,v=Object.assign,g=p.get,y=p.id,b=p.noop,x=p.pipe,w=p.remove,k=p.getPath,S=p.setPath,E=h.cue,F=h.uncue,P=m.observe
var L=/\|\s*([\w-]+)\s*(?::([^|]+))?/g,A=function(){function t(t,n){if(!t)throw new Error('Sparky: unable to parse transform args "'+n+'"')
return t[1]?null:!!t[2]||!t[3]&&(t[4]?parseFloat(t[4]):t[5]?t[5]:t[6]?t[6]:t[7]?t[7]:void 0)}var n=/\s*(?:(null)|(true)|(false)|(-?(?:\d+|\d+\.\d+|\.\d+)(?:[eE][-+]?\d+)?)|"([^"\\]*(?:\\.[^"\\]*)*)"|'([^'\\]*(?:\\.[^'\\]*)*)'|([^,\s]+))\s*,?/g
return function(e){var r=[]
for(n.lastIndex=0;n.lastIndex<e.length;)r.push(t(n.exec(e),e))
return r}}(),N=[],j=w(N)
v(o.prototype,{render:b,transform:y,stop:function(){F(this.cuer),j(this)},update:function(t){var n=this,e=this.transform,r=n.input&&n.input.shift()
void 0===r?n.render(n.originalValue):n.render(e(r))}}),v(i.prototype,o.prototype,{listen:function(t){this._listenFn&&console.warn("Bad Steve. Attempt to listen without removing last listener"),this._listenFn=t,this.node.addEventListener(this.type,t)},unlisten:function(){var t=this._listenFn
this.node.removeEventListener(this.type,t),this._listenType=void 0,this._listenFn=void 0}}),t.Struct=o,o.Readable=i,o.setup=u,o.bind=s,o.listen=c,o.unbind=f,o.teardown=l,o.parseParams=A,o.findScope=function(t){return g("scope",N.find(function(n){return n.node===t}))}}(window),function(t){"use strict"
function n(t,n){var e=tt(n).trim().split(z)
t.add.apply(t,e)}function e(t,n){var e=tt(n).trim().split(z)
t.remove.apply(t,e)}function r(t){return!!t}function o(t,n){var e=n.rtoken
return e.lastIndex=0,e.exec(t)}function i(t,n,e,r,o){var i=e.length
e.push(""),r.push(new _(t,o[0],o[2],function(t){e[i]=tt(t),n(e)},o[3]))}function u(t,n,e,r,o){var u=r.rtoken,a=u.lastIndex=0,s=u.exec(n)
if(s){for(var c=[],f=function(t){e(t.join(""))};s;)s.index>a&&c.push(n.slice(a,s.index)),i(t,f,c,o,s),a=u.lastIndex,s=u.exec(n)
n.length>a&&c.push(n.slice(a))}}function a(t,n,e,r){for(var o;o=t.shift();)s(o,n,e,r)}function s(t,n,e,r,o){var i=o!==!1&&n.getAttribute(e.attributePrefix+t)||n.getAttribute(Z[t]||t)
return i&&u(n,i,function(e){n.setAttribute(Z[t]||t,e)},e,r)}function c(t,n){return t in n?function(e){n[t]=!!e.find(r)}:function(e){e.find(r)?n.setAttribute(t,t):n.removeAttribute(t)}}function f(t,n,e,r,o){var i=e.length
e.push(!1),r.push(new _(t,o[0],o[2],function(t){e[i]=t,n(e)},o[3]))}function l(t,n,e,r){var o=n.getAttribute(e.attributePrefix+t),i=o||n.getAttribute(t)
if(i){var u=e.rtoken,a=u.lastIndex=0,s=u.exec(i)
if(s){var l=c(t,n)
o||l(q)
for(var p,d=[];s;)s.index>a&&(p=i.slice(a,s.index),X.test(p)||d.push(p)),f(n,l,d,r,s),a=u.lastIndex,s=u.exec(i)
i.length>a&&(p=i.slice(a),X.test(p)||d.push(p))}}}function p(t,r,o){var i=r.rtoken,u=j.attribute("class",t)
if(u){var a=j.classes(t),s=u.replace(i,function(r,i,u,s,c){var f=""
return o.push(new _(t,r,u,function(t){f&&K.test(f)&&e(a,f),t&&K.test(t)&&n(a,t),f=t},s)),""})
t.setAttribute("class",s)}}function d(t,n,e){var r=O(n.attributePrefix+"value",t)||O("value",t),i=o(r,n)
i&&e.push(new V(t,i[0],i[2],y,"input",k,i[3]))}function h(t,n,e){var r=O(n.attributePrefix+"value",t)||O("value",t),i=o(r,n)
i&&e.push(new V(t,i[0],i[2],g,"input",w,i[3]))}function m(t,n,e){var r=O(n.attributePrefix+"value",t),i=o(r,n)
i&&e.push(new V(t,i[0],i[2],b,"change",S,i[3]))}function v(t,n,e){var r=O(n.attributePrefix+"value",t),i=o(r,n)
i&&e.push(new V(t,i[0],i[2],x,"change",E,i[3]))}function g(t){var n=this.node
t!==n.value&&(n.value="string"==typeof t?t:"")}function y(t){var n=this.node
t!==parseFloat(n.value)&&(n.value="number"!=typeof t||Number.isNaN(t)?"":t)}function b(t){var n=this.node
n.checked=M(n.getAttribute("value"))?t===n.value:t===!0}function x(t){var n=this.node
n.checked=M(n.getAttribute("value"))?t===n.value:t===!0}function w(){var t=this.node
return t.value}function k(){var t=this.node
return t.value?parseFloat(t.value):void 0}function S(){var t=this.node
return M(t.getAttribute("value"))?t.checked?t.value:void 0:t.checked}function E(){var t=this.node
if(t.checked)return M(t.getAttribute("value"))?t.value:t.checked}function F(t,n){t.forEach(function(t){t.render&&$(t,n)})}function P(t){t.forEach(Q)}function L(t,n){n=I({},Y,n)
var e=[]
ot(t,n,e)
var r,o=F
return{shift:B,stop:function(){e.forEach(U)},push:function(t){r!==t&&(r=t,o(e,n),o=P,e.forEach(function(e){J(e,t,n)}))}}}const A=Array.prototype,N=t.Fn,j=t.dom,I=Object.assign,O=j.attribute,T=N.get,D=N.id,M=N.isDefined,q=N.nothing,B=N.noop,R=N.overload,C=N.set,H=N.toType,_=t.Struct,V=_.Readable,$=_.setup,J=_.bind,Q=_.unbind,U=_.teardown,G=_.getScope,z=/\s+/,X=/^\s*$/,K=/\S/,W=/function(?:\s+\w+)?\s*(\([\w,\s]*\))/,Y={attributePrefix:"sparky-",mount:B,transforms:{},transformers:{},rtoken:/(\{\[)\s*(.*?)(?:\s*(\|.*?))?\s*(\]\})/g}
var Z={viewbox:"viewBox"},tt=R(H,{boolean:function(t){return t+""},function:function(t){return(t.name||"function")+(W.exec(t.toString())||[])[1]},number:function(t){return Number.isNaN(t)?"":Number.isFinite(t)?t+"":t<0?"-∞":"∞"},string:D,symbol:function(t){return t.toString()},undefined:function(){return""},object:function(t){return t?JSON.stringify(t):""},default:JSON.stringify})
const nt={1:function(t,n,e){for(var r,o=A.slice.apply(t.childNodes),i=-1;r=o[++i];)n.mount(r,n,e)||ot(r,n,e)
p(t,n,e),l("hidden",t,n,e),a(["id","title","style"],t,n,e),it(t,n,e)},3:function(t,n,e){u(t,t.nodeValue,C("nodeValue",t),n,e)},8:B,9:function(t,n,e){for(var r,o=A.slice.apply(t.childNodes),i=-1;r=o[++i];)n.mount(r,n,e)||ot(r,n,e)},10:B,11:function(t,n,e){for(var r,o=A.slice.apply(t.childNodes),i=-1;r=o[++i];)n.mount(r,n,e)||ot(r,n,e)}},et={a:function(t,n,e){s("href",t,n,e)},button:function(t,n,e){l("disabled",t,n,e)},form:function(t,n,e){s("action",t,n,e)},fieldset:function(t,n,e){l("disabled",t,n,e)},img:function(t,n,e){s("alt",t,n,e)},input:function(t,n,e){l("disabled",t,n,e),l("required",t,n,e),s("name",t,n,e),ut(t,n,e)},label:function(t,n,e){s("for",t,n,e)},meter:function(t,n,e){a(["min","max","low","high","value"],t,n,e)},option:function(t,n,e){l("disabled",t,n,e),s("value",t,n,e)},output:function(t,n,e){s("for",t,n,e)},progress:function(t,n,e){s(["max","value"],t,n,e)},select:function(t,n,e){l("disabled",t,n,e),l("required",t,n,e),s("name",t,n,e),h(t,n,e)},textarea:function(t,n,e){l("disabled",t,n,e),l("required",t,n,e),s("name",t,n,e),h(t,n,e)},time:function(t,n,e){a(["datetime"],t,n,e)},svg:function(t,n,e){a(["viewbox"],t,n,e)},g:function(t,n,e){a(["transform"],t,n,e)},path:function(t,n,e){a(["d","transform"],t,n,e)},line:function(t,n,e){a(["x1","x2","y1","y2","transform"],t,n,e)},rect:function(t,n,e){a(["x","y","width","height","rx","ry","transform"],t,n,e)},text:function(t,n,e){a(["x","y","dx","dy","text-anchor","transform"],t,n,e)},use:function(t,n,e){a(["href","transform"],t,n,e)},default:B},rt={button:function(t,n,e){s("value",t,n,e,!1)},checkbox:function(t,n,e){s("value",t,n,e,!1),l("checked",t,n,e),m(t,n,e)},date:function(t,n,e){a(["min","max","step"],t,n,e),h(t,n,e)},hidden:function(t,n,e){s("value",t,n,e,!1)},image:function(t,n,e){s("src",t,n,e)},number:function(t,n,e){a(["min","max","step"],t,n,e),d(t,n,e)},radio:function(t,n,e){s("value",t,n,e,!1),l("checked",t,n,e),v(t,n,e)},range:function(t,n,e){a(["min","max","step"],t,n,e),d(t,n,e)},reset:function(t,n,e){s("value",t,n,e,!1)},submit:function(t,n,e){s("value",t,n,e,!1)},time:function(t,n,e){a(["min","max","step"],t,n,e),h(t,n,e)},default:function(t,n,e){h(t,n,e)}},ot=R(T("nodeType"),nt),it=R(j.tag,et),ut=R(T("type"),rt)
L.types=nt,L.tags=et,L.inputs=rt,L.mountAttribute=s,L.mountBoolean=l,L.mountInput=ut,L.mountValueString=h,L.mountValueNumber=d,L.parseParams=_.parseParams,L.getScope=function t(n){var e=G(n)
return void 0===e&&n.parentNode?t(n.parentNode):e},t.mount=L}(window),function(t){t.console&&t.console.log&&console.log("Sparky      - https://github.com/cruncher/sparky")}(window),function(t){"use strict"
function n(t,n){for(var e=[],r=-1;t[++r];)e.push(f(t[r],n))
return{stop:function(){return e.forEach(h("stop",arguments))},push:function(){return e.forEach(h("push",arguments))}}}function e(t){return t.replace(/\//g,"\\/")}function r(t){return a(t)||t}function o(t,u,a){function f(){return k=!1,{fn:y}}function l(){w.attributePrefix=o.attributePrefix,w.transforms=o.transforms,w.transformers=o.transformers,!i||a&&a.suppressLogs||console.groupCollapsed("Sparky:",t),E=n(S,w),g.each(E.push),!i||a&&a.suppressLogs||console.groupEnd()}function p(){var t=y.match(x)
if(!t)return S.continue=m,l(),S
var n=o.fn[t[1]]
if(!n)throw new Error('Sparky: fn "'+t[1]+'" not found in Sparky.fn')
var e=t[2]?b(t[2]):v
k=!0,y=y.slice(t[0].length)
var i=n.call(S,h,g,e)
return g=i?i.map(r).dedup():g,k&&p()}function d(t,n){this.shift=function(){var t
if(void 0!==u)return t=u,u=void 0,t},this.push=function(){u=arguments[arguments.length-1],t("push")},this.stop=function(){g.stop&&g.stop!==S.stop&&g.stop(),E.stop&&E.stop(),n(u?1:0)}}if(!o.prototype.isPrototypeOf(this))return new o(t,u,a)
var h="string"==typeof t?document.querySelector(e(t)):t
if(!h)throw new Error('Sparky: "'+t+'" not found.')
var g,y=a&&a.fn||c.attribute(o.attributeFn,h)||"",k=!0,S=this,E=v
this[0]=h,this.length=1,s.call(this,d),g=this.map(r).dedup(),this.interrupt=f,this.continue=p,p()}var i=t.DEBUG,u=t.Fn,a=t.Observable,s=t.Stream,c=t.dom,f=t.mount,l=Object.assign,p=u.deprecate,d=u.getPath,h=u.invoke,m=u.noop,v=u.nothing,g=c.tag,y=c.preventDefault,b=f.parseParams,x=/\s*([-\w]+)(?:\s*:\s*((?:"[^"]*"|'[^']*'|[^\s,]+)(?:\s*,\s*(?:"[^"]*"|'[^']*'|[^\s,]+))*))?/,w={mount:function(t,n,e){var r=c.attribute(o.attributeFn,t)
if(r){var i=new o(t,void 0,{fn:r,suppressLogs:!0})
return i.token=r,i.path="",e.push(i),!0}}}
o.prototype=s.prototype,l(o,{attributeFn:"sparky-fn",attributePrefix:"sparky-",fn:{global:function(n,e,r){var o=d(r[0],t)
return void 0===o?(console.warn("Sparky.fn.global:path – no object at path "+r[0]),u.of()):u.of(o)},scope:u.deprecate(function(t,n,e){return o.fn.find.apply(this,arguments)},"Deprecated Sparky fn scope:path renamed find:path"),get:function(t,n,e){var r=s.of(),o=m
return n.each(function(t){o(),o=s.observe(e[0],t).each(r.push).stop}),this.then(function(){o()}),r},if:function(t,n,e){var r=e[0],i=o.MarkerNode(t),u=!1
return c.before(t,i),c.remove(t),n.tap(function(n){var e=!!n[r]
e!==u&&(u=e,u?c.replace(i,t):c.replace(t,i))})},stop:function(t,n){this.interrupt()},ignore:p(function(t,n){console.log(this.interrupt(),t,n)},'Sparky: fn "ignore" renamed "stop".'),prevent:function(t,n,e){t.addEventListener(e[0],y),this.then(function(){t.removeEventListener(e[0],y)})},log:function(t,n){function e(n){console.group("Sparky: scope",t),console.log("data ",r.data),console.log("scope",n),console.log("fn   ",r.fn),console.groupEnd("---")}var r=this
return console.group("Sparky: run  ",t),console.log("data ",r.data),console.groupEnd("---"),n.tap(e)}},transforms:{},MarkerNode:function(t){if(!i)return c.create("text","")
var n=t&&t.getAttribute(o.attributeFn)
return c.create("comment",g(t)+(n?" "+o.attributeFn+'="'+n+'"':""))},getScope:f.getScope}),Object.defineProperties(o,{rtoken:{get:function(){return w.rtoken},set:function(t){w.rtoken=t},enumerable:!0,configurable:!0}}),t.Sparky=o}(window),Sparky.nodeToString=Fn.id,function(t){var n=t.Sparky
!!(document.all&&document.compatMode||t.navigator.msPointerEnabled)
n.fn.log=function(t,n){function e(n){console.log("Sparky: scope change",t,n),console.trace()}return n.tap(e)}}(window),function(t){"use strict"
var n=Object.assign,e=t.dom,r=t.Sparky
n(r.fn,{"show-on-scope":function(n,r){r.tap(function(){t.requestAnimationFrame(function(){e.classes(n).remove("sparky-hidden")})})}})}(window),function(t){"use strict"
var n=Object.assign,e=t.Sparky
n(e.fn,{html:function(t,n){n.tap(function(n){t.innerHTML=n})}})}(window),function(t){"use strict"
function n(t){t.preventDefault()}function e(t){var n,e,r,o=null
if(document.cookie&&""!==document.cookie)for(n=document.cookie.split(";"),r=0;r<n.length;r++)if(e=n[r]&&n[r].trim(),e.substring(0,t.length+1)===t+"="){o=decodeURIComponent(e.substring(t.length+1))
break}return o}var r=Object.assign,o=t.Fn
Object.assign(Sparky.fn,{prevent:function(t,e,r){t.addEventListener(r[0],n)},"ajax-on-submit":function(t,i,u){var a=(t.getAttribute("method")||"POST",t.getAttribute("action"))
if(!o.isDefined(a))throw new Error('Sparky: fn ajax-on-submit requires an action="url" attribute.')
var s
t.addEventListener("submit",n),i.tap(function(n){s&&t.removeEventListener("submit",s),s=function(o){var i=t.getAttribute("action")
axios.post(i,n,{headers:{"X-CSRFToken":e("csrftoken")}}).then(function(t){console.log(t),t.data&&r(n,t.data)}).catch(function(t){console.log(t)})},t.addEventListener("submit",s)})}})}(window),function(){"use strict"
Sparky.fn["x-scroll-slave"]=function(t){function n(){t.scrollLeft=e.scrollLeft}var e,r=t.getAttribute(Sparky.attributePrefix+"x-scroll-master")
this.on("dom-add",function(){if(e=document.getElementById(r),!e)throw console.error(t),new Error('Sparky scroll-x-slave: id="'+r+'" not in the DOM.')
e.addEventListener("scroll",n),n()}).on("destroy",function(){e&&e.removeEventListener("scroll",n)})},Sparky.fn["y-scroll-slave"]=function(t){function n(){t.scrollTop=r.scrollTop}var e=t.getAttribute(Sparky.attributePrefix+"y-scroll-master"),r=document.getElementById(e)
if(!r)throw console.error(t),new Error('Sparky scroll-x-slave: id="'+e+'" not in the DOM.')
r.addEventListener("scroll",n),n(),this.on("destroy",function(){r.removeEventListener("scroll",n)})}}(),function(t){function n(t,n){d(t).then(function(e){e&&(p[t]=e,n.push(e))}).catch(function(t){throw t})}var e=t.DEBUG,r=t.axios,o=t.jQuery,i=t.Fn,u=t.Sparky,a=t.Stream,s=Object.assign,c=t.fetch,f=i.get,l=f("data"),p={},d=r?function(t){return r.get(t).then(l)}:o?function(t){return o.get(t).then(l)}:c?function(t){return c(t).then(l)}:function(t){throw new Error('Sparky: no axios, jQuery or fetch found for request "'+t+'"')}
s(u.fn,{load:function(t,n,r){var o=r[0]
if(e&&!o)throw new Error("Sparky: "+u.attributePrefix+'fn="load:url" requires a url.')
var i=a.of()
return d(o).then(i.push).catch(function(t){console.warn(t)}),i},import:function(t,r,o){var s=o[0]
if(e&&!s)throw new Error("Sparky: "+u.attributePrefix+'fn="import:url" requires a url.')
var c=a.of()
return/\$\{(\w+)\}/.test(s)?(r.each(function(t){var e=s.replace(/\$\{(\w+)\}/g,function(n,e){return t[e]})
p[e]?c.push(p[e]):n(e,c)}),c):p[s]?i.of(p[s]):(n(s,c),c)}})}(window),function(t){"use strict"
function n(t,n,e,r,o){if(!o)throw new Error("Sparky: template "+r+" not found.")
var i=function(){i=y
var e=l.clone(o)
l.empty(n),l.append(n,e),u&&console.log("Sparky fn=template:",n),t.continue()},a=f.of()
return e.each(function(t){m(function(){i(),a.push(t)})}),a}function e(t,e,r,o,i){var u,a,s=w[o][i]
return s||(u=w[o][""],a=u.getElementById(i),s=w[o][i]=u===document?l.fragmentFromId(i):a&&l.fragmentFromHTML(a.innerHTML)),n(t,e,r,i,s)}function r(t,n,e,r,o,i){var u,a
if(i||(u=w[r][""],a=u.getElementById(o),i=w[r][o]=u===document?l.fragmentFromId(o):a&&l.fragmentFromHTML(a.innerHTML)),!i)throw new Error("Sparky: template "+o+" not found.")
var s=l.clone(i)
l.empty(n),l.append(n,s),t.continue()}function o(t,n,e,r,o){var u=f.of()
return k(r).then(function(a){if(a){var s=i(t,n,e,r,o,a)
t.continue(),s.each(u.push)}}).catch(function(t){console.warn(t)}),u}function i(t,e,r,o,i,u){var a,s
if(w[o]={"":u},!i)throw new Error("Sparky: template url has no hash id "+o)
return s=u.getElementById(i),a=w[o][i]=s&&l.fragmentFromHTML(s.innerHTML),n(t,e,r,i,a)}var u=!1,a=t.axios,s=t.jQuery,c=t.Fn,f=t.Stream,l=t.dom,p=t.Sparky,d=t.frame,h=Object.assign,m=d.cue,v=t.fetch,g=c.get,y=c.noop,b=g("data"),x=l.parse("html"),w={"":{"":document}},k=a?function(t,n){return a.get(t).then(b).then(x)}:s?function(t,n){return s.get(t).then(b).then(x)}:v?function(t,n){return v(t).then(b).then(x)}:function(t,n){throw new Error('Sparky: no axios, jQuery or fetch found for request "'+t+'"')}
h(p.fn,{template:function(t,n,r){var i,a,s,c=r[0]
if(/#/.test(c)?(i=c.split("#"),a=i[0]||"",s=i[1]||""):(console.warn('Deprecated: Sparky template:url url should be a url or hash ref, actually an id: "'+c+'"'),a="",s=c),u&&!s)throw new Error("Sparky: "+p.attributePrefix+'fn="template:url" requires a url with a hash ref. "'+c+'"')
var f=this
return f.interrupt(),w[a]?e(f,t,n,a,s):o(f,t,n,a,s)},"template-from":function(t,n,e){var i=e[0],a=this,s=f.of()
if(a.interrupt(),/\$\{([\w._]+)\}/.test(i))return n.each(function(e){var f=!1,l=i.replace(/\$\{([\w._]+)\}/g,function(t,n){var r=c.getPath(n,e)
return void 0===r&&(f=!0),r})
if(f)return void console.log("Sparky: template-from not properly assembled from scope",i,e)
var d=l.split("#"),h=d[0]||"",m=d[1]||""
if(u&&!m)throw new Error("Sparky: "+p.attributePrefix+'fn="template:url" requires a url with a hash ref. "'+l+'"')
w[h]?(r(a,t,n,h,m,w[h][m]),s.push(e)):k(h).then(function(e){e&&o(a,t,n,h,m,e)}).catch(function(t){console.warn(t)})}),s
throw new Error("Sparky: template-from must have ${prop} in the url string")}})}(window),function(t){"use strict"
function n(t,n,e){i&&console.groupCollapsed("each: create",t)
var r=new c(t,n,e)
return i&&console.groupEnd(),r[w]=n,r}function e(t,e,r,o){for(var i,u,a,s=-1;++s<r.length;)if(u=r[s],i=o[s],!i||u!==i[w]){for(a=s-1;o[++a]&&o[a][w]!==u;);i=a===o.length?n(h(t),u,e):o.splice(a,1)[0],o.splice(s,0,i)}for(;o.length>r.length;)l.forEach.call(o.pop().stop(),m)}function r(t,n,e){for(var r=e.length,o=-1,i=t.parentNode;o<r;)for(t=t?t.nextSibling:null;++o<r&&e[o][0]!==t;)i.insertBefore(e[o][0],t)}function o(t,n){function e(e){function r(t){n(i)}var i=t.shift()
if(void 0!==i){o()
var u=b(i,"",function(){g(r)})
o=function(){u(),y(r)}}}function r(){g(e)}var o=p
return t.on?t.on("push",r):r(),function(){t.off("push",r),o(),y(e)}}var i=!1,u=t.Fn,a=t.dom,s=t.Observable,c=t.Sparky,f=t.frame,l=Array.prototype,p=u.noop,d=a.before,h=a.clone,m=a.remove,v=a.tag,g=f.cue,y=f.uncue,b=s.observe,x=c.MarkerNode,w=Symbol("object")
c.fn.each=function(t,n,u){function a(t){var n=h?p.parentNode.value:void 0
i&&console.log("render: each "+JSON.stringify(t)),e(f,l,t,s),r(p,t,s),h&&void 0!==n&&(p.parentNode.value=n)}var s=[],f=t.cloneNode(!0),l=this.interrupt(),p=x(t),h="option"===v(t)
f.removeAttribute(c.attributeFn),d(t,p),m(t)
var g=n.latest().dedup(),y=o(g,a)
this.then(function(){m(p),y(),s.forEach(function(t){t.stop()})})}}(window),function(t){"use strict"
function n(t){for(var n="";t--;)n+=" "
return n}function e(t,n,e){for(var r=-1;++r<t.length&&t[r]<e;);if(0===r)return n[0]
if(r>=t.length)return l(n)
if(e===t[r])return n[r]
var o=(e-t[r-1])/(t[r]-t[r-1])
return o*(n[r]-n[r-1])+n[r-1]}var r=t.Fn,o=t.dom,i=t.Sparky,u=Array.prototype,a=Object.assign,s=r.curry,c=r.get,f=r.isDefined,l=r.last
r.formatDate
a(i.transformers={},{add:{tx:s(function(t,n){return n.add?n.add(t):n+t}),ix:s(function(t,n){return n.add?n.add(-t):n-t})},"add-date":{tx:r.addDate,ix:r.subDate},"add-time":{tx:r.addTime,ix:r.subTime},decibels:{tx:r.todB,ix:r.toLevel},multiply:{tx:r.multiply,ix:s(function(t,n){return n/t})},degrees:{tx:r.toDeg,ix:r.toRad},radians:{tx:r.toRad,ix:r.toDeg},pow:{tx:r.pow,ix:s(function(t,n){return r.pow(1/t,n)})},exp:{tx:r.exp,ix:r.log},log:{tx:r.log,ix:r.exp},int:{tx:r.toFixed(0),ix:r.toInt},float:{tx:r.toFloat,ix:r.toString},boolean:{tx:Boolean,ix:r.toString},normalise:{tx:r.normalise,ix:r.denormalise},denormalise:{tx:r.denormalise,ix:r.normalise},floatformat:{tx:r.toFixed,ix:s(function(t,n){return parseFloat(n)})},"int-string":{tx:function(t){return t?t+"":""},ix:r.toInt},interpolate:{tx:function(t){var n=u.map.call(arguments,c("0")),r=u.map.call(arguments,c("1"))
return function(t){return e(n,r,t)}},ix:function(t){var n=u.map.call(arguments,c("0")),r=u.map.call(arguments,c("1"))
return function(t){return e(r,n,t)}}}}),a(i.transforms,{append:r.append,contains:r.contains,diff:r.diff,equals:r.equals,factorise:r.factorise,formatdate:r.formatDate,formattime:r.formatTime,gcd:r.gcd,get:r.get,getPath:r.getPath,intersect:r.intersect,invoke:r.invoke,is:r.is,lcm:r.lcm,limit:r.limit,max:r.max,min:r.min,mod:r.mod,not:r.not,percent:r.multiply(100),prepend:r.prepend,rest:r.rest,root:r.nthRoot,slugify:r.slugify,sort:r.sort,take:r.take,toCartesian:r.toCartesian,todB:r.todB,decibels:r.todB,toDeg:r.toDeg,toLevel:r.toLevel,toPolar:r.toPolar,toRad:r.toRad,toStringType:r.toStringType,typeof:r.toType,unique:r.unique,unite:r.unite,escape:o.escape,px:o.toPx,rem:o.toRem,divide:s(function(t,n){if("number"==typeof n)return n/t}),"find-in":s(function(t,n){if(f(n)){var e=r.getPath(t,i.data)
return e&&e.find(n)}}),first:r.get(0),floatformat:s(function(t,n){return"number"==typeof n?Number.prototype.toFixed.call(n,t):f(n)?i.debug&&console.warn("Sparky: filter floatformat: "+t+" called on non-number "+n):""}),floor:function(t){return Math.floor(t)},"greater-than":s(function(t,n){return n>t}),invert:function(t){return"number"==typeof t?1/t:!t},join:s(function(t,n){return Array.prototype.join.call(n,t)}),json:function(t){return JSON.stringify(t)},last:function(t){return t[t.length-1]},"less-than":s(function(t,n){return n<t}),localise:s(function(t,n){var e=document.documentElement.lang,r={}
return f(t)&&(r.minimumFractionDigits=t,r.maximumFractionDigits=t),n.toLocaleString?n.toLocaleString(e,r):n}),lowercase:function(t){if("string"==typeof t)return String.prototype.toLowerCase.apply(t)},map:s(function(t,n,e){return e&&e.map(i.transforms[t].apply(null,n))},!0),filter:s(function(t,n,e){return e&&e.map(i.transforms[t].apply(null,n))},!0),match:s(function(t,n){return t="string"==typeof t?RegExp(t):t,t.exec(n)}),matches:s(function(t,n){return t="string"==typeof t?RegExp(t):t,!!t.test(n)}),pluralise:s(function(t,n,e,r){if("number"==typeof r)return t=t||"",n=n||"s","fr"===e?r<2&&r>=0?t:n:1===r?t:n}),postpad:s(function(t,e){var r=f(e)?e.toString():"",o=r.length,i=parseInt(t,10)
return i===o?e:i>o?r+n(i-o):r.substring(0,i)}),prepad:s(function(t,n,e){var r=f(e)?e.toString():"",o=r.length,i=[]
return t-o<1?e:(i.length=0,i.length=t-o,i.push(r),i.join(n||" "))}),random:function(t){return t[Math.floor(Math.random()*t.length)]},reduce:s(function(t,n,e){return e&&e.reduce(r[t],n||0)},!0),replace:s(function(t,n,e){if("string"==typeof e)return e.replace(RegExp(t,"g"),n)}),round:s(function(t,n){return Math.round(n/t)*t}),slice:s(function(t,n,e){return"string"==typeof e?e.slice(t,n):Array.prototype.slice.call(e,t,n)},!0),striptags:function(){var t=/<(?:[^>'"]|"[^"]*"|'[^']*')*>/g
return function(n){return n.replace(t,"")}}(),switch:function(t){if("string"==typeof t&&(t=parseInt(t,10)),"number"==typeof t&&!Number.isNaN(t))return arguments[t+1]},translate:function(){var t={}
return function(n){var e=i.translations
if(!e)return t.missingTranslations||(console.warn("Sparky: Missing lookup object Sparky.translations"),t.missingTranslations=!0),n
var r=e[n]
return r?r:(t[n]||(console.warn('Sparky: Sparky.translations contains no translation for "'+n+'"'),t[n]=!0),n)}}(),truncatechars:s(function(t,n){return n.length>t?n.slice(0,t)+"…":n}),type:function(t){return typeof t},uppercase:function(t){if("string"==typeof t)return String.prototype.toUpperCase.apply(t)},yesno:s(function(t,n,e){return e?t:n})})}(window)
